"use strict";var XP=Object.create;var Im=Object.defineProperty;var QP=Object.getOwnPropertyDescriptor;var ZP=Object.getOwnPropertyNames;var eO=Object.getPrototypeOf,tO=Object.prototype.hasOwnProperty;var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var rO=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ZP(t))!tO.call(e,s)&&s!==r&&Im(e,s,{get:()=>t[s],enumerable:!(n=QP(t,s))||n.enumerable});return e};var nO=(e,t,r)=>(r=e!=null?XP(eO(e)):{},rO(t||!e||!e.__esModule?Im(r,"default",{value:e,enumerable:!0}):r,e));var Cm=v((u6,Am)=>{"use strict";function sO(e){var t=new e,r=t;function n(){var i=t;return i.next?t=i.next:(t=new e,r=t),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}Am.exports=sO});var $l=v((l6,Tl)=>{"use strict";var iO=Cm();function Nm(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),r<1)throw new Error("fastqueue concurrency must be greater than 1");var n=iO(oO),s=null,i=null,o=0,a=null,l={push:y,drain:Jt,saturated:Jt,pause:c,paused:!1,concurrency:r,running:u,resume:d,idle:m,length:f,getQueue:h,unshift:S,empty:Jt,kill:b,killAndDrain:g,error:p};return l;function u(){return o}function c(){l.paused=!0}function f(){for(var T=s,O=0;T;)T=T.next,O++;return O}function h(){for(var T=s,O=[];T;)O.push(T.value),T=T.next;return O}function d(){if(l.paused){l.paused=!1;for(var T=0;T<l.concurrency;T++)o++,_()}}function m(){return o===0&&l.length()===0}function y(T,O){var w=n.get();w.context=e,w.release=_,w.value=T,w.callback=O||Jt,w.errorHandler=a,o===l.concurrency||l.paused?i?(i.next=w,i=w):(s=w,i=w,l.saturated()):(o++,t.call(e,w.value,w.worked))}function S(T,O){var w=n.get();w.context=e,w.release=_,w.value=T,w.callback=O||Jt,o===l.concurrency||l.paused?s?(w.next=s,s=w):(s=w,i=w,l.saturated()):(o++,t.call(e,w.value,w.worked))}function _(T){T&&n.release(T);var O=s;O?l.paused?o--:(i===s&&(i=null),s=O.next,O.next=null,t.call(e,O.value,O.worked),i===null&&l.empty()):--o===0&&l.drain()}function b(){s=null,i=null,l.drain=Jt}function g(){s=null,i=null,l.drain(),l.drain=Jt}function p(T){a=T}}function Jt(){}function oO(){this.value=null,this.callback=Jt,this.next=null,this.release=Jt,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var s=e.callback,i=e.errorHandler,o=e.value;e.value=null,e.callback=Jt,e.errorHandler&&i(r,o),s.call(e.context,r,n),e.release(e)}}function aO(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(c,f){t.call(this,c).then(function(h){f(null,h)},f)}var s=Nm(e,n,r),i=s.push,o=s.unshift;return s.push=a,s.unshift=l,s.drained=u,s;function a(c){var f=new Promise(function(h,d){i(c,function(m,y){if(m){d(m);return}h(y)})});return f.catch(Jt),f}function l(c){var f=new Promise(function(h,d){o(c,function(m,y){if(m){d(m);return}h(y)})});return f.catch(Jt),f}function u(){if(s.idle())return new Promise(function(h){h()});var c=s.drain,f=new Promise(function(h){s.drain=function(){c(),h()}});return f}}Tl.exports=Nm;Tl.exports.promise=aO});var Ol=v((c6,km)=>{"use strict";var{inherits:uO,format:Pl}=require("util");function Cn(e,t,r=Error){if(!e)throw new Error("Avvio error code must not be empty");if(!t)throw new Error("Avvio base error message must not be empty");function n(s,i,o){if(!new.target)return new n(s,i,o);Error.captureStackTrace(this,n),this.code=e,this.message=t,this.name="AvvioError",s&&i&&o?this.message=Pl(t,s,i,o):s&&i?this.message=Pl(t,s,i):s?this.message=Pl(t,s):this.message=t}return n.prototype[Symbol.toStringTag]="Error",n.prototype.toString=function(){return`${this.name} [${this.code}]: ${this.message}`},uO(n,r),n}km.exports={createError:Cn,AVV_ERR_EXPOSE_ALREADY_DEFINED:Cn("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' () is already defined, specify an expose option"),AVV_ERR_CALLBACK_NOT_FN:Cn("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Cn("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Cn("AVV_ERR_PLUGIN_NOT_VALID","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Cn("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Cn("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var jm=v((f6,qm)=>{qm.exports=function e(t,r,n){r===void 0&&(r=""),n||(n={});var s=function(l){var u={"\u2502":"|","\u2514":"`","\u251C":"+","\u2500":"-","\u252C":"-"};return n.unicode===!1?u[l]:l};typeof t=="string"&&(t={label:t});var i=t.nodes||[],o=(t.label||"").split(`
`),a=`
`+r+(i.length?s("\u2502"):" ")+" ";return r+o.join(a)+`
`+i.map(function(l,u){var c=u===i.length-1,f=l.nodes&&l.nodes.length,h=r+(c?" ":s("\u2502"))+" ";return r+s(c?"\u2514":"\u251C")+s("\u2500")+s(f?"\u252C":"\u2500")+" "+e(l,h,n).slice(r.length+2)}).join("")}});var Vm=v((d6,Mm)=>{"use strict";var lO=jm(),Dm=Symbol("avvio.TimeTree.untrackNode"),Il=Symbol("avvio.TimeTree.trackNode"),Lm=Symbol("avvio.TimeTree.getParent"),xm=Symbol("avvio.TimeTree.getNode"),Fm=Symbol("avvio.TimeTree.addNode"),Al=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[Il](t){this.tableId.set(t.id,t),this.tableLabel.has(t.label)?this.tableLabel.get(t.label).push(t):this.tableLabel.set(t.label,[t])}[Dm](t){this.tableId.delete(t.id);let r=this.tableLabel.get(t.label);if(r.id){this.tableLabel.delete(t.label);return}r.pop(),r.length===0&&this.tableLabel.delete(t.label)}[Lm](t){if(t===null)return this.root;let r=this.tableLabel.get(t);return r.id?r:r[r.length-1]}[xm](t){return this.tableId.get(t)}[Fm](t,r,n){if(t===null)return this.root={id:"root",label:r,start:n,nodes:[]},this[Il](this.root),this.root.id;let i=this[Lm](t),o=`${r}-${Math.random()}`,a={id:o,parent:t,start:n,label:r,nodes:[]};return i.nodes.push(a),this[Il](a),o}start(t,r,n=Date.now()){return this[Fm](t,r,n)}stop(t,r=Date.now()){let n=this[xm](t);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[Dm](n))}toJSON(){return Object.assign({},this.root)}prittyPrint(){let t=n=>(n.label=`${n.label} ${n.diff} ms`,n.nodes.length>0&&(n.nodes=n.nodes.map(s=>t(s))),n),r=t(this.toJSON());return lO(r)}};Mm.exports=Al});var Hm=v((h6,zm)=>{var hs=1e3,ps=hs*60,ms=ps*60,Nn=ms*24,cO=Nn*7,fO=Nn*365.25;zm.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return dO(e);if(r==="number"&&isFinite(e))return t.long?pO(e):hO(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function dO(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*fO;case"weeks":case"week":case"w":return r*cO;case"days":case"day":case"d":return r*Nn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ms;case"minutes":case"minute":case"mins":case"min":case"m":return r*ps;case"seconds":case"second":case"secs":case"sec":case"s":return r*hs;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function hO(e){var t=Math.abs(e);return t>=Nn?Math.round(e/Nn)+"d":t>=ms?Math.round(e/ms)+"h":t>=ps?Math.round(e/ps)+"m":t>=hs?Math.round(e/hs)+"s":e+"ms"}function pO(e){var t=Math.abs(e);return t>=Nn?ta(e,t,Nn,"day"):t>=ms?ta(e,t,ms,"hour"):t>=ps?ta(e,t,ps,"minute"):t>=hs?ta(e,t,hs,"second"):e+" ms"}function ta(e,t,r,n){var s=t>=r*1.5;return Math.round(e/r)+" "+n+(s?"s":"")}});var Cl=v((p6,Um)=>{function mO(e){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=s,r.enabled=o,r.humanize=Hm(),r.destroy=u,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let f=0;for(let h=0;h<c.length;h++)f=(f<<5)-f+c.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(c){let f,h=null,d,m;function y(...S){if(!y.enabled)return;let _=y,b=Number(new Date),g=b-(f||b);_.diff=g,_.prev=f,_.curr=b,f=b,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let p=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(O,w)=>{if(O==="%%")return"%";p++;let I=r.formatters[w];if(typeof I=="function"){let k=S[p];O=I.call(_,k),S.splice(p,1),p--}return O}),r.formatArgs.call(_,S),(_.log||r.log).apply(_,S)}return y.namespace=c,y.useColors=r.useColors(),y.color=r.selectColor(c),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,m=r.enabled(c)),m),set:S=>{h=S}}),typeof r.init=="function"&&r.init(y),y}function n(c,f){let h=r(this.namespace+(typeof f>"u"?":":f)+c);return h.log=this.log,h}function s(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f,h=(typeof c=="string"?c:"").split(/[\s,]+/),d=h.length;for(f=0;f<d;f++)h[f]&&(c=h[f].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(c))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Um.exports=mO});var Bm=v((Vt,ra)=>{Vt.formatArgs=gO;Vt.save=_O;Vt.load=vO;Vt.useColors=yO;Vt.storage=EO();Vt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Vt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function yO(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function gO(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+ra.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),e.splice(n,0,t)}Vt.log=console.debug||console.log||(()=>{});function _O(e){try{e?Vt.storage.setItem("debug",e):Vt.storage.removeItem("debug")}catch{}}function vO(){let e;try{e=Vt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function EO(){try{return localStorage}catch{}}ra.exports=Cl()(Vt);var{formatters:SO}=ra.exports;SO.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Km=v((ft,sa)=>{var bO=require("tty"),na=require("util");ft.init=IO;ft.log=$O;ft.formatArgs=RO;ft.save=PO;ft.load=OO;ft.useColors=wO;ft.destroy=na.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ft.colors=[6,2,3,4,5,1];try{let e=require("supports-color");e&&(e.stderr||e).level>=2&&(ft.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ft.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function wO(){return"colors"in ft.inspectOpts?!!ft.inspectOpts.colors:bO.isatty(process.stderr.fd)}function RO(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${t} \x1B[0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(s+"m+"+sa.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=TO()+t+" "+e[0]}function TO(){return ft.inspectOpts.hideDate?"":new Date().toISOString()+" "}function $O(...e){return process.stderr.write(na.format(...e)+`
`)}function PO(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function OO(){return process.env.DEBUG}function IO(e){e.inspectOpts={};let t=Object.keys(ft.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=ft.inspectOpts[t[r]]}sa.exports=Cl()(ft);var{formatters:Gm}=sa.exports;Gm.o=function(e){return this.inspectOpts.colors=this.useColors,na.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Gm.O=function(e){return this.inspectOpts.colors=this.useColors,na.inspect(e,this.inspectOpts)}});var kl=v((m6,Nl)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Nl.exports=Bm():Nl.exports=Km()});var Jm=v((y6,Dl)=>{"use strict";var AO=$l(),CO=require("events").EventEmitter,NO=require("util").inherits,it=kl()("avvio"),{AVV_ERR_READY_TIMEOUT:kO}=Ol(),ql=Symbol.for("plugin-meta");function qO(e,t){return e[ql]&&e[ql].name?e[ql].name:typeof t<"u"&&typeof t!="function"&&t.name?t.name:e.name?e.name:e.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}function jO(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}function ys(e,t,r,n,s){this.started=!1,this.func=t,this.opts=r,this.onFinish=null,this.parent=e,this.timeout=s===void 0?e._timeout:s,this.name=qO(t,r),this.isAfter=n,this.q=AO(e,DO,1),this.q.pause(),this._error=null,this.loaded=!1,this._promise=null}NO(ys,CO);ys.prototype.exec=function(e,t){let r=this.func,n=!1,s=this.name;if(this.parent._error&&!this.isAfter){it("skipping loading of plugin as parent errored and it is not an after",s),process.nextTick(t);return}if(this.isAfter)this.server=e;else try{this.server=this.parent.override(e,r,this.opts)}catch(l){return it("override errored",s),t(l)}this.opts=typeof this.opts=="function"?this.opts(this.server):this.opts,it("exec",s);let i,o=l=>{if(n){it("loading complete",s);return}this._error=l,it(l?"exec errored":"exec completed",s),n=!0,i&&clearTimeout(i),t(l)};this.timeout>0&&(it("setting up timeout",s,this.timeout),i=setTimeout(function(){it("timed out",s),i=null;let l=new kO(s);l.fn=r,o(l)},this.timeout)),this.started=!0,this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.opts,o);a&&typeof a.then=="function"&&(it("exec: resolving promise",s),a.then(()=>process.nextTick(o),l=>process.nextTick(o,l)))};ys.prototype.loadedSoFar=function(){if(this.loaded)return Promise.resolve();let e=()=>{this.server.after((r,n)=>{this._error=r,this.q.pause(),r?(it("rejecting promise",this.name,r),this._promise.reject(r)):(it("resolving promise",this.name),this._promise.resolve()),this._promise=null,process.nextTick(n,r)}),this.q.resume()},t;return this._promise?t=Promise.resolve():(this._promise=jO(),t=this._promise.promise,this.server?e():this.on("start",e)),t};ys.prototype.enqueue=function(e,t){it("enqueue",this.name,e.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.q.push(e,t)};ys.prototype.finish=function(e,t){it("finish",this.name,e);let r=()=>{this.loaded||(it("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,t(e))};if(e){this._promise&&(this._promise.reject(e),this._promise=null),r();return}let n=()=>{if(it("check",this.name,this.q.length(),this.q.running(),this._promise),this.q.length()===0&&this.q.running()===0)if(this._promise){let s=()=>{it("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else it("delayed",this.name),this.q.drain=()=>{it("drain",this.name),this.q.drain=LO,queueMicrotask(n)}};queueMicrotask(n),this.q.resume()};function DO(e,t){let r=this;process.nextTick(jl.bind(r),e,t)}function jl(e,t){if(typeof e.func.then=="function"){e.func.then(n=>{typeof n.default=="function"&&(n=n.default),e.func=n,jl.call(this,e,t)},t);return}let r=this._current[0];this._current.unshift(e),e.exec(r&&r.server||this._server,n=>{e.finish(n,s=>{this._current.shift(),t(s)})})}function LO(){}Dl.exports=ys;Dl.exports.loadPlugin=jl});var Zm=v((g6,Vl)=>{"use strict";var Ym=$l(),xO=require("events").EventEmitter,FO=require("util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:Ll,AVV_ERR_CALLBACK_NOT_FN:wi,AVV_ERR_PLUGIN_NOT_VALID:MO,AVV_ERR_ROOT_PLG_BOOTED:VO,AVV_ERR_READY_TIMEOUT:zO}=Ol(),HO=Vm(),Ml=Jm(),gs=kl()("avvio"),ia=Symbol("kAvvio"),xl=Symbol("kThenifyDoNotWrap");function UO(e,t,r){let n=t.expose||{},s=n.use||"use",i=n.after||"after",o=n.ready||"ready",a=n.onClose||"onClose",l=n.close||"close";if(e[s])throw new Ll(s);if(e[i])throw new Ll(i);if(e[o])throw new Ll(o);e[s]=function(u,c){return r.use(u,c),this},Object.defineProperty(e,"then",{get:Xm.bind(r)}),e[ia]=!0,e[i]=function(u){return typeof u!="function"?r._loadRegistered():(r.after(Fl(u,this)),this)},e[o]=function(u){if(u&&typeof u!="function")throw new wi(o,typeof u);return r.ready(u?Fl(u,this):void 0)},e[a]=function(u){if(typeof u!="function")throw new wi(a,typeof u);return r.onClose(YO(u,this)),this},e[l]=function(u){if(u&&typeof u!="function")throw new wi(l,typeof u);return u?(r.close(Fl(u,this)),this):r.close()}}function ot(e,t,r){if(typeof e=="function"&&arguments.length===1&&(r=e,t={},e=null),typeof t=="function"&&(r=t,t={}),t=t||{},!(this instanceof ot)){let n=new ot(e,t,r);return e&&UO(e,t,n),n}t.autostart!==!1&&(t.autostart=!0),e=e||this,this._timeout=Number(t.timeout)||0,this._server=e,this._current=[],this._error=null,this._isOnCloseHandlerKey=Symbol("isOnCloseHandler"),this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new HO,this._readyQ=Ym(this,Qm,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=Wm},this._closeQ=Ym(this,JO,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=Wm},this._doStart=null,this._root=new Ml(this,BO.bind(this),t,!1,0),this._root.once("start",(n,s,i)=>{let o=this.pluginTree.start(null,s,i);this._root.once("loaded",(a,l,u)=>{this.pluginTree.stop(o,u)})}),Ml.loadPlugin.call(this,this._root,n=>{gs("root plugin ready");try{this.emit("preReady"),this._root=null}catch(s){n=n||this._error||s}if(n){if(this._error=n,this._readyQ.length()===0)throw n}else this.booted=!0;this._readyQ.resume()})}function BO(e,t,r){this._doStart=r,t.autostart&&this.start()}FO(ot,xO);ot.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};ot.prototype.override=function(e,t,r){return e};function GO(e){if(e&&typeof e=="object"&&typeof e.default=="function"&&(e=e.default),!(e&&(typeof e=="function"||typeof e.then=="function")))throw new MO(typeof e);return e}ot.prototype[ia]=!0;ot.prototype.use=function(e,t){return this._lastUsed=this._addPlugin(e,t,!1),this};ot.prototype._loadRegistered=function(){let e=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.q.resume()),e?e.loadedSoFar():Promise.resolve()};Object.defineProperty(ot.prototype,"then",{get:Xm});ot.prototype._addPlugin=function(e,t,r){if(e=GO(e),t=t||{},this.booted)throw new VO;let n=this._current[0],s=new Ml(this,e,t,r);if(s.once("start",(i,o,a)=>{let l=this.pluginTree.start(n.name,o,a);s.once("loaded",(u,c,f)=>{this.pluginTree.stop(l,f)})}),n.loaded)throw new Error(s.name,n.name);return n.enqueue(s,i=>{i&&(this._error=i)}),s};ot.prototype.after=function(e){if(!e)return this._loadRegistered();this._addPlugin(t.bind(this),{},!0);function t(r,n,s){Qm.call(this,e,s)}return this};ot.prototype.onClose=function(e){if(typeof e!="function")throw new Error("not a function");e[this._isOnCloseHandlerKey]=!0,this._closeQ.unshift(e,t.bind(this));function t(r){r&&(this._error=r)}return this};ot.prototype.close=function(e){let t;if(e){if(typeof e!="function")throw new wi("close",typeof e)}else t=new Promise(function(r,n){e=function(s){if(s)return n(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(e),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),t};ot.prototype.ready=function(e){if(e){if(typeof e!="function")throw new wi("ready",typeof e);this._readyQ.push(e),queueMicrotask(this.start.bind(this));return}return new Promise((t,r)=>{this._readyQ.push(s),this.start();let n=this._current[0].server;function s(i,o,a){i?r(i):t(n),process.nextTick(a)}})};ot.prototype.prettyPrint=function(){return this.pluginTree.prittyPrint()};ot.prototype.toJSON=function(){return this.pluginTree.toJSON()};function Wm(){}function Xm(){if(this.booted){gs("thenify returning null because we are already booted");return}if(this[xl]){this[xl]=!1;return}return gs("thenify"),(e,t)=>this._loadRegistered().then(()=>(this[xl]=!0,e(this._server)),t)}function Qm(e,t){let r=this._server,n=this._error,s;if(this._error=null,e.length===0)this._error=n,s=e(),s&&!s[ia]&&typeof s.then=="function"?s.then(()=>process.nextTick(t),i=>process.nextTick(t,i)):process.nextTick(t);else if(e.length===1)s=e(n),s&&!s[ia]&&typeof s.then=="function"?s.then(()=>process.nextTick(t),i=>process.nextTick(t,i)):process.nextTick(t);else if(this._timeout===0){let i=o=>{this._error=o,t(this._error)};e.length===2?e(n,i):e(n,r,i)}else KO.call(this,e,n,r,t)}function KO(e,t,r,n){let s=e.name;gs("setting up ready timeout",s,this._timeout);let i=setTimeout(()=>{gs("timed out",s),i=null;let a=new zO(s);a.fn=e,this._error=a,n(a)},this._timeout);e.length===2?e(t,o.bind(this)):e(t,r,o.bind(this));function o(a){i&&(clearTimeout(i),this._error=a,n(this._error))}}function JO(e,t){let r=this._server,n=e[this._isOnCloseHandlerKey];if(e.length===0||e.length===1){let s;n?s=e(r):s=e(this._error),s&&typeof s.then=="function"?(gs("resolving close/onClose promise"),s.then(()=>process.nextTick(t),i=>process.nextTick(t,i))):process.nextTick(t)}else e.length===2?e(n?r:this._error,t):n?e(r,t):e(this._error,r,t)}function YO(e,t){return r.bind(t);function r(n,s){let i;e.length===0?(i=e(),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):e.length===1?(i=e(this),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):e(this,s)}}function Fl(e,t){return r.bind(t);function r(n,s){let i;e?e.length===0?(i=e(),i&&i.then?i.then(function(){process.nextTick(s,n)},s):process.nextTick(s,n)):e.length===1?(i=e(n),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):e.length===2?e(n,s):e(n,this,s):process.nextTick(s)}}Vl.exports=ot;Vl.exports.express=function(e){return ot(e,{expose:{use:"load"}})}});var at=v((_6,ey)=>{"use strict";var WO={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kPublicRouteContext:Symbol("fastify.routeOptions"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};ey.exports=WO});var Ul=v((v6,oa)=>{"use strict";var{format:zl}=require("util");function Hl(){let e={},t=new Map,r=Object.create(null);function n(i,o,a,{unlimited:l=!1}={}){if(!i)throw new Error("Warning name must not be empty");if(!o)throw new Error("Warning code must not be empty");if(!a)throw new Error("Warning message must not be empty");if(typeof l!="boolean")throw new Error("Warning opts.unlimited must be a boolean");if(o=o.toUpperCase(),e[o]!==void 0)throw new Error(`The code '${o}' already exist`);function u(c,f,h){let d;return c&&f&&h?d=zl(a,c,f,h):c&&f?d=zl(a,c,f):c?d=zl(a,c):d=a,{code:o,name:i,message:d}}return Object.assign(r,{unlimited:l}),t.set(o,l),e[o]=u,e[o]}function s(i,o,a,l){if(t.get(i)===!0&&r.unlimited===!1)return;if(e[i]===void 0)throw new Error(`The code '${i}' does not exist`);t.set(i,!0);let u=e[i](o,a,l);process.emitWarning(u.message,u.name,u.code)}return{create:n,emit:s,emitted:t}}oa.exports=Hl;oa.exports.default=Hl;oa.exports.processWarning=Hl});var en=v((E6,ty)=>{"use strict";var Yt=Ul()();Yt.create("FastifyDeprecation","FSTDEP005",'You are accessing the deprecated "request.connection" property. Use "request.socket" instead.');Yt.create("FastifyDeprecation","FSTDEP006","You are decorating Request/Reply with a reference type. This reference is shared amongst all requests. Use onRequest hook instead. Property: %s");Yt.create("FastifyDeprecation","FSTDEP007",'You are trying to set a HEAD route using "exposeHeadRoute" route flag when a sibling route is already set. See documentation for more info.');Yt.create("FastifyDeprecation","FSTDEP008",'You are using route constraints via the route { version: "..." } option, use { constraints: { version: "..." } } option instead.');Yt.create("FastifyDeprecation","FSTDEP009",'You are using a custom route versioning strategy via the server { versioning: "..." } option, use { constraints: { version: "..." } } option instead.');Yt.create("FastifyDeprecation","FSTDEP010",'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.');Yt.create("FastifyDeprecation","FSTDEP011",'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.');Yt.create("FastifyDeprecation","FSTDEP012",'Request#context property access is deprecated. Please use "Request#routeConfig" or "Request#routeSchema" instead for accessing Route settings. The "Request#context" will be removed in `fastify@5`.');Yt.create("FastifyDeprecation","FSTDEP013",'Direct return of "trailers" function is deprecated. Please use "callback" or "async-await" for return value. The support of direct return will removed in `fastify@5`.');Yt.create("FastifyDeprecation","FSTDEP014","You are trying to set/access the default route. This property is deprecated. Please, use setNotFoundHandler if you want to custom a 404 handler or the wildcard (*) to match all routes.");Yt.create("FastifyWarning","FSTWRN001","The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",{unlimited:!0});ty.exports=Yt});var ry=v((S6,aa)=>{"use strict";var{inherits:XO,format:QO}=require("util");function Bl(e,t,r=500,n=Error){if(!e)throw new Error("Fastify error code must not be empty");if(!t)throw new Error("Fastify error message must not be empty");e=e.toUpperCase(),!r&&(r=void 0);function s(...i){if(!new.target)return new s(...i);this.code=e,this.name="FastifyError",this.statusCode=r,this.message=QO(t,...i),Error.stackTraceLimit!==0&&Error.captureStackTrace(this,s)}return s.prototype[Symbol.toStringTag]="Error",s.prototype.toString=function(){return`${this.name} [${this.code}]: ${this.message}`},XO(s,n),s}aa.exports=Bl;aa.exports.default=Bl;aa.exports.createError=Bl});var gt=v((b6,ua)=>{"use strict";var U=ry(),_s={FST_ERR_NOT_FOUND:U("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:U("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:U("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:U("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:U("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:U("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","sajv.customOptions option should be an object, instead got '%s'",500),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:U("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","sajv.plugins option should be an array, instead got '%s'",500),FST_ERR_VERSION_CONSTRAINT_NOT_STR:U("FST_ERR_VERSION_CONSTRAINT_NOT_STR","Version constraint should be a string.",500),FST_ERR_CTP_ALREADY_PRESENT:U("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:U("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:U("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:U("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:U("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:U("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:U("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:U("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:U("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:U("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:U("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:U("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array."),FST_ERR_DEC_MISSING_DEPENDENCY:U("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:U("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_HOOK_INVALID_TYPE:U("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:U("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:U("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:U("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:U("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.io/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:U("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:U("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:U("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'."),FST_ERR_REP_INVALID_PAYLOAD_TYPE:U("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_ALREADY_SENT:U("FST_ERR_REP_ALREADY_SENT","Reply was already sent."),FST_ERR_REP_SENT_VALUE:U("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true."),FST_ERR_SEND_INSIDE_ONERR:U("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:U("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:U("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:U("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:U("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:U("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:U("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:U("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:U("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:U("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:U("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:U("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:U("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:U("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:U("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:U("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:U("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:U("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:U("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:U("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:U("FST_ERR_BAD_URL","'%s' is not a valid url component",400),FST_ERR_ASYNC_CONSTRAINT:U("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:U("FST_ERR_DEFAULT_ROUTE_INVALID_TYPE","The defaultRoute type should be a function",500,TypeError),FST_ERR_INVALID_URL:U("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:U("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500),FST_ERR_ROUTE_DUPLICATED_HANDLER:U("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:U("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500),FST_ERR_ROUTE_MISSING_HANDLER:U("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:U("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:U("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:U("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:U("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500),FST_ERR_REOPENED_CLOSE_SERVER:U("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:U("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:U("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:U("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:U("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_CALLBACK_NOT_FN:U("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s"),FST_ERR_PLUGIN_NOT_VALID:U("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:U("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:U("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:U("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function ZO(e,t){return t.cause=e,t}ua.exports=_s;ua.exports.appendStackTrace=ZO;ua.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:_s.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:_s.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:_s.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:_s.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:_s.FST_ERR_PLUGIN_TIMEOUT}});var dy=v((w6,Kl)=>{"use strict";var e1=require("http"),t1=require("https"),r1=require("dns"),ny=en(),{kState:zt,kOptions:n1,kServerBindings:s1}=at(),{FST_ERR_HTTP2_INVALID_VERSION:i1,FST_ERR_REOPENED_CLOSE_SERVER:oy,FST_ERR_REOPENED_SERVER:ay}=gt();Kl.exports.createServer=o1;Kl.exports.compileValidateHTTPVersion=u1;function uy(e){return`Server listening at ${e}`}function o1(e,t){let r=cy(e,t);return{server:r,listen:n};function n(s,...i){let o=i.slice(-1).pop(),a=Object.prototype.toString.call(arguments[0]);if(arguments.length===0)s=Gl([]);else if(arguments.length>0&&a!=="[object Object]"&&a!=="[object Function]")ny.emit("FSTDEP011"),s=Gl(Array.from(arguments)),o=s.cb;else if(i.length>1){ny.emit("FSTDEP011");let u=s.path?[s.path]:[s.port??0,s.host??"localhost"];Object.assign(s,Gl([...u,...i]))}else s.cb=o;let l;if(s.path==null?l=s.host??"localhost":l=s.host,Object.prototype.hasOwnProperty.call(s,"host")===!1&&(s.host=l),l==="localhost"&&(s.cb=(u,c)=>{if(u){o(u,c);return}sy.call(this,r,t,e,s,()=>{this[zt].listening=!0,o(null,c)})}),o===void 0){let u=a1.call(this,r,s);return l==="localhost"?u.then(c=>new Promise((f,h)=>{sy.call(this,r,t,e,s,()=>{this[zt].listening=!0,f(c)})})):u}this.ready(ly.call(this,r,s))}}function sy(e,t,r,n,s){this[zt].listening=!1,r1.lookup(n.host,{all:!0},(i,o)=>{if(i){s();return}let a=0,l=0,u=e.address();for(let f of o)if(f.address!==u.address){a++;let h=Object.assign({},n,{host:f.address,port:u.port,cb:y=>{l++,y||this[s1].push(d),l===a&&s()}}),d=cy(r,t),m=()=>{d.close(()=>{})};d.on("upgrade",e.emit.bind(e,"upgrade")),e.on("unref",m),e.on("close",m),e.on("error",m),ly.call(this,d,h)()}if(a===0){s();return}let c=e.unref;e.unref=function(){c.call(e),e.emit("unref")}})}function ly(e,t){let r=n=>{if(e.removeListener("error",r),n)this[zt].listening=!1,t.cb(n,null);else{let s=fy.call(this,e,t.listenTextResolver||uy);t.cb(null,s)}};return n=>{if(n!=null)return t.cb(n);if(this[zt].listening&&this[zt].closing)return t.cb(new oy,null);if(this[zt].listening)return t.cb(new ay,null);e.once("error",r),e.listen(t,r),this[zt].listening=!0}}function a1(e,t){return this[zt].listening&&this[zt].closing?Promise.reject(new oy):this[zt].listening?Promise.reject(new ay):this.ready().then(()=>{let r,n=new Promise((i,o)=>{r=a=>{this[zt].listening=!1,o(a)},e.once("error",r)}),s=new Promise((i,o)=>{e.listen(t,()=>{e.removeListener("error",r),i(fy.call(this,e,t.listenTextResolver||uy))}),this[zt].listening=!0});return Promise.race([n,s])})}function u1(e){let t=!1,r=new Map;return e.serverFactory&&(t=!0),e.http2?(r.set("2.0",!0),e.https&&e.https.allowHTTP1===!0&&(r.set("1.1",!0),r.set("1.0",!0))):(r.set("1.1",!0),r.set("1.0",!0)),function(s){return t||r.has(s)}}function cy(e,t){let r=null;return e.serverFactory?r=e.serverFactory(t,e):e.http2?(e.https?r=iy().createSecureServer(e.https,t):r=iy().createServer(t),r.on("session",c1(e.http2SessionTimeout))):(e.https?r=t1.createServer(e.https,t):r=e1.createServer(e.http,t),r.keepAliveTimeout=e.keepAliveTimeout,r.requestTimeout=e.requestTimeout,e.maxRequestsPerSocket>0&&(r.maxRequestsPerSocket=e.maxRequestsPerSocket)),e.serverFactory||r.setTimeout(e.connectionTimeout),r}function Gl(e){if(e.length===0)return{port:0,host:"localhost"};let r={cb:typeof e[e.length-1]=="function"?e.pop():void 0},n=e[0],s=e.length,i=e[s-1];return typeof n=="string"&&isNaN(n)?(r.path=n,r.backlog=s>1?i:void 0):(r.port=s>=1&&Number.isInteger(n)?n:l1(n),r.host=s>=2&&e[1]?e[1]:"localhost",r.backlog=s>=3?e[2]:void 0),r}function l1(e){let t=Number(e);return t>=0&&!Number.isNaN(t)&&Number.isInteger(t)?t:0}function fy(e,t){let r=e.address(),n=typeof r=="string";n||(r.address.indexOf(":")===-1?r=r.address+":"+r.port:r="["+r.address+"]:"+r.port),r=(n?"":"http"+(this[n1].https?"s":"")+"://")+r;let s=t(r);return this.log.info(s),r}function iy(){try{return require("http2")}catch{throw new i1}}function c1(e){return function(t){t.setTimeout(e,f1)}}function f1(){this.close()}});var kn=v((R6,_y)=>{"use strict";var d1=["onRoute","onRegister","onReady","preClose","onClose"],my=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],yy=my.concat(d1),{FST_ERR_HOOK_INVALID_TYPE:h1,FST_ERR_HOOK_INVALID_HANDLER:p1,FST_ERR_SEND_UNDEFINED_ERR:Yl,FST_ERR_HOOK_TIMEOUT:m1,FST_ERR_HOOK_NOT_SUPPORTED:y1,AVVIO_ERRORS_MAP:hy,appendStackTrace:py}=gt(),{kChildren:Jl,kHooks:g1}=at();function la(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}la.prototype.validate=function(e,t){if(typeof e!="string")throw new h1;if(yy.indexOf(e)===-1)throw new y1(e);if(typeof t!="function")throw new p1(e,Object.prototype.toString.call(t))};la.prototype.add=function(e,t){this.validate(e,t),this[e].push(t)};function _1(e){let t=new la;return t.onRequest=e.onRequest.slice(),t.preParsing=e.preParsing.slice(),t.preValidation=e.preValidation.slice(),t.preSerialization=e.preSerialization.slice(),t.preHandler=e.preHandler.slice(),t.onSend=e.onSend.slice(),t.onResponse=e.onResponse.slice(),t.onError=e.onError.slice(),t.onRoute=e.onRoute.slice(),t.onRegister=e.onRegister.slice(),t.onTimeout=e.onTimeout.slice(),t.onRequestAbort=e.onRequestAbort.slice(),t.onReady=[],t.preClose=[],t}function gy(e,t,r,n){let s=r[g1][e],i=0,o=0;l();function a(c){if(c){c.code==="AVV_ERR_READY_TIMEOUT"?c=py(c,new m1(e)):c=hy[c.code]!=null?py(c,new hy[c.code](c.message)):c,n(c);return}n()}function l(c){if(c){a(c);return}if(i===s.length&&o===r[Jl].length){i===0&&o===0?a():t(function(h,d){a(h),d(h)});return}if(i===s.length&&o<r[Jl].length){let f=r[Jl][o++];gy(e,t,f,l);return}t(u(s[i++],r)),l()}function u(c,f){return function(h,d){if(h){d(h);return}if(c.length===1){try{c.call(f,d)}catch(m){d(m)}return}try{let m=c.call(f);if(m&&typeof m.then=="function"){m.then(d,d);return}}catch(m){h=m}d(h)}}}function v1(e,t,r,n,s){let i=0;function o(u){if(u||i===e.length){s(u,r,n);return}let c;try{c=t(e[i++],r,n,o)}catch(f){o(f);return}c&&typeof c.then=="function"&&c.then(a,l)}function a(){o()}function l(u){u||(u=new Yl),s(u,r,n)}o()}function E1(e,t,r,n,s){let i=0;function o(u,c){if(u){s(u,t,r,n);return}if(c!==void 0&&(n=c),i===e.length){s(null,t,r,n);return}let f;try{f=e[i++](t,r,n,o)}catch(h){o(h);return}f&&typeof f.then=="function"&&f.then(a,l)}function a(u){o(null,u)}function l(u){u||(u=new Yl),s(u,t,r,n)}o()}function S1(e,t,r,n){let s=0;function i(l){if(l||s===e.length){n(l,r);return}let u;try{u=t(e[s++],r,i)}catch(c){i(c);return}u&&typeof u.then=="function"&&u.then(o,a)}function o(){i()}function a(l){l||(l=new Yl),n(l,r)}i()}function b1(e,t,r,n){if(r.sent!==!0)return e(t,r,n)}_y.exports={Hooks:la,buildHooks:_1,hookRunner:v1,onSendHookRunner:E1,onRequestAbortHookRunner:S1,hookIterator:b1,hookRunnerApplication:gy,lifecycleHooks:my,supportedHooks:yy}});var Zl=v((T6,Ey)=>{"use strict";var{kSchemaHeaders:ha,kSchemaParams:Wl,kSchemaQuerystring:Xl,kSchemaBody:Ql,kSchemaResponse:vy}=at(),w1=/^[1-5]{1}[0-9]{2}$|^[1-5]xx$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:R1}=gt(),ca=en();function T1(e,t){if(!e.schema||!e.schema.response)return;let{method:r,url:n}=e.config||{};e[vy]=Object.keys(e.schema.response).reduce(function(s,i){let o=e.schema.response[i];if(i=i.toLowerCase(),!w1.exec(i))throw new R1;if(o.content){let a={};for(let l of Object.keys(o.content)){let u=o.content[l].schema;a[l]=t({schema:u,url:n,method:r,httpStatus:i,contentType:l})}s[i]=a}else s[i]=t({schema:o,url:n,method:r,httpStatus:i});return s},{})}function $1(e,t,r){let{schema:n}=e;if(!n)return;let{method:s,url:i}=e.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))e[ha]=t({schema:o,method:s,url:i,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(l=>{a[l]=o[l]}),a.required instanceof Array&&(a.required=a.required.map(l=>l.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(l=>{a.properties[l.toLowerCase()]=o.properties[l]})),e[ha]=t({schema:a,method:s,url:i,httpPart:"headers"})}else Object.prototype.hasOwnProperty.call(n,"headers")&&ca.emit("FSTWRN001","headers",s,i);n.body?e[Ql]=t({schema:n.body,method:s,url:i,httpPart:"body"}):Object.prototype.hasOwnProperty.call(n,"body")&&ca.emit("FSTWRN001","body",s,i),n.querystring?e[Xl]=t({schema:n.querystring,method:s,url:i,httpPart:"querystring"}):Object.prototype.hasOwnProperty.call(n,"querystring")&&ca.emit("FSTWRN001","querystring",s,i),n.params?e[Wl]=t({schema:n.params,method:s,url:i,httpPart:"params"}):Object.prototype.hasOwnProperty.call(n,"params")&&ca.emit("FSTWRN001","params",s,i)}function fa(e,t,r){let n=t[r]===void 0,s=e&&e(n?null:t[r]);return s===!1?e.errors:s&&s.error?s.error:(s&&s.value&&(t[r]=s.value),!1)}function P1(e,t){let r=fa(e[Wl],t,"params");if(r)return da(r,"params",e.schemaErrorFormatter);let n=fa(e[Ql],t,"body");if(n)return da(n,"body",e.schemaErrorFormatter);let s=fa(e[Xl],t,"query");if(s)return da(s,"querystring",e.schemaErrorFormatter);let i=fa(e[ha],t,"headers");return i?da(i,"headers",e.schemaErrorFormatter):null}function da(e,t,r){if(e instanceof Error)return e.statusCode=e.statusCode||400,e.code=e.code||"FST_ERR_VALIDATION",e.validationContext=e.validationContext||t,e;let n=r(e,t);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=e,n.validationContext=t,n}Ey.exports={symbols:{bodySchema:Ql,querystringSchema:Xl,responseSchema:vy,paramsSchema:Wl,headersSchema:ha},compileSchemasForValidation:$1,compileSchemasForSerialization:T1,validate:P1}});var ec=v(($6,by)=>{"use strict";var{kReplyIsError:Sy,kReplyHijacked:O1}=at();function I1(e,t){e.then(function(r){if(t[O1]!==!0&&(r!==void 0||t.sent===!1&&t.raw.headersSent===!1&&t.request.raw.aborted===!1))try{t.send(r)}catch(n){t[Sy]=!0,t.send(n)}},function(r){if(t.sent===!0){t.log.error({err:r},"Promise errored, but reply.sent = true was set");return}t[Sy]=!0;try{t.send(r)}catch(n){t.send(n)}})}by.exports=I1});var sc=v((P6,nc)=>{"use strict";var{validate:A1}=Zl(),{hookRunner:wy,hookIterator:Ry}=kn(),C1=ec(),{kReplyIsError:pa,kRouteContext:rn}=at();function N1(e,t,r){if(r.sent===!0)return;if(e!=null){r[pa]=!0,r.send(e);return}let n=t.raw.method,s=t.headers,i=t[rn];if(n==="GET"||n==="HEAD"){tn(t,r);return}let o=s["content-type"];if(n==="POST"||n==="PUT"||n==="PATCH"||n==="TRACE"||n==="SEARCH"){o===void 0?s["transfer-encoding"]===void 0&&(s["content-length"]==="0"||s["content-length"]===void 0)?tn(t,r):i.contentTypeParser.run("",tn,t,r):i.contentTypeParser.run(o,tn,t,r);return}if(n==="OPTIONS"||n==="DELETE"){o!==void 0&&(s["transfer-encoding"]!==void 0||s["content-length"]!==void 0)?i.contentTypeParser.run(o,tn,t,r):tn(t,r);return}tn(t,r)}function tn(e,t){try{e[rn].preValidation!==null?wy(e[rn].preValidation,Ry,e,t,tc):tc(null,e,t)}catch(r){tc(r,e,t)}}function tc(e,t,r){if(r.sent===!0)return;if(e!=null){r[pa]=!0,r.send(e);return}let n=A1(r[rn],t);if(n){if(r[rn].attachValidation===!1){r.send(n);return}r.request.validationError=n}t[rn].preHandler!==null?wy(t[rn].preHandler,Ry,t,r,rc):rc(null,t,r)}function rc(e,t,r){if(r.sent)return;if(e!=null){r[pa]=!0,r.send(e);return}let n;try{n=t[rn].handler(t,r)}catch(s){r[pa]=!0,r.send(s);return}n!==void 0&&(n!==null&&typeof n.then=="function"?C1(n,r):r.send(n))}nc.exports=N1;nc.exports[Symbol.for("internals")]={handler:tn,preHandlerCallback:rc}});var $y=v((O6,Ty)=>{"use strict";function vs(){}var k1={fatal:vs,error:vs,warn:vs,info:vs,debug:vs,trace:vs};Object.defineProperty(Ty,"exports",{get(){return Object.create(k1)}})});var oc=v((I6,Iy)=>{"use strict";var Ri=e=>e&&typeof e.message=="string",ic=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return Ri(r)?r:void 0}else return Ri(t)?t:void 0},Py=(e,t)=>{if(!Ri(e))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=ic(e);return n?(t.add(e),r+`
caused by: `+Py(n,t)):r},q1=e=>Py(e,new Set),Oy=(e,t,r)=>{if(!Ri(e))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let s=ic(e);if(s){t.add(e);let i=typeof e.cause=="function";return n+(i?"":": ")+Oy(s,t,i)}else return n},j1=e=>Oy(e,new Set);Iy.exports={isErrorLike:Ri,getErrorCause:ic,stackWithCauses:q1,messageWithCauses:j1}});var ac=v((A6,Cy)=>{"use strict";var D1=Symbol("circular-ref-tag"),ma=Symbol("pino-raw-err-ref"),Ay=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[ma]},set:function(e){this[ma]=e}}});Object.defineProperty(Ay,ma,{writable:!0,value:{}});Cy.exports={pinoErrProto:Ay,pinoErrorSymbols:{seen:D1,rawSymbol:ma}}});var qy=v((C6,ky)=>{"use strict";ky.exports=lc;var{messageWithCauses:L1,stackWithCauses:x1,isErrorLike:Ny}=oc(),{pinoErrProto:F1,pinoErrorSymbols:M1}=ac(),{seen:uc}=M1,{toString:V1}=Object.prototype;function lc(e){if(!Ny(e))return e;e[uc]=void 0;let t=Object.create(F1);t.type=V1.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=L1(e),t.stack=x1(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>lc(r)));for(let r in e)if(t[r]===void 0){let n=e[r];Ny(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,uc)&&(t[r]=lc(n)):t[r]=n}return delete e[uc],t.raw=e,t}});var Dy=v((N6,jy)=>{"use strict";jy.exports=ga;var{isErrorLike:cc}=oc(),{pinoErrProto:z1,pinoErrorSymbols:H1}=ac(),{seen:ya}=H1,{toString:U1}=Object.prototype;function ga(e){if(!cc(e))return e;e[ya]=void 0;let t=Object.create(z1);t.type=U1.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>ga(r))),cc(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,ya)&&(t.cause=ga(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];cc(n)?Object.prototype.hasOwnProperty.call(n,ya)||(t[r]=ga(n)):t[r]=n}return delete e[ya],t.raw=e,t}});var My=v((k6,Fy)=>{"use strict";Fy.exports={mapHttpRequest:B1,reqSerializer:xy};var fc=Symbol("pino-raw-req-ref"),Ly=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[fc]},set:function(e){this[fc]=e}}});Object.defineProperty(Ly,fc,{writable:!0,value:{}});function xy(e){let t=e.info||e.socket,r=Object.create(Ly);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function B1(e){return{req:xy(e)}}});var Uy=v((q6,Hy)=>{"use strict";Hy.exports={mapHttpResponse:G1,resSerializer:zy};var dc=Symbol("pino-raw-res-ref"),Vy=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[dc]},set:function(e){this[dc]=e}}});Object.defineProperty(Vy,dc,{writable:!0,value:{}});function zy(e){let t=Object.create(Vy);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function G1(e){return{res:zy(e)}}});var pc=v((j6,By)=>{"use strict";var hc=qy(),K1=Dy(),_a=My(),va=Uy();By.exports={err:hc,errWithCause:K1,mapHttpRequest:_a.mapHttpRequest,mapHttpResponse:va.mapHttpResponse,req:_a.reqSerializer,res:va.resSerializer,wrapErrorSerializer:function(t){return t===hc?t:function(n){return t(hc(n))}},wrapRequestSerializer:function(t){return t===_a.reqSerializer?t:function(n){return t(_a.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===va.resSerializer?t:function(n){return t(va.resSerializer(n))}}}});var mc=v((D6,Gy)=>{"use strict";function J1(e,t){return t}Gy.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=J1;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),s=[];for(let i of n)i&&s.push(i.getFileName());return s}});var Jy=v((L6,Ky)=>{"use strict";Ky.exports=Y1;function Y1(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:s}){s.forEach(i=>{if(typeof i!="string")throw Error(t());try{if(//.test(i))throw Error();let o=(i[0]==="["?"":".")+i.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(o)||/\/\*/.test(o))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${o}
            if ([o${o}].length !== 1) throw Error()`)()}catch{throw Error(r(i))}})}}});var Ea=v((x6,Yy)=>{"use strict";Yy.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var Xy=v((F6,Wy)=>{"use strict";var W1=Ea();Wy.exports=X1;function X1({paths:e}){let t=[];var r=0;let n=e.reduce(function(s,i,o){var a=i.match(W1).map(c=>c.replace(/'|"|`/g,""));let l=i[0]==="[";a=a.map(c=>c[0]==="["?c.substr(1,c.length-2):c);let u=a.indexOf("*");if(u>-1){let c=a.slice(0,u),f=c.join("."),h=a.slice(u+1,a.length),d=h.length>0;r++,t.push({before:c,beforeStr:f,after:h,nested:d})}else s[i]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(i),leadingBracket:l};return s},{});return{wildcards:t,wcLen:r,secret:n}}});var Zy=v((M6,Qy)=>{"use strict";var Q1=Ea();Qy.exports=Z1;function Z1({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:s,censorFctTakesPath:i},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${nI(n,t)}
    }
    const { censor, secret } = this
    ${eI(e,s,i)}
    this.compileRestore()
    ${tI(r>0,s,i)}
    ${rI(t)}
  `).bind(o);return t===!1&&(a.restore=l=>o.restore(l)),a}function eI(e,t,r){return Object.keys(e).map(n=>{let{escPath:s,leadingBracket:i,path:o}=e[n],a=i?1:0,l=i?"":".",u=[];for(var c;(c=Q1.exec(n))!==null;){let[,m]=c,{index:y,input:S}=c;y>a&&u.push(S.substring(0,y-(m?0:1)))}var f=u.map(m=>`o${l}${m}`).join(" && ");f.length===0?f+=`o${l}${n} != null`:f+=` && o${l}${n} != null`;let h=`
      switch (true) {
        ${u.reverse().map(m=>`
          case o${l}${m} === censor:
            secret[${s}].circle = ${JSON.stringify(m)}
            break
        `).join(`
`)}
      }
    `,d=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${f}) {
        const val = o${l}${n}
        if (val === censor) {
          secret[${s}].precensored = true
        } else {
          secret[${s}].val = val
          o${l}${n} = ${t?`censor(${d})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function tI(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function rI(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function nI(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var yc=v((V6,ng)=>{"use strict";ng.exports={groupRedact:iI,groupRestore:sI,nestedRedact:aI,nestedRestore:oI};function sI({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var s=0;s<n;s++){let i=e[s];r[i]=t[s]}}function iI(e,t,r,n,s){let i=eg(e,t);if(i==null)return{keys:null,values:null,target:null,flat:!0};let o=Object.keys(i),a=o.length,l=t.length,u=s?[...t]:void 0,c=new Array(a);for(var f=0;f<a;f++){let h=o[f];c[f]=i[h],s?(u[l]=h,i[h]=r(i[h],u)):n?i[h]=r(i[h]):i[h]=r}return{keys:o,values:c,target:i,flat:!0}}function oI(e){let t=e.length;for(var r=0;r<t;r++){let{key:s,target:i,value:o,level:a}=e[r];if(a===0||a===1){if(Es(i,s)&&(i[s]=o),typeof i=="object"){let l=Object.keys(i);for(var n=0;n<l.length;n++){let u=l[n],c=i[u];Es(c,s)&&(c[s]=o)}}}else rg(s,i,o,a)}}function aI(e,t,r,n,s,i,o){let a=eg(t,r);if(a==null)return;let l=Object.keys(a),u=l.length;for(var c=0;c<u;c++){let f=l[c],{value:h,parent:d,exists:m,level:y}=uI(a,f,r,n,s,i,o);m===!0&&d!==null&&e.push({key:n[n.length-1],target:d,value:h,level:y})}return e}function Es(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function uI(e,t,r,n,s,i,o){let a=n.length,l=a-1,u=t;var c=-1,f,h,d,m=null,y=!0,S=null,_,b,g=!1,p=0;if(d=f=e[t],typeof f!="object")return{value:null,parent:null,exists:y};for(;f!=null&&++c<a;){if(t=n[c],m=d,t!=="*"&&!S&&!(typeof f=="object"&&t in f)){y=!1;break}if(!(t==="*"&&(S==="*"&&(g=!0),S=t,c!==l))){if(S){let O=Object.keys(f);for(var T=0;T<O.length;T++){let w=O[T];b=f[w],_=t==="*",g?(p=c,d=tg(b,p-1,t,r,n,s,i,o,u,f,h,d,_,w,c,l,y)):(_||typeof b=="object"&&b!==null&&t in b)&&(_?d=b:d=b[t],h=c!==l?d:i?o?s(d,[...r,u,...n]):s(d):s,_?f[w]=h:b[t]===h?y=!1:b[t]=h===void 0&&s!==void 0||Es(b,t)&&h===d?b[t]:h)}S=null}else d=f[t],h=c!==l?d:i?o?s(d,[...r,u,...n]):s(d):s,f[t]=Es(f,t)&&h===d||h===void 0&&s!==void 0?f[t]:h,f=f[t];if(typeof f!="object")break;(d===m||typeof d>"u")&&(y=!1)}}return{value:d,parent:m,exists:y,level:p}}function eg(e,t){for(var r=-1,n=t.length,s=e;s!=null&&++r<n;)s=s[t[r]];return s}function tg(e,t,r,n,s,i,o,a,l,u,c,f,h,d,m,y,S){if(t===0)return(h||typeof e=="object"&&e!==null&&r in e)&&(h?f=e:f=e[r],c=m!==y?f:o?a?i(f,[...n,l,...s]):i(f):i,h?u[d]=c:e[r]===c?S=!1:e[r]=c===void 0&&i!==void 0||Es(e,r)&&c===f?e[r]:c),f;for(let b in e)if(typeof e[b]=="object"){var _=tg(e[b],t-1,r,n,s,i,o,a,l,u,c,f,h,d,m,y,S);return _}}function rg(e,t,r,n){if(n===0){Es(t,e)&&(t[e]=r);return}for(let s in t)typeof t[s]=="object"&&rg(e,t[s],r,n-1)}});var ig=v((z6,sg)=>{"use strict";var{groupRestore:lI,nestedRestore:cI}=yc();sg.exports=fI;function fI({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e),s=dI(e,n),i=t>0,o=i?{secret:e,groupRestore:lI,nestedRestore:cI}:{secret:e};this.restore=Function("o",hI(s,n,i)).bind(o)}}function dI(e,t){return t.map(r=>{let{circle:n,escPath:s,leadingBracket:i}=e[r],a=n?`o.${n} = secret[${s}].val`:`o${i?"":"."}${r} = secret[${s}].val`,l=`secret[${s}].val = undefined`;return`
      if (secret[${s}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${l}
      }
    `}).join("")}function hI(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var ag=v((H6,og)=>{"use strict";og.exports=pI;function pI(e){let{secret:t,censor:r,compileRestore:n,serialize:s,groupRedact:i,nestedRedact:o,wildcards:a,wcLen:l}=e,u=[{secret:t,censor:r,compileRestore:n}];return s!==!1&&u.push({serialize:s}),l>0&&u.push({groupRedact:i,nestedRedact:o,wildcards:a,wcLen:l}),Object.assign(...u)}});var cg=v((U6,lg)=>{"use strict";var ug=Jy(),mI=Xy(),yI=Zy(),gI=ig(),{groupRedact:_I,nestedRedact:vI}=yc(),EI=ag(),SI=Ea(),bI=ug(),gc=e=>e;gc.restore=gc;var wI="[REDACTED]";_c.rx=SI;_c.validator=ug;lg.exports=_c;function _c(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let s=n===!0?void 0:"censor"in e?e.censor:wI,i=typeof s=="function",o=i&&s.length>1;if(t.length===0)return r||gc;bI({paths:t,serialize:r,censor:s});let{wildcards:a,wcLen:l,secret:u}=mI({paths:t,censor:s}),c=gI({secret:u,wcLen:l}),f="strict"in e?e.strict:!0;return yI({secret:u,wcLen:l,serialize:r,strict:f,isCensorFct:i,censorFctTakesPath:o},EI({secret:u,censor:s,compileRestore:c,serialize:r,groupRedact:_I,nestedRedact:vI,wildcards:a,wcLen:l}))}});var Ss=v((B6,fg)=>{"use strict";var RI=Symbol("pino.setLevel"),TI=Symbol("pino.getLevel"),$I=Symbol("pino.levelVal"),PI=Symbol("pino.useLevelLabels"),OI=Symbol("pino.useOnlyCustomLevels"),II=Symbol("pino.mixin"),AI=Symbol("pino.lsCache"),CI=Symbol("pino.chindings"),NI=Symbol("pino.asJson"),kI=Symbol("pino.write"),qI=Symbol("pino.redactFmt"),jI=Symbol("pino.time"),DI=Symbol("pino.timeSliceIndex"),LI=Symbol("pino.stream"),xI=Symbol("pino.stringify"),FI=Symbol("pino.stringifySafe"),MI=Symbol("pino.stringifiers"),VI=Symbol("pino.end"),zI=Symbol("pino.formatOpts"),HI=Symbol("pino.messageKey"),UI=Symbol("pino.errorKey"),BI=Symbol("pino.nestedKey"),GI=Symbol("pino.nestedKeyStr"),KI=Symbol("pino.mixinMergeStrategy"),JI=Symbol("pino.msgPrefix"),YI=Symbol("pino.wildcardFirst"),WI=Symbol.for("pino.serializers"),XI=Symbol.for("pino.formatters"),QI=Symbol.for("pino.hooks"),ZI=Symbol.for("pino.metadata");fg.exports={setLevelSym:RI,getLevelSym:TI,levelValSym:$I,useLevelLabelsSym:PI,mixinSym:II,lsCacheSym:AI,chindingsSym:CI,asJsonSym:NI,writeSym:kI,serializersSym:WI,redactFmtSym:qI,timeSym:jI,timeSliceIndexSym:DI,streamSym:LI,stringifySym:xI,stringifySafeSym:FI,stringifiersSym:MI,endSym:VI,formatOptsSym:zI,messageKeySym:HI,errorKeySym:UI,nestedKeySym:BI,wildcardFirstSym:YI,needsMetadataGsym:ZI,useOnlyCustomLevelsSym:OI,formattersSym:XI,hooksSym:QI,nestedKeyStrSym:GI,mixinMergeStrategySym:KI,msgPrefixSym:JI}});var Sc=v((G6,mg)=>{"use strict";var Ec=cg(),{redactFmtSym:eA,wildcardFirstSym:Sa}=Ss(),{rx:vc,validator:tA}=Ec,dg=tA({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),hg="[Redacted]",pg=!1;function rA(e,t){let{paths:r,censor:n}=nA(e),s=r.reduce((a,l)=>{vc.lastIndex=0;let u=vc.exec(l),c=vc.exec(l),f=u[1]!==void 0?u[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):u[0];if(f==="*"&&(f=Sa),c===null)return a[f]=null,a;if(a[f]===null)return a;let{index:h}=c,d=`${l.substr(h,l.length-1)}`;return a[f]=a[f]||[],f!==Sa&&a[f].length===0&&a[f].push(...a[Sa]||[]),f===Sa&&Object.keys(a).forEach(function(m){a[m]&&a[m].push(d)}),a[f].push(d),a},{}),i={[eA]:Ec({paths:r,censor:n,serialize:t,strict:pg})},o=(...a)=>t(typeof n=="function"?n(...a):n);return[...Object.keys(s),...Object.getOwnPropertySymbols(s)].reduce((a,l)=>{if(s[l]===null)a[l]=u=>o(u,[l]);else{let u=typeof n=="function"?(c,f)=>n(c,[l,...f]):n;a[l]=Ec({paths:s[l],censor:u,serialize:t,strict:pg})}return a},i)}function nA(e){if(Array.isArray(e))return e={paths:e,censor:hg},dg(e),e;let{paths:t,censor:r=hg,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),dg({paths:t,censor:r}),{paths:t,censor:r}}mg.exports=rA});var gg=v((K6,yg)=>{"use strict";var sA=()=>"",iA=()=>`,"time":${Date.now()}`,oA=()=>`,"time":${Math.round(Date.now()/1e3)}`,aA=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;yg.exports={nullTime:sA,epochTime:iA,unixTime:oA,isoTime:aA}});var vg=v((J6,_g)=>{"use strict";function uA(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}_g.exports=lA;function lA(e,t,r){var n=r&&r.stringify||uA,s=1;if(typeof e=="object"&&e!==null){var i=t.length+s;if(i===1)return e;var o=new Array(i);o[0]=n(e);for(var a=1;a<i;a++)o[a]=n(t[a]);return o.join(" ")}if(typeof e!="string")return e;var l=t.length;if(l===0)return e;for(var u="",c=1-s,f=-1,h=e&&e.length||0,d=0;d<h;){if(e.charCodeAt(d)===37&&d+1<h){switch(f=f>-1?f:0,e.charCodeAt(d+1)){case 100:case 102:if(c>=l||t[c]==null)break;f<d&&(u+=e.slice(f,d)),u+=Number(t[c]),f=d+2,d++;break;case 105:if(c>=l||t[c]==null)break;f<d&&(u+=e.slice(f,d)),u+=Math.floor(Number(t[c])),f=d+2,d++;break;case 79:case 111:case 106:if(c>=l||t[c]===void 0)break;f<d&&(u+=e.slice(f,d));var m=typeof t[c];if(m==="string"){u+="'"+t[c]+"'",f=d+2,d++;break}if(m==="function"){u+=t[c].name||"<anonymous>",f=d+2,d++;break}u+=n(t[c]),f=d+2,d++;break;case 115:if(c>=l)break;f<d&&(u+=e.slice(f,d)),u+=String(t[c]),f=d+2,d++;break;case 37:f<d&&(u+=e.slice(f,d)),u+="%",f=d+2,d++,c--;break}++c}++d}return f===-1?e:(f<h&&(u+=e.slice(f)),u)}});var wc=v((Y6,bc)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));bc.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};bc.exports=e}});var Rg=v((W6,wg)=>{"use strict";var Ot=require("fs"),cA=require("events"),fA=require("util").inherits,Eg=require("path"),Sg=wc(),Rc=100,dA=16*1024;function bg(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(i,o){if(i){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",i)}):t.emit("error",i);return}t.fd=o,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t._reopening&&!t._writing&&t._len>t.minLength&&!t.destroyed&&bs(t)}let n=t.append?"a":"w",s=t.mode;if(t.sync)try{t.mkdir&&Ot.mkdirSync(Eg.dirname(e),{recursive:!0});let i=Ot.openSync(e,n,s);r(null,i)}catch(i){throw r(i),i}else t.mkdir?Ot.mkdir(Eg.dirname(e),{recursive:!0},i=>{if(i)return r(i);Ot.open(e,n,s,r)}):Ot.open(e,n,s,r)}function It(e){if(!(this instanceof It))return new It(e);let{fd:t,dest:r,minLength:n,maxLength:s,maxWrite:i,sync:o,append:a=!0,mode:l,mkdir:u,retryEAGAIN:c,fsync:f}=e||{};if(t=t||r,this._bufs=[],this._len=0,this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=s||0,this.maxWrite=i||dA,this.sync=o||!1,this._fsync=f||!1,this.append=a||!1,this.mode=l,this.retryEAGAIN=c||(()=>!0),this.mkdir=u||!1,typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")bg(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(h,d)=>{if(h){if((h.code==="EAGAIN"||h.code==="EBUSY")&&this.retryEAGAIN(h,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{Sg(Rc),this.release(void 0,0)}catch(y){this.release(y)}else setTimeout(()=>{Ot.write(this.fd,this._writingBuf,"utf8",this.release)},Rc);else this._writing=!1,this.emit("error",h);return}if(this.emit("write",d),this._len-=d,this._len<0&&(this._len=0),this._writingBuf=this._writingBuf.slice(d),this._writingBuf.length){if(!this.sync){Ot.write(this.fd,this._writingBuf,"utf8",this.release);return}try{do{let y=Ot.writeSync(this.fd,this._writingBuf,"utf8");this._len-=y,this._writingBuf=this._writingBuf.slice(y)}while(this._writingBuf)}catch(y){this.release(y);return}}this._fsync&&Ot.fsyncSync(this.fd);let m=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):m>this.minLength?bs(this):this._ending?m>0?bs(this):(this._writing=!1,ba(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(hA,this)):this.emit("drain"))},this.on("newListener",function(h){h==="drain"&&(this._asyncDrainScheduled=!1)})}function hA(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}fA(It,cA);It.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&bs(this),this._len<this._hwm)};It.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||(this._bufs.length===0&&this._bufs.push(""),bs(this))};It.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&Ot.close(t,r=>{if(r)return this.emit("error",r)})}),bg(e||this.file,this)};It.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?bs(this):ba(this)))};It.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e.length;){e.length<=0&&(e=this._bufs[0]);try{let t=Ot.writeSync(this.fd,e,"utf8");e=e.slice(t),this._len=Math.max(this._len-t,0),e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Sg(Rc)}}};It.prototype.destroy=function(){this.destroyed||ba(this)};function bs(e){let t=e.release;if(e._writing=!0,e._writingBuf=e._writingBuf||e._bufs.shift()||"",e.sync)try{let r=Ot.writeSync(e.fd,e._writingBuf,"utf8");t(null,r)}catch(r){t(r)}else Ot.write(e.fd,e._writingBuf,"utf8",t)}function ba(e){if(e.fd===-1){e.once("ready",ba.bind(null,e));return}e.destroyed=!0,e._bufs=[],e.fd!==1&&e.fd!==2?Ot.close(e.fd,t):setImmediate(t);function t(r){if(r){e.emit("error",r);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}It.SonicBoom=It;It.default=It;wg.exports=It});var Tc=v((X6,Ag)=>{"use strict";var nn={exit:[],beforeExit:[]},Tg={exit:mA,beforeExit:yA},$g=new FinalizationRegistry(gA);function pA(e){nn[e].length>0||process.on(e,Tg[e])}function Pg(e){nn[e].length>0||process.removeListener(e,Tg[e])}function mA(){Og("exit")}function yA(){Og("beforeExit")}function Og(e){for(let t of nn[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}}function gA(e){for(let t of["exit","beforeExit"]){let r=nn[t].indexOf(e);nn[t].splice(r,r+1),Pg(t)}}function Ig(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");pA(e);let n=new WeakRef(t);n.fn=r,$g.register(t,n),nn[e].push(n)}function _A(e,t){Ig("exit",e,t)}function vA(e,t){Ig("beforeExit",e,t)}function EA(e){$g.unregister(e);for(let t of["exit","beforeExit"])nn[t]=nn[t].filter(r=>{let n=r.deref();return n&&n!==e}),Pg(t)}Ag.exports={register:_A,registerBeforeExit:vA,unregister:EA}});var Cg=v((Q6,SA)=>{SA.exports={name:"thread-stream",version:"2.3.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^18.0.0","@types/tap":"^15.0.0",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^8.0.1","sonic-boom":"^3.0.0",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^4.7.2","why-is-node-running":"^2.2.2"},scripts:{test:"standard && npm run transpile && tap test/*.test.*js && tap --ts test/*.test.*ts","test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var kg=v((Z6,Ng)=>{"use strict";function bA(e,t,r,n,s){let i=Date.now()+n,o=Atomics.load(e,t);if(o===r){s(null,"ok");return}let a=o,l=u=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(e,t),o===a?l(u>=1e3?1e3:u*2):o===r?s(null,"ok"):s(null,"not-equal")},u)};l(1)}function wA(e,t,r,n,s){let i=Date.now()+n,o=Atomics.load(e,t);if(o!==r){s(null,"ok");return}let a=l=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(e,t),o!==r?s(null,"ok"):a(l>=1e3?1e3:l*2)},l)};a(1)}Ng.exports={wait:bA,waitDiff:wA}});var jg=v((eB,qg)=>{"use strict";qg.exports={WRITE_INDEX:4,READ_INDEX:8}});var Mg=v((rB,Fg)=>{"use strict";var{version:RA}=Cg(),{EventEmitter:TA}=require("events"),{Worker:$A}=require("worker_threads"),{join:PA}=require("path"),{pathToFileURL:OA}=require("url"),{wait:IA}=kg(),{WRITE_INDEX:At,READ_INDEX:vr}=jg(),AA=require("buffer"),CA=require("assert"),D=Symbol("kImpl"),NA=AA.constants.MAX_STRING_LENGTH,Ra=class{constructor(t){this._value=t}deref(){return this._value}},kA=global.FinalizationRegistry||class{register(){}unregister(){}},qA=global.WeakRef||Ra,Dg=new kA(e=>{e.exited||e.terminate()});function jA(e,t){let{filename:r,workerData:n}=t,i=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||PA(__dirname,"lib","worker.js"),o=new $A(i,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:OA(r).href,dataBuf:e[D].dataBuf,stateBuf:e[D].stateBuf,workerData:{$context:{threadStreamVersion:RA},...n}}});return o.stream=new Ra(e),o.on("message",DA),o.on("exit",xg),Dg.register(e,o),o}function Lg(e){CA(!e[D].sync),e[D].needDrain&&(e[D].needDrain=!1,e.emit("drain"))}function wa(e){let t=Atomics.load(e[D].state,At),r=e[D].data.length-t;if(r>0){if(e[D].buf.length===0){e[D].flushing=!1,e[D].ending?Ac(e):e[D].needDrain&&process.nextTick(Lg,e);return}let n=e[D].buf.slice(0,r),s=Buffer.byteLength(n);s<=r?(e[D].buf=e[D].buf.slice(r),Ta(e,n,wa.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[D].state,vr,0),Atomics.store(e[D].state,At,0);s>e[D].data.length;)r=r/2,n=e[D].buf.slice(0,r),s=Buffer.byteLength(n);e[D].buf=e[D].buf.slice(r),Ta(e,n,wa.bind(null,e))}})}else if(r===0){if(t===0&&e[D].buf.length===0)return;e.flush(()=>{Atomics.store(e[D].state,vr,0),Atomics.store(e[D].state,At,0),wa(e)})}else Er(e,new Error("overwritten"))}function DA(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new qA(t),t.flush(()=>{t[D].ready=!0,t.emit("ready")});break;case"ERROR":Er(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;default:Er(t,new Error("this should not happen: "+e.code))}}function xg(e){let t=this.stream.deref();t!==void 0&&(Dg.unregister(t),t.worker.exited=!0,t.worker.off("exit",xg),Er(t,e!==0?new Error("the worker thread exited"):null))}var Pc=class extends TA{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[D]={},this[D].stateBuf=new SharedArrayBuffer(128),this[D].state=new Int32Array(this[D].stateBuf),this[D].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[D].data=Buffer.from(this[D].dataBuf),this[D].sync=t.sync||!1,this[D].ending=!1,this[D].ended=!1,this[D].needDrain=!1,this[D].destroyed=!1,this[D].flushing=!1,this[D].ready=!1,this[D].finished=!1,this[D].errored=null,this[D].closed=!1,this[D].buf="",this.worker=jA(this,t)}write(t){if(this[D].destroyed)return Oc(this,new Error("the worker has exited")),!1;if(this[D].ending)return Oc(this,new Error("the worker is ending")),!1;if(this[D].flushing&&this[D].buf.length+t.length>=NA)try{$c(this),this[D].flushing=!0}catch(r){return Er(this,r),!1}if(this[D].buf+=t,this[D].sync)try{return $c(this),!0}catch(r){return Er(this,r),!1}return this[D].flushing||(this[D].flushing=!0,setImmediate(wa,this)),this[D].needDrain=this[D].data.length-this[D].buf.length-Atomics.load(this[D].state,At)<=0,!this[D].needDrain}end(){this[D].destroyed||(this[D].ending=!0,Ac(this))}flush(t){if(this[D].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[D].state,At);IA(this[D].state,vr,r,1/0,(n,s)=>{if(n){Er(this,n),process.nextTick(t,n);return}if(s==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[D].destroyed||($c(this),Ic(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[D].ready}get destroyed(){return this[D].destroyed}get closed(){return this[D].closed}get writable(){return!this[D].destroyed&&!this[D].ending}get writableEnded(){return this[D].ending}get writableFinished(){return this[D].finished}get writableNeedDrain(){return this[D].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[D].errored}};function Oc(e,t){setImmediate(()=>{e.emit("error",t)})}function Er(e,t){e[D].destroyed||(e[D].destroyed=!0,t&&(e[D].errored=t,Oc(e,t)),e.worker.exited?setImmediate(()=>{e[D].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[D].closed=!0,e.emit("close")}))}function Ta(e,t,r){let n=Atomics.load(e[D].state,At),s=Buffer.byteLength(t);return e[D].data.write(t,n),Atomics.store(e[D].state,At,n+s),Atomics.notify(e[D].state,At),r(),!0}function Ac(e){if(!(e[D].ended||!e[D].ending||e[D].flushing)){e[D].ended=!0;try{e.flushSync();let t=Atomics.load(e[D].state,vr);Atomics.store(e[D].state,At,-1),Atomics.notify(e[D].state,At);let r=0;for(;t!==-1;){if(Atomics.wait(e[D].state,vr,t,1e3),t=Atomics.load(e[D].state,vr),t===-2){Er(e,new Error("end() failed"));return}if(++r===10){Er(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[D].finished=!0,e.emit("finish")})}catch(t){Er(e,t)}}}function $c(e){let t=()=>{e[D].ending?Ac(e):e[D].needDrain&&process.nextTick(Lg,e)};for(e[D].flushing=!1;e[D].buf.length!==0;){let r=Atomics.load(e[D].state,At),n=e[D].data.length-r;if(n===0){Ic(e),Atomics.store(e[D].state,vr,0),Atomics.store(e[D].state,At,0);continue}else if(n<0)throw new Error("overwritten");let s=e[D].buf.slice(0,n),i=Buffer.byteLength(s);if(i<=n)e[D].buf=e[D].buf.slice(n),Ta(e,s,t);else{for(Ic(e),Atomics.store(e[D].state,vr,0),Atomics.store(e[D].state,At,0);i>e[D].buf.length;)n=n/2,s=e[D].buf.slice(0,n),i=Buffer.byteLength(s);e[D].buf=e[D].buf.slice(n),Ta(e,s,t)}}}function Ic(e){if(e[D].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[D].state,At),r=0;for(;;){let n=Atomics.load(e[D].state,vr);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[D].state,vr,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}Fg.exports=Pc});var kc=v((nB,Vg)=>{"use strict";var{createRequire:LA}=require("module"),xA=mc(),{join:Cc,isAbsolute:FA}=require("path"),MA=wc(),Nc=Tc(),VA=Mg();function zA(e){Nc.register(e,UA),Nc.registerBeforeExit(e,BA),e.on("close",function(){Nc.unregister(e)})}function HA(e,t,r){let n=new VA({filename:e,workerData:t,workerOpts:r});n.on("ready",s),n.on("close",function(){process.removeListener("exit",i)}),process.on("exit",i);function s(){process.removeListener("exit",i),n.unref(),r.autoEnd!==!1&&zA(n)}function i(){n.closed||(n.flushSync(),MA(100),n.end())}return n}function UA(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function BA(e){e.flushSync()}function GA(e){let{pipeline:t,targets:r,levels:n,dedupe:s,options:i={},worker:o={},caller:a=xA()}=e,l=typeof a=="string"?[a]:a,u="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},c=e.target;if(c&&r)throw new Error("only one of target or targets can be specified");return r?(c=u["pino-worker"]||Cc(__dirname,"worker.js"),i.targets=r.map(h=>({...h,target:f(h.target)}))):t&&(c=u["pino-pipeline-worker"]||Cc(__dirname,"worker-pipeline.js"),i.targets=t.map(h=>({...h,target:f(h.target)}))),n&&(i.levels=n),s&&(i.dedupe=s),HA(f(c),i,o);function f(h){if(h=u[h]||h,FA(h)||h.indexOf("file://")===0)return h;if(h==="pino/file")return Cc(__dirname,"..","file.js");let d;for(let m of l)try{d=LA(m).resolve(h);break}catch{continue}if(!d)throw new Error(`unable to determine transport target for "${h}"`);return d}}Vg.exports=GA});var Oa=v((sB,Zg)=>{"use strict";var zg=vg(),{mapHttpRequest:KA,mapHttpResponse:JA}=pc(),qc=Rg(),Hg=Tc(),{lsCacheSym:YA,chindingsSym:Kg,writeSym:Ug,serializersSym:Jg,formatOptsSym:Bg,endSym:WA,stringifiersSym:Yg,stringifySym:Wg,stringifySafeSym:jc,wildcardFirstSym:Xg,nestedKeySym:XA,formattersSym:Qg,messageKeySym:QA,errorKeySym:ZA,nestedKeyStrSym:eC,msgPrefixSym:$a}=Ss(),{isMainThread:tC}=require("worker_threads"),rC=kc();function ws(){}function nC(e,t){if(!t)return r;return function(...s){t.call(this,s,r,e)};function r(n,...s){if(typeof n=="object"){let i=n;n!==null&&(n.method&&n.headers&&n.socket?n=KA(n):typeof n.setHeader=="function"&&(n=JA(n)));let o;i===null&&s.length===0?o=[null]:(i=s.shift(),o=s),typeof this[$a]=="string"&&i!==void 0&&i!==null&&(i=this[$a]+i),this[Ug](n,zg(i,o,this[Bg]),e)}else{let i=n===void 0?s.shift():n;typeof this[$a]=="string"&&i!==void 0&&i!==null&&(i=this[$a]+i),this[Ug](null,zg(i,s,this[Bg]),e)}}}function Gg(e){let t="",r=0,n=!1,s=255,i=e.length;if(i>100)return JSON.stringify(e);for(var o=0;o<i&&s>=32;o++)s=e.charCodeAt(o),(s===34||s===92)&&(t+=e.slice(r,o)+"\\",r=o,n=!0);return n?t+=e.slice(r):t=e,s<32?JSON.stringify(e):'"'+t+'"'}function sC(e,t,r,n){let s=this[Wg],i=this[jc],o=this[Yg],a=this[WA],l=this[Kg],u=this[Jg],c=this[Qg],f=this[QA],h=this[ZA],d=this[YA][r]+n;d=d+l;let m;c.log&&(e=c.log(e));let y=o[Xg],S="";for(let b in e)if(m=e[b],Object.prototype.hasOwnProperty.call(e,b)&&m!==void 0){u[b]?m=u[b](m):b===h&&u.err&&(m=u.err(m));let g=o[b]||y;switch(typeof m){case"undefined":case"function":continue;case"number":Number.isFinite(m)===!1&&(m=null);case"boolean":g&&(m=g(m));break;case"string":m=(g||Gg)(m);break;default:m=(g||s)(m,i)}if(m===void 0)continue;S+=',"'+b+'":'+m}let _="";if(t!==void 0){m=u[f]?u[f](t):t;let b=o[f]||y;switch(typeof m){case"function":break;case"number":Number.isFinite(m)===!1&&(m=null);case"boolean":b&&(m=b(m)),_=',"'+f+'":'+m;break;case"string":m=(b||Gg)(m),_=',"'+f+'":'+m;break;default:m=(b||s)(m,i),_=',"'+f+'":'+m}}return this[XA]&&S?d+this[eC]+S.slice(1)+"}"+_+a:d+S+_+a}function iC(e,t){let r,n=e[Kg],s=e[Wg],i=e[jc],o=e[Yg],a=o[Xg],l=e[Jg],u=e[Qg].bindings;t=u(t);for(let c in t)if(r=t[c],(c!=="level"&&c!=="serializers"&&c!=="formatters"&&c!=="customLevels"&&t.hasOwnProperty(c)&&r!==void 0)===!0){if(r=l[c]?l[c](r):r,r=(o[c]||a||s)(r,i),r===void 0)continue;n+=',"'+c+'":'+r}return n}function oC(e){return e.write!==e.constructor.prototype.write}function Pa(e){let t=new qc(e);return t.on("error",r),!e.sync&&tC&&(Hg.register(t,aC),t.on("close",function(){Hg.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=ws,t.end=ws,t.flushSync=ws,t.destroy=ws;return}t.removeListener("error",r),t.emit("error",n)}}function aC(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function uC(e){return function(r,n,s={},i){if(typeof s=="string")i=Pa({dest:s}),s={};else if(typeof i=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");i=Pa({dest:i})}else if(s instanceof qc||s.writable||s._writableState)i=s,s={};else if(s.transport){if(s.transport instanceof qc||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let l;s.customLevels&&(l=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),i=rC({caller:n,...s.transport,levels:l})}if(s=Object.assign({},e,s),s.serializers=Object.assign({},e.serializers,s.serializers),s.formatters=Object.assign({},e.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=ws),i||(oC(process.stdout)?i=process.stdout:i=Pa({fd:process.stdout.fd||1})),{opts:s,stream:i}}}function lC(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[jc])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function cC(e,t,r){return{level:e,bindings:t,log:r}}function fC(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}Zg.exports={noop:ws,buildSafeSonicBoom:Pa,asChindings:iC,asJson:sC,genLog:nC,createArgsNormalizer:uC,stringify:lC,buildFormatters:cC,normalizeDestFileDescriptor:fC}});var Ia=v((iB,t0)=>{"use strict";var{lsCacheSym:dC,levelValSym:Dc,useOnlyCustomLevelsSym:hC,streamSym:pC,formattersSym:mC,hooksSym:yC}=Ss(),{noop:gC,genLog:qn}=Oa(),ur={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},e0={fatal:e=>{let t=qn(ur.fatal,e);return function(...r){let n=this[pC];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>qn(ur.error,e),warn:e=>qn(ur.warn,e),info:e=>qn(ur.info,e),debug:e=>qn(ur.debug,e),trace:e=>qn(ur.trace,e)},Lc=Object.keys(ur).reduce((e,t)=>(e[ur[t]]=t,e),{}),_C=Object.keys(Lc).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function vC(e){let t=e[mC].level,{labels:r}=e.levels,n={};for(let s in r){let i=t(r[s],Number(s));n[s]=JSON.stringify(i).slice(0,-1)}return e[dC]=n,e}function EC(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function SC(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Dc],s=this[Dc]=r[e],i=this[hC],o=this[yC].logMethod;for(let a in r){if(s>r[a]){this[a]=gC;continue}this[a]=EC(a,i)?e0[a](o):qn(r[a],o)}this.emit("level-change",e,s,t[n],n,this)}function bC(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function wC(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[Dc]}function RC(e=null,t=!1){let r=e?Object.keys(e).reduce((i,o)=>(i[e[o]]=o,i),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:Lc,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:ur,e);return{labels:n,values:s}}function TC(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(i=>t[i]),r?[]:Object.keys(Lc).map(i=>+i),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:ur,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function $C(e,t){let{labels:r,values:n}=e;for(let s in t){if(s in n)throw Error("levels cannot be overridden");if(t[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}t0.exports={initialLsCache:_C,genLsCache:vC,levelMethods:e0,getLevel:bC,setLevel:SC,isLevelEnabled:wC,mappings:RC,levels:ur,assertNoLevelCollisions:$C,assertDefaultLevelFound:TC}});var xc=v((oB,r0)=>{"use strict";r0.exports={version:"8.14.1"}});var h0=v((uB,d0)=>{"use strict";var{EventEmitter:PC}=require("events"),{lsCacheSym:OC,levelValSym:IC,setLevelSym:Mc,getLevelSym:n0,chindingsSym:Vc,parsedChindingsSym:AC,mixinSym:CC,asJsonSym:u0,writeSym:NC,mixinMergeStrategySym:kC,timeSym:qC,timeSliceIndexSym:jC,streamSym:l0,serializersSym:jn,formattersSym:Fc,errorKeySym:DC,useOnlyCustomLevelsSym:LC,needsMetadataGsym:xC,redactFmtSym:FC,stringifySym:MC,formatOptsSym:VC,stringifiersSym:zC,msgPrefixSym:s0}=Ss(),{getLevel:HC,setLevel:UC,isLevelEnabled:BC,mappings:GC,initialLsCache:KC,genLsCache:JC,assertNoLevelCollisions:YC}=Ia(),{asChindings:c0,asJson:WC,buildFormatters:i0,stringify:o0}=Oa(),{version:XC}=xc(),QC=Sc(),ZC=class{},f0={constructor:ZC,child:eN,bindings:tN,setBindings:rN,flush:oN,isLevelEnabled:BC,version:XC,get level(){return this[n0]()},set level(e){this[Mc](e)},get levelVal(){return this[IC]},set levelVal(e){throw Error("levelVal is read-only")},[OC]:KC,[NC]:sN,[u0]:WC,[n0]:HC,[Mc]:UC};Object.setPrototypeOf(f0,PC.prototype);d0.exports=function(){return Object.create(f0)};var a0=e=>e;function eN(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[jn],n=this[Fc],s=Object.create(this);if(t.hasOwnProperty("serializers")===!0){s[jn]=Object.create(null);for(let c in r)s[jn][c]=r[c];let l=Object.getOwnPropertySymbols(r);for(var i=0;i<l.length;i++){let c=l[i];s[jn][c]=r[c]}for(let c in t.serializers)s[jn][c]=t.serializers[c];let u=Object.getOwnPropertySymbols(t.serializers);for(var o=0;o<u.length;o++){let c=u[o];s[jn][c]=t.serializers[c]}}else s[jn]=r;if(t.hasOwnProperty("formatters")){let{level:l,bindings:u,log:c}=t.formatters;s[Fc]=i0(l||n.level,u||a0,c||n.log)}else s[Fc]=i0(n.level,a0,n.log);if(t.hasOwnProperty("customLevels")===!0&&(YC(this.levels,t.customLevels),s.levels=GC(t.customLevels,s[LC]),JC(s)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){s.redact=t.redact;let l=QC(s.redact,o0),u={stringify:l[FC]};s[MC]=o0,s[zC]=l,s[VC]=u}typeof t.msgPrefix=="string"&&(s[s0]=(this[s0]||"")+t.msgPrefix),s[Vc]=c0(s,e);let a=t.level||this.level;return s[Mc](a),this.onChild(s),s}function tN(){let t=`{${this[Vc].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function rN(e){let t=c0(this,e);this[Vc]=t,delete this[AC]}function nN(e,t){return Object.assign(t,e)}function sN(e,t,r){let n=this[qC](),s=this[CC],i=this[DC],o=this[kC]||nN,a;e==null?a={}:e instanceof Error?(a={[i]:e},t===void 0&&(t=e.message)):(a=e,t===void 0&&e.msg===void 0&&e[i]&&(t=e[i].message)),s&&(a=o(a,s(a,r,this)));let l=this[u0](a,t,r,n),u=this[l0];u[xC]===!0&&(u.lastLevel=r,u.lastObj=a,u.lastMsg=t,u.lastTime=n.slice(this[jC]),u.lastLogger=this),u.write(l)}function iN(){}function oN(){let e=this[l0];"flush"in e&&e.flush(iN)}});var _0=v((Bc,g0)=>{"use strict";var{hasOwnProperty:Aa}=Object.prototype,Ln=Uc();Ln.configure=Uc;Ln.stringify=Ln;Ln.default=Ln;Bc.stringify=Ln;Bc.configure=Uc;g0.exports=Ln;var aN=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function sn(e){return e.length<5e3&&!aN.test(e)?`"${e}"`:JSON.stringify(e)}function zc(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}var uN=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function Hc(e){return uN.call(e)!==void 0&&e.length!==0}function p0(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",s=`"0":${n}${e[0]}`;for(let i=1;i<r;i++)s+=`${t}"${i}":${n}${e[i]}`;return s}function lN(e){if(Aa.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function m0(e,t){let r;if(Aa.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function y0(e,t){let r;if(Aa.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function Dn(e){return e===1?"1 item":`${e} items`}function cN(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function fN(e){if(Aa.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function Uc(e){e={...e};let t=fN(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=lN(e),n=m0(e,"bigint"),s=m0(e,"deterministic"),i=y0(e,"maximumDepth"),o=y0(e,"maximumBreadth");function a(h,d,m,y,S,_){let b=d[h];switch(typeof b=="object"&&b!==null&&typeof b.toJSON=="function"&&(b=b.toJSON(h)),b=y.call(d,h,b),typeof b){case"string":return sn(b);case"object":{if(b===null)return"null";if(m.indexOf(b)!==-1)return r;let g="",p=",",T=_;if(Array.isArray(b)){if(b.length===0)return"[]";if(i<m.length+1)return'"[Array]"';m.push(b),S!==""&&(_+=S,g+=`
${_}`,p=`,
${_}`);let P=Math.min(b.length,o),q=0;for(;q<P-1;q++){let X=a(String(q),b,m,y,S,_);g+=X!==void 0?X:"null",g+=p}let L=a(String(q),b,m,y,S,_);if(g+=L!==void 0?L:"null",b.length-1>o){let X=b.length-o-1;g+=`${p}"... ${Dn(X)} not stringified"`}return S!==""&&(g+=`
${T}`),m.pop(),`[${g}]`}let O=Object.keys(b),w=O.length;if(w===0)return"{}";if(i<m.length+1)return'"[Object]"';let I="",k="";S!==""&&(_+=S,p=`,
${_}`,I=" ");let A=Math.min(w,o);s&&!Hc(b)&&(O=zc(O)),m.push(b);for(let P=0;P<A;P++){let q=O[P],L=a(q,b,m,y,S,_);L!==void 0&&(g+=`${k}${sn(q)}:${I}${L}`,k=p)}if(w>o){let P=w-o;g+=`${k}"...":${I}"${Dn(P)} not stringified"`,k=p}return S!==""&&k.length>1&&(g=`
${_}${g}
${T}`),m.pop(),`{${g}}`}case"number":return isFinite(b)?String(b):t?t(b):"null";case"boolean":return b===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(b);default:return t?t(b):void 0}}function l(h,d,m,y,S,_){switch(typeof d=="object"&&d!==null&&typeof d.toJSON=="function"&&(d=d.toJSON(h)),typeof d){case"string":return sn(d);case"object":{if(d===null)return"null";if(m.indexOf(d)!==-1)return r;let b=_,g="",p=",";if(Array.isArray(d)){if(d.length===0)return"[]";if(i<m.length+1)return'"[Array]"';m.push(d),S!==""&&(_+=S,g+=`
${_}`,p=`,
${_}`);let w=Math.min(d.length,o),I=0;for(;I<w-1;I++){let A=l(String(I),d[I],m,y,S,_);g+=A!==void 0?A:"null",g+=p}let k=l(String(I),d[I],m,y,S,_);if(g+=k!==void 0?k:"null",d.length-1>o){let A=d.length-o-1;g+=`${p}"... ${Dn(A)} not stringified"`}return S!==""&&(g+=`
${b}`),m.pop(),`[${g}]`}m.push(d);let T="";S!==""&&(_+=S,p=`,
${_}`,T=" ");let O="";for(let w of y){let I=l(w,d[w],m,y,S,_);I!==void 0&&(g+=`${O}${sn(w)}:${T}${I}`,O=p)}return S!==""&&O.length>1&&(g=`
${_}${g}
${b}`),m.pop(),`{${g}}`}case"number":return isFinite(d)?String(d):t?t(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return t?t(d):void 0}}function u(h,d,m,y,S){switch(typeof d){case"string":return sn(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(h),typeof d!="object")return u(h,d,m,y,S);if(d===null)return"null"}if(m.indexOf(d)!==-1)return r;let _=S;if(Array.isArray(d)){if(d.length===0)return"[]";if(i<m.length+1)return'"[Array]"';m.push(d),S+=y;let I=`
${S}`,k=`,
${S}`,A=Math.min(d.length,o),P=0;for(;P<A-1;P++){let L=u(String(P),d[P],m,y,S);I+=L!==void 0?L:"null",I+=k}let q=u(String(P),d[P],m,y,S);if(I+=q!==void 0?q:"null",d.length-1>o){let L=d.length-o-1;I+=`${k}"... ${Dn(L)} not stringified"`}return I+=`
${_}`,m.pop(),`[${I}]`}let b=Object.keys(d),g=b.length;if(g===0)return"{}";if(i<m.length+1)return'"[Object]"';S+=y;let p=`,
${S}`,T="",O="",w=Math.min(g,o);Hc(d)&&(T+=p0(d,p,o),b=b.slice(d.length),w-=d.length,O=p),s&&(b=zc(b)),m.push(d);for(let I=0;I<w;I++){let k=b[I],A=u(k,d[k],m,y,S);A!==void 0&&(T+=`${O}${sn(k)}: ${A}`,O=p)}if(g>o){let I=g-o;T+=`${O}"...": "${Dn(I)} not stringified"`,O=p}return O!==""&&(T=`
${S}${T}
${_}`),m.pop(),`{${T}}`}case"number":return isFinite(d)?String(d):t?t(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return t?t(d):void 0}}function c(h,d,m){switch(typeof d){case"string":return sn(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(h),typeof d!="object")return c(h,d,m);if(d===null)return"null"}if(m.indexOf(d)!==-1)return r;let y="";if(Array.isArray(d)){if(d.length===0)return"[]";if(i<m.length+1)return'"[Array]"';m.push(d);let p=Math.min(d.length,o),T=0;for(;T<p-1;T++){let w=c(String(T),d[T],m);y+=w!==void 0?w:"null",y+=","}let O=c(String(T),d[T],m);if(y+=O!==void 0?O:"null",d.length-1>o){let w=d.length-o-1;y+=`,"... ${Dn(w)} not stringified"`}return m.pop(),`[${y}]`}let S=Object.keys(d),_=S.length;if(_===0)return"{}";if(i<m.length+1)return'"[Object]"';let b="",g=Math.min(_,o);Hc(d)&&(y+=p0(d,",",o),S=S.slice(d.length),g-=d.length,b=","),s&&(S=zc(S)),m.push(d);for(let p=0;p<g;p++){let T=S[p],O=c(T,d[T],m);O!==void 0&&(y+=`${b}${sn(T)}:${O}`,b=",")}if(_>o){let p=_-o;y+=`${b}"...":"${Dn(p)} not stringified"`}return m.pop(),`{${y}}`}case"number":return isFinite(d)?String(d):t?t(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return t?t(d):void 0}}function f(h,d,m){if(arguments.length>1){let y="";if(typeof m=="number"?y=" ".repeat(Math.min(m,10)):typeof m=="string"&&(y=m.slice(0,10)),d!=null){if(typeof d=="function")return a("",{"":h},[],d,y,"");if(Array.isArray(d))return l("",h,[],cN(d),y,"")}if(y.length!==0)return u("",h,[],y,"")}return c("",h,[])}return f}});var b0=v((lB,S0)=>{"use strict";var Gc=Symbol.for("pino.metadata"),{levels:v0}=Ia(),E0=Object.create(v0);E0.silent=1/0;var dN=v0.info;function hN(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=E0;t.levels&&typeof t.levels=="object"&&(n=t.levels);let s={write:i,add:a,flushSync:o,end:l,minLevel:0,streams:[],clone:u,[Gc]:!0};return Array.isArray(e)?e.forEach(a,s):a.call(s,e),e=null,s;function i(c){let f,h=this.lastLevel,{streams:d}=this,m=0,y;for(let S=mN(d.length,t.dedupe);gN(S,d.length,t.dedupe);S=yN(S,t.dedupe))if(f=d[S],f.level<=h){if(m!==0&&m!==f.level)break;if(y=f.stream,y[Gc]){let{lastTime:_,lastMsg:b,lastObj:g,lastLogger:p}=this;y.lastLevel=h,y.lastTime=_,y.lastMsg=b,y.lastObj=g,y.lastLogger=p}y.write(c),t.dedupe&&(m=f.level)}else if(!t.dedupe)break}function o(){for(let{stream:c}of this.streams)typeof c.flushSync=="function"&&c.flushSync()}function a(c){if(!c)return s;let f=typeof c.write=="function"||c.stream,h=c.write?c:c.stream;if(!f)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:d}=this,m;typeof c.levelVal=="number"?m=c.levelVal:typeof c.level=="string"?m=n[c.level]:typeof c.level=="number"?m=c.level:m=dN;let y={stream:h,level:m,levelVal:void 0,id:r++};return d.unshift(y),d.sort(pN),this.minLevel=d[0].level,s}function l(){for(let{stream:c}of this.streams)typeof c.flushSync=="function"&&c.flushSync(),c.end()}function u(c){let f=new Array(this.streams.length);for(let h=0;h<f.length;h++)f[h]={level:c,stream:this.streams[h].stream};return{write:i,add:a,minLevel:c,streams:f,clone:u,flushSync:o,[Gc]:!0}}}function pN(e,t){return e.level-t.level}function mN(e,t){return t?e-1:0}function yN(e,t){return t?e-1:e+1}function gN(e,t,r){return r?e>=0:e<t}S0.exports=hN});var j0=v((cB,Wt)=>{"use strict";var _N=require("os"),A0=pc(),vN=mc(),EN=Sc(),C0=gg(),SN=h0(),N0=Ss(),{configure:bN}=_0(),{assertDefaultLevelFound:wN,mappings:k0,genLsCache:RN,levels:TN}=Ia(),{createArgsNormalizer:$N,asChindings:PN,buildSafeSonicBoom:w0,buildFormatters:ON,stringify:Kc,normalizeDestFileDescriptor:R0,noop:IN}=Oa(),{version:AN}=xc(),{chindingsSym:T0,redactFmtSym:CN,serializersSym:$0,timeSym:NN,timeSliceIndexSym:kN,streamSym:qN,stringifySym:P0,stringifySafeSym:Jc,stringifiersSym:O0,setLevelSym:jN,endSym:DN,formatOptsSym:LN,messageKeySym:xN,errorKeySym:FN,nestedKeySym:MN,mixinSym:VN,useOnlyCustomLevelsSym:zN,formattersSym:I0,hooksSym:HN,nestedKeyStrSym:UN,mixinMergeStrategySym:BN,msgPrefixSym:GN}=N0,{epochTime:q0,nullTime:KN}=C0,{pid:JN}=process,YN=_N.hostname(),WN=A0.err,XN={level:"info",levels:TN,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:JN,hostname:YN},serializers:Object.assign(Object.create(null),{err:WN}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:q0,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},QN=$N(XN),ZN=Object.assign(Object.create(null),A0);function Yc(...e){let t={},{opts:r,stream:n}=QN(t,vN(),...e),{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:l,errorKey:u,nestedKey:c,base:f,name:h,level:d,customLevels:m,mixin:y,mixinMergeStrategy:S,useOnlyCustomLevels:_,formatters:b,hooks:g,depthLimit:p,edgeLimit:T,onChild:O,msgPrefix:w}=r,I=bN({maximumDepth:p,maximumBreadth:T}),k=ON(b.level,b.bindings,b.log),A=Kc.bind({[Jc]:I}),P=s?EN(s,A):{},q=s?{stringify:P[CN]}:{stringify:A},L="}"+(i?`\r
`:`
`),X=PN.bind(null,{[T0]:"",[$0]:o,[O0]:P,[P0]:Kc,[Jc]:I,[I0]:k}),de="";f!==null&&(h===void 0?de=X(f):de=X(Object.assign({},f,{name:h})));let V=a instanceof Function?a:a?q0:KN,Z=V().indexOf(":")+1;if(_&&!m)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(y&&typeof y!="function")throw Error(`Unknown mixin type "${typeof y}" - expected "function"`);if(w&&typeof w!="string")throw Error(`Unknown msgPrefix type "${typeof w}" - expected "string"`);wN(d,m,_);let xe=k0(m,_);return Object.assign(t,{levels:xe,[zN]:_,[qN]:n,[NN]:V,[kN]:Z,[P0]:Kc,[Jc]:I,[O0]:P,[DN]:L,[LN]:q,[xN]:l,[FN]:u,[MN]:c,[UN]:c?`,${JSON.stringify(c)}:{`:"",[$0]:o,[VN]:y,[BN]:S,[T0]:de,[I0]:k,[HN]:g,silent:IN,onChild:O,[GN]:w}),Object.setPrototypeOf(t,SN()),RN(t),t[jN](d),t}Wt.exports=Yc;Wt.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=R0(e.dest||process.stdout.fd),w0(e)):w0({dest:R0(e),minLength:0});Wt.exports.transport=kc();Wt.exports.multistream=b0();Wt.exports.levels=k0();Wt.exports.stdSerializers=ZN;Wt.exports.stdTimeFunctions=Object.assign({},C0);Wt.exports.symbols=N0;Wt.exports.version=AN;Wt.exports.default=Yc;Wt.exports.pino=Yc});var Xc=v((fB,x0)=>{"use strict";var ek=$y(),Ca=j0(),{serializersSym:D0}=Ca.symbols,{FST_ERR_LOG_INVALID_DESTINATION:tk,FST_ERR_LOG_INVALID_LOGGER:rk}=gt();function L0(e){if(e.stream&&e.file)throw new tk;e.file&&(e.stream=Ca.destination(e.file),delete e.file);let t=e.logger,r=e.genReqId,n=null;return t?(e.logger=void 0,e.genReqId=void 0,t[D0]&&(e.serializers=Object.assign({},e.serializers,t[D0])),n=t.child({},e),e.logger=t,e.genReqId=r):n=Ca(e,e.stream),n}var Wc={req:function(t){return{method:t.method,url:t.url,version:t.headers&&t.headers["accept-version"],hostname:t.hostname,remoteAddress:t.ip,remotePort:t.socket?t.socket.remotePort:void 0}},err:Ca.stdSerializers.err,res:function(t){return{statusCode:t.statusCode}}};function nk(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}function sk(e){if(!e.logger){let n=ek;return n.child=()=>n,{logger:n,hasLogger:!1}}if(ik(e.logger))return{logger:L0({logger:e.logger,serializers:Object.assign({},Wc,e.logger.serializers)}),hasLogger:!0};let t={};return Object.prototype.toString.call(e.logger)==="[object Object]"&&Reflect.ownKeys(e.logger).forEach(n=>{Object.defineProperty(t,n,{value:e.logger[n],writable:!0,enumerable:!0,configurable:!0})}),t.level=t.level||"info",t.serializers=Object.assign({},Wc,t.serializers),e.logger=t,{logger:L0(e.logger),hasLogger:!0}}function ik(e){let t=["info","error","debug","fatal","warn","trace","child"],r=t.filter(n=>!e[n]||typeof e[n]!="function");if(r.length){if(r.length===t.length)return!1;throw rk(r.join(","))}else return!0}x0.exports={createLogger:sk,serializers:Wc,now:nk}});var Ti=v((dB,F0)=>{"use strict";F0.exports=ok;function Rs(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function ok(e){if(e=e||{},e.circles)return ak(e);return e.proto?n:r;function t(s,i){for(var o=Object.keys(s),a=new Array(o.length),l=0;l<o.length;l++){var u=o[l],c=s[u];typeof c!="object"||c===null?a[u]=c:c instanceof Date?a[u]=new Date(c):ArrayBuffer.isView(c)?a[u]=Rs(c):a[u]=i(c)}return a}function r(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return t(s,r);if(s instanceof Map)return new Map(t(Array.from(s),r));if(s instanceof Set)return new Set(t(Array.from(s),r));var i={};for(var o in s)if(Object.hasOwnProperty.call(s,o)!==!1){var a=s[o];typeof a!="object"||a===null?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(t(Array.from(a),r)):a instanceof Set?i[o]=new Set(t(Array.from(a),r)):ArrayBuffer.isView(a)?i[o]=Rs(a):i[o]=r(a)}return i}function n(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return t(s,n);if(s instanceof Map)return new Map(t(Array.from(s),n));if(s instanceof Set)return new Set(t(Array.from(s),n));var i={};for(var o in s){var a=s[o];typeof a!="object"||a===null?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(t(Array.from(a),n)):a instanceof Set?i[o]=new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?i[o]=Rs(a):i[o]=n(a)}return i}}function ak(e){var t=[],r=[];return e.proto?i:s;function n(o,a){for(var l=Object.keys(o),u=new Array(l.length),c=0;c<l.length;c++){var f=l[c],h=o[f];if(typeof h!="object"||h===null)u[f]=h;else if(h instanceof Date)u[f]=new Date(h);else if(ArrayBuffer.isView(h))u[f]=Rs(h);else{var d=t.indexOf(h);d!==-1?u[f]=r[d]:u[f]=a(h)}}return u}function s(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,s);if(o instanceof Map)return new Map(n(Array.from(o),s));if(o instanceof Set)return new Set(n(Array.from(o),s));var a={};t.push(o),r.push(a);for(var l in o)if(Object.hasOwnProperty.call(o,l)!==!1){var u=o[l];if(typeof u!="object"||u===null)a[l]=u;else if(u instanceof Date)a[l]=new Date(u);else if(u instanceof Map)a[l]=new Map(n(Array.from(u),s));else if(u instanceof Set)a[l]=new Set(n(Array.from(u),s));else if(ArrayBuffer.isView(u))a[l]=Rs(u);else{var c=t.indexOf(u);c!==-1?a[l]=r[c]:a[l]=s(u)}}return t.pop(),r.pop(),a}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,i);if(o instanceof Map)return new Map(n(Array.from(o),i));if(o instanceof Set)return new Set(n(Array.from(o),i));var a={};t.push(o),r.push(a);for(var l in o){var u=o[l];if(typeof u!="object"||u===null)a[l]=u;else if(u instanceof Date)a[l]=new Date(u);else if(u instanceof Map)a[l]=new Map(n(Array.from(u),i));else if(u instanceof Set)a[l]=new Set(n(Array.from(u),i));else if(ArrayBuffer.isView(u))a[l]=Rs(u);else{var c=t.indexOf(u);c!==-1?a[l]=r[c]:a[l]=i(u)}}return t.pop(),r.pop(),a}}});var $i=v((hB,M0)=>{"use strict";var uk=Ti()({circles:!1,proto:!0}),{kSchemaVisited:Qc,kSchemaResponse:lk}=at(),Zc=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:ck,FST_ERR_SCH_ALREADY_PRESENT:fk,FST_ERR_SCH_DUPLICATE:dk,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:hk}=gt(),pk=["params","body","querystring","query","headers"];function Na(e){this.store=e||{}}Na.prototype.add=function(e){let t=uk(e.isFluentSchema||e.isFluentJSONSchema||e[Zc]?e.valueOf():e),r=t.$id;if(!r)throw new ck;if(this.store[r])throw new fk(r);this.store[r]=t};Na.prototype.getSchemas=function(){return Object.assign({},this.store)};Na.prototype.getSchema=function(e){return this.store[e]};function mk(e,t){if(e[Qc])return e;if(e.query){if(e.querystring)throw new dk("querystring");e.querystring=e.query}yk(e);for(let r of["headers","querystring","params","body"])if(typeof e[r]=="object"&&Object.getPrototypeOf(e[r])!==Object.prototype)return e[Qc]=!0,e;if(e.body&&(e.body=Ts(e.body,t.jsonShorthand)),e.headers&&(e.headers=Ts(e.headers,t.jsonShorthand)),e.querystring&&(e.querystring=Ts(e.querystring,t.jsonShorthand)),e.params&&(e.params=Ts(e.params,t.jsonShorthand)),e.response){let r=Object.keys(e.response);for(let n of r){let s=e.response[n].content,i=!1;if(s){let o=Object.keys(s);for(let a=0;a<o.length;a++){let l=o[a];if(!s[l].schema){if(o.length===1)break;throw new hk(l)}e.response[n].content[l].schema=Ts(s[l].schema,t.jsonShorthand),a===o.length-1&&(i=!0)}}i||(e.response[n]=Ts(e.response[n],t.jsonShorthand))}}return e[Qc]=!0,e}function yk(e){for(let t of pk)e[t]&&(e[t].isFluentSchema||e[t][Zc])&&(e[t]=e[t].valueOf());if(e.response){let t=Object.keys(e.response);for(let r of t)(e.response[r].isFluentSchema||e.response[r][Zc])&&(e.response[r]=e.response[r].valueOf())}}function Ts(e,t){return!t||e.$ref||e.oneOf||e.allOf||e.anyOf||e.$merge||e.$patch?e:!e.type&&!e.properties?{type:"object",properties:e}:e}function gk(e,t,r){let n=e[lk];if(!n)return!1;if(n[t]){if(n[t].constructor===Object&&r){let i=r.split(";")[0];return n[t][i]?n[t][i]:!1}return n[t]}let s=(t+"")[0]+"xx";if(n[s]){if(n[s].constructor===Object&&r){let i=r.split(";")[0];return n[s][i]?n[s][i]:!1}return n[s]}if(n.default){if(n.default.constructor===Object&&r){let i=r.split(";")[0];return n.default[i]?n.default[i]:!1}return n.default}return!1}M0.exports={buildSchemas(e){return new Na(e)},getSchemaSerializer:gk,normalizeSchema:mk}});var ef=v((pB,z0)=>{"use strict";var _k=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;z0.exports=class V0{constructor(t){switch(t&&t.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=t}asInteger(t){if(typeof t=="number"){if(t===1/0||t===-1/0)throw new Error(`The value "${t}" cannot be converted to an integer.`);if(Number.isInteger(t))return""+t;if(Number.isNaN(t))throw new Error(`The value "${t}" cannot be converted to an integer.`);return this.parseInteger(t)}else{if(t===null)return"0";if(typeof t=="bigint")return t.toString();{let r=this.parseInteger(t);if(Number.isFinite(r))return""+r;throw new Error(`The value "${t}" cannot be converted to an integer.`)}}}asNumber(t){let r=Number(t);if(Number.isNaN(r))throw new Error(`The value "${t}" cannot be converted to a number.`);return Number.isFinite(r)?""+r:"null"}asBoolean(t){return t&&"true"||"false"}asDateTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a date-time.`)}asDate(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a date.`)}asTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a time.`)}asString(t){if(typeof t!="string"){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';t instanceof RegExp?t=t.source:t=t.toString()}return _k.test(t)?t.length<42?this.asStringSmall(t):JSON.stringify(t):'"'+t+'"'}asStringSmall(t){let r=t.length,n="",s=0,i=!1,o=!1,a=255;for(var l=0;l<r&&a>=32;l++)a=t.charCodeAt(l),a>=55296&&a<=57343&&(o=!0),(a===34||a===92)&&(n+=t.slice(s,l)+"\\",s=l,i=!0);return i?n+=t.slice(s):n=t,a<32||o===!0?JSON.stringify(t):'"'+n+'"'}getState(){return this._options}static restoreFromState(t){return new V0(t)}}});var $s=v(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.regexpCode=ge.getEsmExportName=ge.getProperty=ge.safeStringify=ge.stringify=ge.strConcat=ge.addCodeArg=ge.str=ge._=ge.nil=ge._Code=ge.Name=ge.IDENTIFIER=ge._CodeOrName=void 0;var Pi=class{};ge._CodeOrName=Pi;ge.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var xn=class extends Pi{constructor(t){if(super(),!ge.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};ge.Name=xn;var Xt=class extends Pi{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,n)=>(n instanceof xn&&(r[n.str]=(r[n.str]||0)+1),r),{})}};ge._Code=Xt;ge.nil=new Xt("");function H0(e,...t){let r=[e[0]],n=0;for(;n<t.length;)rf(r,t[n]),r.push(e[++n]);return new Xt(r)}ge._=H0;var tf=new Xt("+");function U0(e,...t){let r=[Oi(e[0])],n=0;for(;n<t.length;)r.push(tf),rf(r,t[n]),r.push(tf,Oi(e[++n]));return vk(r),new Xt(r)}ge.str=U0;function rf(e,t){t instanceof Xt?e.push(...t._items):t instanceof xn?e.push(t):e.push(bk(t))}ge.addCodeArg=rf;function vk(e){let t=1;for(;t<e.length-1;){if(e[t]===tf){let r=Ek(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function Ek(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof xn||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof xn))return`"${e}${t.slice(1)}`}function Sk(e,t){return t.emptyStr()?e:e.emptyStr()?t:U0`${e}${t}`}ge.strConcat=Sk;function bk(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:Oi(Array.isArray(e)?e.join(","):e)}function wk(e){return new Xt(Oi(e))}ge.stringify=wk;function Oi(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}ge.safeStringify=Oi;function Rk(e){return typeof e=="string"&&ge.IDENTIFIER.test(e)?new Xt(`.${e}`):H0`[${e}]`}ge.getProperty=Rk;function Tk(e){if(typeof e=="string"&&ge.IDENTIFIER.test(e))return new Xt(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}ge.getEsmExportName=Tk;function $k(e){return new Xt(e.toString())}ge.regexpCode=$k});var ja=v(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.ValueScope=bt.ValueScopeName=bt.Scope=bt.varKinds=bt.UsedValueState=void 0;var Ct=$s(),nf=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},sf;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(sf=bt.UsedValueState||(bt.UsedValueState={}));bt.varKinds={const:new Ct.Name("const"),let:new Ct.Name("let"),var:new Ct.Name("var")};var ka=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof Ct.Name?t:this.name(t)}name(t){return new Ct.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};bt.Scope=ka;var qa=class extends Ct.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:n}){this.value=t,this.scopePath=(0,Ct._)`.${new Ct.Name(r)}[${n}]`}};bt.ValueScopeName=qa;var Pk=(0,Ct._)`\n`,of=class extends ka{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?Pk:Ct.nil}}get(){return this._scope}name(t){return new qa(t,this._newName(t))}value(t,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(t),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let c=a.get(o);if(c)return c}else a=this._values[i]=new Map;a.set(o,s);let l=this._scope[i]||(this._scope[i]=[]),u=l.length;return l[u]=r.ref,s.setValue(r,{property:i,itemIndex:u}),s}getValue(t,r){let n=this._values[t];if(n)return n.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Ct._)`${t}${n.scopePath}`})}scopeCode(t=this._values,r,n){return this._reduceValues(t,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(t,r,n={},s){let i=Ct.nil;for(let o in t){let a=t[o];if(!a)continue;let l=n[o]=n[o]||new Map;a.forEach(u=>{if(l.has(u))return;l.set(u,sf.Started);let c=r(u);if(c){let f=this.opts.es5?bt.varKinds.var:bt.varKinds.const;i=(0,Ct._)`${i}${f} ${u} = ${c};${this.opts._n}`}else if(c=s?.(u))i=(0,Ct._)`${i}${c}${this.opts._n}`;else throw new nf(u);l.set(u,sf.Completed)})}return i}};bt.ValueScope=of});var Q=v(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.or=oe.and=oe.not=oe.CodeGen=oe.operators=oe.varKinds=oe.ValueScopeName=oe.ValueScope=oe.Scope=oe.Name=oe.regexpCode=oe.stringify=oe.getProperty=oe.nil=oe.strConcat=oe.str=oe._=void 0;var fe=$s(),lr=ja(),on=$s();Object.defineProperty(oe,"_",{enumerable:!0,get:function(){return on._}});Object.defineProperty(oe,"str",{enumerable:!0,get:function(){return on.str}});Object.defineProperty(oe,"strConcat",{enumerable:!0,get:function(){return on.strConcat}});Object.defineProperty(oe,"nil",{enumerable:!0,get:function(){return on.nil}});Object.defineProperty(oe,"getProperty",{enumerable:!0,get:function(){return on.getProperty}});Object.defineProperty(oe,"stringify",{enumerable:!0,get:function(){return on.stringify}});Object.defineProperty(oe,"regexpCode",{enumerable:!0,get:function(){return on.regexpCode}});Object.defineProperty(oe,"Name",{enumerable:!0,get:function(){return on.Name}});var Fa=ja();Object.defineProperty(oe,"Scope",{enumerable:!0,get:function(){return Fa.Scope}});Object.defineProperty(oe,"ValueScope",{enumerable:!0,get:function(){return Fa.ValueScope}});Object.defineProperty(oe,"ValueScopeName",{enumerable:!0,get:function(){return Fa.ValueScopeName}});Object.defineProperty(oe,"varKinds",{enumerable:!0,get:function(){return Fa.varKinds}});oe.operators={GT:new fe._Code(">"),GTE:new fe._Code(">="),LT:new fe._Code("<"),LTE:new fe._Code("<="),EQ:new fe._Code("==="),NEQ:new fe._Code("!=="),NOT:new fe._Code("!"),OR:new fe._Code("||"),AND:new fe._Code("&&"),ADD:new fe._Code("+")};var qr=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},af=class extends qr{constructor(t,r,n){super(),this.varKind=t,this.name=r,this.rhs=n}render({es5:t,_n:r}){let n=t?lr.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=Os(this.rhs,t,r)),this}get names(){return this.rhs instanceof fe._CodeOrName?this.rhs.names:{}}},Da=class extends qr{constructor(t,r,n){super(),this.lhs=t,this.rhs=r,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof fe.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Os(this.rhs,t,r),this}get names(){let t=this.lhs instanceof fe.Name?{}:{...this.lhs.names};return xa(t,this.rhs)}},uf=class extends Da{constructor(t,r,n,s){super(t,n,s),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},lf=class extends qr{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},cf=class extends qr{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},ff=class extends qr{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},df=class extends qr{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=Os(this.code,t,r),this}get names(){return this.code instanceof fe._CodeOrName?this.code.names:{}}},Ii=class extends qr{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,n)=>r+n.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let n=t[r].optimizeNodes();Array.isArray(n)?t.splice(r,1,...n):n?t[r]=n:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(t,r)||(Ok(t,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>Mn(t,r.names),{})}},jr=class extends Ii{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},hf=class extends Ii{},Ps=class extends jr{};Ps.kind="else";var cr=class extends jr{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Ps(n):n}if(r)return t===!1?r instanceof cr?r:r.nodes:this.nodes.length?this:new cr(B0(t),r instanceof cr?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=Os(this.condition,t,r),this}get names(){let t=super.names;return xa(t,this.condition),this.else&&Mn(t,this.else.names),t}};cr.kind="if";var Fn=class extends jr{};Fn.kind="for";var pf=class extends Fn{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=Os(this.iteration,t,r),this}get names(){return Mn(super.names,this.iteration.names)}},mf=class extends Fn{constructor(t,r,n,s){super(),this.varKind=t,this.name=r,this.from=n,this.to=s}render(t){let r=t.es5?lr.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(t)}get names(){let t=xa(super.names,this.from);return xa(t,this.to)}},La=class extends Fn{constructor(t,r,n,s){super(),this.loop=t,this.varKind=r,this.name=n,this.iterable=s}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=Os(this.iterable,t,r),this}get names(){return Mn(super.names,this.iterable.names)}},Ai=class extends jr{constructor(t,r,n){super(),this.name=t,this.args=r,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};Ai.kind="func";var Ci=class extends Ii{render(t){return"return "+super.render(t)}};Ci.kind="return";var yf=class extends jr{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var n,s;return super.optimizeNames(t,r),(n=this.catch)===null||n===void 0||n.optimizeNames(t,r),(s=this.finally)===null||s===void 0||s.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&Mn(t,this.catch.names),this.finally&&Mn(t,this.finally.names),t}},Ni=class extends jr{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};Ni.kind="catch";var ki=class extends jr{render(t){return"finally"+super.render(t)}};ki.kind="finally";var gf=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new lr.Scope({parent:t}),this._nodes=[new hf]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let n=this._extScope.value(t,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new af(t,i,n)),i}const(t,r,n){return this._def(lr.varKinds.const,t,r,n)}let(t,r,n){return this._def(lr.varKinds.let,t,r,n)}var(t,r,n){return this._def(lr.varKinds.var,t,r,n)}assign(t,r,n){return this._leafNode(new Da(t,r,n))}add(t,r){return this._leafNode(new uf(t,oe.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==fe.nil&&this._leafNode(new df(t)),this}object(...t){let r=["{"];for(let[n,s]of t)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,fe.addCodeArg)(r,s));return r.push("}"),new fe._Code(r)}if(t,r,n){if(this._blockNode(new cr(t)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new cr(t))}else(){return this._elseNode(new Ps)}endIf(){return this._endBlockNode(cr,Ps)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new pf(t),r)}forRange(t,r,n,s,i=this.opts.es5?lr.varKinds.var:lr.varKinds.let){let o=this._scope.toName(t);return this._for(new mf(i,o,r,n),()=>s(o))}forOf(t,r,n,s=lr.varKinds.const){let i=this._scope.toName(t);if(this.opts.es5){let o=r instanceof fe.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,fe._)`${o}.length`,a=>{this.var(i,(0,fe._)`${o}[${a}]`),n(i)})}return this._for(new La("of",s,i,r),()=>n(i))}forIn(t,r,n,s=this.opts.es5?lr.varKinds.var:lr.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,fe._)`Object.keys(${r})`,n);let i=this._scope.toName(t);return this._for(new La("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Fn)}label(t){return this._leafNode(new lf(t))}break(t){return this._leafNode(new cf(t))}return(t){let r=new Ci;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Ci)}try(t,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new yf;if(this._blockNode(s),this.code(t),r){let i=this.name("e");this._currNode=s.catch=new Ni(i),r(i)}return n&&(this._currNode=s.finally=new ki,this.code(n)),this._endBlockNode(Ni,ki)}throw(t){return this._leafNode(new ff(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||t!==void 0&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=fe.nil,n,s){return this._blockNode(new Ai(t,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Ai)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let n=this._currNode;if(n instanceof t||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof cr))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};oe.CodeGen=gf;function Mn(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function xa(e,t){return t instanceof fe._CodeOrName?Mn(e,t.names):e}function Os(e,t,r){if(e instanceof fe.Name)return n(e);if(!s(e))return e;return new fe._Code(e._items.reduce((i,o)=>(o instanceof fe.Name&&(o=n(o)),o instanceof fe._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||t[i.str]!==1?i:(delete t[i.str],o)}function s(i){return i instanceof fe._Code&&i._items.some(o=>o instanceof fe.Name&&t[o.str]===1&&r[o.str]!==void 0)}}function Ok(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function B0(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,fe._)`!${_f(e)}`}oe.not=B0;var Ik=G0(oe.operators.AND);function Ak(...e){return e.reduce(Ik)}oe.and=Ak;var Ck=G0(oe.operators.OR);function Nk(...e){return e.reduce(Ck)}oe.or=Nk;function G0(e){return(t,r)=>t===fe.nil?r:r===fe.nil?t:(0,fe._)`${_f(t)} ${e} ${_f(r)}`}function _f(e){return e instanceof fe.Name?e:(0,fe._)`(${e})`}});var se=v(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.checkStrictMode=ae.getErrorPath=ae.Type=ae.useFunc=ae.setEvaluated=ae.evaluatedPropsToName=ae.mergeEvaluated=ae.eachItem=ae.unescapeJsonPointer=ae.escapeJsonPointer=ae.escapeFragment=ae.unescapeFragment=ae.schemaRefOrVal=ae.schemaHasRulesButRef=ae.schemaHasRules=ae.checkUnknownRules=ae.alwaysValidSchema=ae.toHash=void 0;var Ce=Q(),kk=$s();function qk(e){let t={};for(let r of e)t[r]=!0;return t}ae.toHash=qk;function jk(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Y0(e,t),!W0(t,e.self.RULES.all))}ae.alwaysValidSchema=jk;function Y0(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;let s=n.RULES.keywords;for(let i in t)s[i]||e_(e,`unknown keyword: "${i}"`)}ae.checkUnknownRules=Y0;function W0(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}ae.schemaHasRules=W0;function Dk(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}ae.schemaHasRulesButRef=Dk;function Lk({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Ce._)`${r}`}return(0,Ce._)`${e}${t}${(0,Ce.getProperty)(n)}`}ae.schemaRefOrVal=Lk;function xk(e){return X0(decodeURIComponent(e))}ae.unescapeFragment=xk;function Fk(e){return encodeURIComponent(vf(e))}ae.escapeFragment=Fk;function vf(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}ae.escapeJsonPointer=vf;function X0(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}ae.unescapeJsonPointer=X0;function Mk(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}ae.eachItem=Mk;function K0({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let l=o===void 0?i:o instanceof Ce.Name?(i instanceof Ce.Name?e(s,i,o):t(s,i,o),o):i instanceof Ce.Name?(t(s,o,i),i):r(i,o);return a===Ce.Name&&!(l instanceof Ce.Name)?n(s,l):l}}ae.mergeEvaluated={props:K0({mergeNames:(e,t,r)=>e.if((0,Ce._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,Ce._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,Ce._)`${r} || {}`).code((0,Ce._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,Ce._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,Ce._)`${r} || {}`),Ef(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Q0}),items:K0({mergeNames:(e,t,r)=>e.if((0,Ce._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,Ce._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,Ce._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,Ce._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Q0(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,Ce._)`{}`);return t!==void 0&&Ef(e,r,t),r}ae.evaluatedPropsToName=Q0;function Ef(e,t,r){Object.keys(r).forEach(n=>e.assign((0,Ce._)`${t}${(0,Ce.getProperty)(n)}`,!0))}ae.setEvaluated=Ef;var J0={};function Vk(e,t){return e.scopeValue("func",{ref:t,code:J0[t.code]||(J0[t.code]=new kk._Code(t.code))})}ae.useFunc=Vk;var Z0;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Z0=ae.Type||(ae.Type={}));function zk(e,t,r){if(e instanceof Ce.Name){let n=t===Z0.Num;return r?n?(0,Ce._)`"[" + ${e} + "]"`:(0,Ce._)`"['" + ${e} + "']"`:n?(0,Ce._)`"/" + ${e}`:(0,Ce._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Ce.getProperty)(e).toString():"/"+vf(e)}ae.getErrorPath=zk;function e_(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}ae.checkStrictMode=e_});var Qt=v(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var _t=Q(),Hk={data:new _t.Name("data"),valCxt:new _t.Name("valCxt"),instancePath:new _t.Name("instancePath"),parentData:new _t.Name("parentData"),parentDataProperty:new _t.Name("parentDataProperty"),rootData:new _t.Name("rootData"),dynamicAnchors:new _t.Name("dynamicAnchors"),vErrors:new _t.Name("vErrors"),errors:new _t.Name("errors"),this:new _t.Name("this"),self:new _t.Name("self"),scope:new _t.Name("scope"),json:new _t.Name("json"),jsonPos:new _t.Name("jsonPos"),jsonLen:new _t.Name("jsonLen"),jsonPart:new _t.Name("jsonPart")};Sf.default=Hk});var qi=v(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.extendErrors=vt.resetErrorsCount=vt.reportExtraError=vt.reportError=vt.keyword$DataError=vt.keywordError=void 0;var pe=Q(),Ma=se(),wt=Qt();vt.keywordError={message:({keyword:e})=>(0,pe.str)`must pass "${e}" keyword validation`};vt.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,pe.str)`"${e}" keyword must be ${t} ($data)`:(0,pe.str)`"${e}" keyword is invalid ($data)`};function Uk(e,t=vt.keywordError,r,n){let{it:s}=e,{gen:i,compositeRule:o,allErrors:a}=s,l=n_(e,t,r);n??(o||a)?t_(i,l):r_(s,(0,pe._)`[${l}]`)}vt.reportError=Uk;function Bk(e,t=vt.keywordError,r){let{it:n}=e,{gen:s,compositeRule:i,allErrors:o}=n,a=n_(e,t,r);t_(s,a),i||o||r_(n,wt.default.vErrors)}vt.reportExtraError=Bk;function Gk(e,t){e.assign(wt.default.errors,t),e.if((0,pe._)`${wt.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,pe._)`${wt.default.vErrors}.length`,t),()=>e.assign(wt.default.vErrors,null)))}vt.resetErrorsCount=Gk;function Kk({gen:e,keyword:t,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=e.name("err");e.forRange("i",s,wt.default.errors,a=>{e.const(o,(0,pe._)`${wt.default.vErrors}[${a}]`),e.if((0,pe._)`${o}.instancePath === undefined`,()=>e.assign((0,pe._)`${o}.instancePath`,(0,pe.strConcat)(wt.default.instancePath,i.errorPath))),e.assign((0,pe._)`${o}.schemaPath`,(0,pe.str)`${i.errSchemaPath}/${t}`),i.opts.verbose&&(e.assign((0,pe._)`${o}.schema`,r),e.assign((0,pe._)`${o}.data`,n))})}vt.extendErrors=Kk;function t_(e,t){let r=e.const("err",t);e.if((0,pe._)`${wt.default.vErrors} === null`,()=>e.assign(wt.default.vErrors,(0,pe._)`[${r}]`),(0,pe._)`${wt.default.vErrors}.push(${r})`),e.code((0,pe._)`${wt.default.errors}++`)}function r_(e,t){let{gen:r,validateName:n,schemaEnv:s}=e;s.$async?r.throw((0,pe._)`new ${e.ValidationError}(${t})`):(r.assign((0,pe._)`${n}.errors`,t),r.return(!1))}var Vn={keyword:new pe.Name("keyword"),schemaPath:new pe.Name("schemaPath"),params:new pe.Name("params"),propertyName:new pe.Name("propertyName"),message:new pe.Name("message"),schema:new pe.Name("schema"),parentSchema:new pe.Name("parentSchema")};function n_(e,t,r){let{createErrors:n}=e.it;return n===!1?(0,pe._)`{}`:Jk(e,t,r)}function Jk(e,t,r={}){let{gen:n,it:s}=e,i=[Yk(s,r),Wk(e,r)];return Xk(e,t,i),n.object(...i)}function Yk({errorPath:e},{instancePath:t}){let r=t?(0,pe.str)`${e}${(0,Ma.getErrorPath)(t,Ma.Type.Str)}`:e;return[wt.default.instancePath,(0,pe.strConcat)(wt.default.instancePath,r)]}function Wk({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let s=n?t:(0,pe.str)`${t}/${e}`;return r&&(s=(0,pe.str)`${s}${(0,Ma.getErrorPath)(r,Ma.Type.Str)}`),[Vn.schemaPath,s]}function Xk(e,{params:t,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=e,{opts:l,propertyName:u,topSchemaRef:c,schemaPath:f}=a;n.push([Vn.keyword,s],[Vn.params,typeof t=="function"?t(e):t||(0,pe._)`{}`]),l.messages&&n.push([Vn.message,typeof r=="function"?r(e):r]),l.verbose&&n.push([Vn.schema,o],[Vn.parentSchema,(0,pe._)`${c}${f}`],[wt.default.data,i]),u&&n.push([Vn.propertyName,u])}});var i_=v(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.boolOrEmptySchema=Is.topBoolOrEmptySchema=void 0;var Qk=qi(),Zk=Q(),eq=Qt(),tq={message:"boolean schema is false"};function rq(e){let{gen:t,schema:r,validateName:n}=e;r===!1?s_(e,!1):typeof r=="object"&&r.$async===!0?t.return(eq.default.data):(t.assign((0,Zk._)`${n}.errors`,null),t.return(!0))}Is.topBoolOrEmptySchema=rq;function nq(e,t){let{gen:r,schema:n}=e;n===!1?(r.var(t,!1),s_(e)):r.var(t,!0)}Is.boolOrEmptySchema=nq;function s_(e,t){let{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Qk.reportError)(s,tq,void 0,t)}});var bf=v(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.getRules=As.isJSONType=void 0;var sq=["string","number","integer","boolean","null","object","array"],iq=new Set(sq);function oq(e){return typeof e=="string"&&iq.has(e)}As.isJSONType=oq;function aq(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}As.getRules=aq});var wf=v(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.shouldUseRule=an.shouldUseGroup=an.schemaHasRulesForType=void 0;function uq({schema:e,self:t},r){let n=t.RULES.types[r];return n&&n!==!0&&o_(e,n)}an.schemaHasRulesForType=uq;function o_(e,t){return t.rules.some(r=>a_(e,r))}an.shouldUseGroup=o_;function a_(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}an.shouldUseRule=a_});var Di=v(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.reportTypeError=dt.checkDataTypes=dt.checkDataType=dt.coerceAndCheckDataType=dt.getJSONTypes=dt.getSchemaTypes=dt.DataType=void 0;var lq=bf(),cq=wf(),fq=qi(),ne=Q(),u_=se(),ji;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(ji=dt.DataType||(dt.DataType={}));function dq(e){let t=l_(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}dt.getSchemaTypes=dq;function l_(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(lq.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}dt.getJSONTypes=l_;function hq(e,t){let{gen:r,data:n,opts:s}=e,i=pq(t,s.coerceTypes),o=t.length>0&&!(i.length===0&&t.length===1&&(0,cq.schemaHasRulesForType)(e,t[0]));if(o){let a=Tf(t,n,s.strictNumbers,ji.Wrong);r.if(a,()=>{i.length?mq(e,t,i):$f(e)})}return o}dt.coerceAndCheckDataType=hq;var c_=new Set(["string","number","integer","boolean","null"]);function pq(e,t){return t?e.filter(r=>c_.has(r)||t==="array"&&r==="array"):[]}function mq(e,t,r){let{gen:n,data:s,opts:i}=e,o=n.let("dataType",(0,ne._)`typeof ${s}`),a=n.let("coerced",(0,ne._)`undefined`);i.coerceTypes==="array"&&n.if((0,ne._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ne._)`${s}[0]`).assign(o,(0,ne._)`typeof ${s}`).if(Tf(t,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,ne._)`${a} !== undefined`);for(let u of r)(c_.has(u)||u==="array"&&i.coerceTypes==="array")&&l(u);n.else(),$f(e),n.endIf(),n.if((0,ne._)`${a} !== undefined`,()=>{n.assign(s,a),yq(e,a)});function l(u){switch(u){case"string":n.elseIf((0,ne._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ne._)`"" + ${s}`).elseIf((0,ne._)`${s} === null`).assign(a,(0,ne._)`""`);return;case"number":n.elseIf((0,ne._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,ne._)`+${s}`);return;case"integer":n.elseIf((0,ne._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,ne._)`+${s}`);return;case"boolean":n.elseIf((0,ne._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,ne._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ne._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ne._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,ne._)`[${s}]`)}}}function yq({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,ne._)`${t} !== undefined`,()=>e.assign((0,ne._)`${t}[${r}]`,n))}function Rf(e,t,r,n=ji.Correct){let s=n===ji.Correct?ne.operators.EQ:ne.operators.NEQ,i;switch(e){case"null":return(0,ne._)`${t} ${s} null`;case"array":i=(0,ne._)`Array.isArray(${t})`;break;case"object":i=(0,ne._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=o((0,ne._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=o();break;default:return(0,ne._)`typeof ${t} ${s} ${e}`}return n===ji.Correct?i:(0,ne.not)(i);function o(a=ne.nil){return(0,ne.and)((0,ne._)`typeof ${t} == "number"`,a,r?(0,ne._)`isFinite(${t})`:ne.nil)}}dt.checkDataType=Rf;function Tf(e,t,r,n){if(e.length===1)return Rf(e[0],t,r,n);let s,i=(0,u_.toHash)(e);if(i.array&&i.object){let o=(0,ne._)`typeof ${t} != "object"`;s=i.null?o:(0,ne._)`!${t} || ${o}`,delete i.null,delete i.array,delete i.object}else s=ne.nil;i.number&&delete i.integer;for(let o in i)s=(0,ne.and)(s,Rf(o,t,r,n));return s}dt.checkDataTypes=Tf;var gq={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,ne._)`{type: ${e}}`:(0,ne._)`{type: ${t}}`};function $f(e){let t=_q(e);(0,fq.reportError)(t,gq)}dt.reportTypeError=$f;function _q(e){let{gen:t,data:r,schema:n}=e,s=(0,u_.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}});var d_=v(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.assignDefaults=void 0;var Cs=Q(),vq=se();function Eq(e,t){let{properties:r,items:n}=e.schema;if(t==="object"&&r)for(let s in r)f_(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>f_(e,i,s.default))}Va.assignDefaults=Eq;function f_(e,t,r){let{gen:n,compositeRule:s,data:i,opts:o}=e;if(r===void 0)return;let a=(0,Cs._)`${i}${(0,Cs.getProperty)(t)}`;if(s){(0,vq.checkStrictMode)(e,`default is ignored for: ${a}`);return}let l=(0,Cs._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,Cs._)`${l} || ${a} === null || ${a} === ""`),n.if(l,(0,Cs._)`${a} = ${(0,Cs.stringify)(r)}`)}});var ht=v(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.validateUnion=Pe.validateArray=Pe.usePattern=Pe.callValidateCode=Pe.schemaProperties=Pe.allSchemaProperties=Pe.noPropertyInData=Pe.propertyInData=Pe.isOwnProperty=Pe.hasPropFunc=Pe.reportMissingProp=Pe.checkMissingProp=Pe.checkReportMissingProp=void 0;var De=Q(),Pf=se(),un=Qt(),Sq=se();function bq(e,t){let{gen:r,data:n,it:s}=e;r.if(If(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,De._)`${t}`},!0),e.error()})}Pe.checkReportMissingProp=bq;function wq({gen:e,data:t,it:{opts:r}},n,s){return(0,De.or)(...n.map(i=>(0,De.and)(If(e,t,i,r.ownProperties),(0,De._)`${s} = ${i}`)))}Pe.checkMissingProp=wq;function Rq(e,t){e.setParams({missingProperty:t},!0),e.error()}Pe.reportMissingProp=Rq;function h_(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,De._)`Object.prototype.hasOwnProperty`})}Pe.hasPropFunc=h_;function Of(e,t,r){return(0,De._)`${h_(e)}.call(${t}, ${r})`}Pe.isOwnProperty=Of;function Tq(e,t,r,n){let s=(0,De._)`${t}${(0,De.getProperty)(r)} !== undefined`;return n?(0,De._)`${s} && ${Of(e,t,r)}`:s}Pe.propertyInData=Tq;function If(e,t,r,n){let s=(0,De._)`${t}${(0,De.getProperty)(r)} === undefined`;return n?(0,De.or)(s,(0,De.not)(Of(e,t,r))):s}Pe.noPropertyInData=If;function p_(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Pe.allSchemaProperties=p_;function $q(e,t){return p_(t).filter(r=>!(0,Pf.alwaysValidSchema)(e,t[r]))}Pe.schemaProperties=$q;function Pq({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,l,u){let c=u?(0,De._)`${e}, ${t}, ${n}${s}`:t,f=[[un.default.instancePath,(0,De.strConcat)(un.default.instancePath,i)],[un.default.parentData,o.parentData],[un.default.parentDataProperty,o.parentDataProperty],[un.default.rootData,un.default.rootData]];o.opts.dynamicRef&&f.push([un.default.dynamicAnchors,un.default.dynamicAnchors]);let h=(0,De._)`${c}, ${r.object(...f)}`;return l!==De.nil?(0,De._)`${a}.call(${l}, ${h})`:(0,De._)`${a}(${h})`}Pe.callValidateCode=Pq;var Oq=(0,De._)`new RegExp`;function Iq({gen:e,it:{opts:t}},r){let n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,De._)`${s.code==="new RegExp"?Oq:(0,Sq.useFunc)(e,s)}(${r}, ${n})`})}Pe.usePattern=Iq;function Aq(e){let{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){let a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(i,!0),o(()=>t.break()),i;function o(a){let l=t.const("len",(0,De._)`${r}.length`);t.forRange("i",0,l,u=>{e.subschema({keyword:n,dataProp:u,dataPropType:Pf.Type.Num},i),t.if((0,De.not)(i),a)})}}Pe.validateArray=Aq;function Cq(e){let{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,Pf.alwaysValidSchema)(s,l))&&!s.opts.unevaluated)return;let o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((l,u)=>{let c=e.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);t.assign(o,(0,De._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,De.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Pe.validateUnion=Cq});var g_=v(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.validateKeywordUsage=Sr.validSchemaType=Sr.funcKeywordCode=Sr.macroKeywordCode=void 0;var Rt=Q(),zn=Qt(),Nq=ht(),kq=qi();function qq(e,t){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=e,a=t.macro.call(o.self,s,i,o),l=y_(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let u=r.name("valid");e.subschema({schema:a,schemaPath:Rt.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}Sr.macroKeywordCode=qq;function jq(e,t){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:l}=e;Lq(l,t);let u=!a&&t.compile?t.compile.call(l.self,i,o,l):t.validate,c=y_(n,s,u),f=n.let("valid");e.block$data(f,h),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function h(){if(t.errors===!1)y(),t.modifying&&m_(e),S(()=>e.error());else{let _=t.async?d():m();t.modifying&&m_(e),S(()=>Dq(e,_))}}function d(){let _=n.let("ruleErrs",null);return n.try(()=>y((0,Rt._)`await `),b=>n.assign(f,!1).if((0,Rt._)`${b} instanceof ${l.ValidationError}`,()=>n.assign(_,(0,Rt._)`${b}.errors`),()=>n.throw(b))),_}function m(){let _=(0,Rt._)`${c}.errors`;return n.assign(_,null),y(Rt.nil),_}function y(_=t.async?(0,Rt._)`await `:Rt.nil){let b=l.opts.passContext?zn.default.this:zn.default.self,g=!("compile"in t&&!a||t.schema===!1);n.assign(f,(0,Rt._)`${_}${(0,Nq.callValidateCode)(e,c,b,g)}`,t.modifying)}function S(_){var b;n.if((0,Rt.not)((b=t.valid)!==null&&b!==void 0?b:f),_)}}Sr.funcKeywordCode=jq;function m_(e){let{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Rt._)`${n.parentData}[${n.parentDataProperty}]`))}function Dq(e,t){let{gen:r}=e;r.if((0,Rt._)`Array.isArray(${t})`,()=>{r.assign(zn.default.vErrors,(0,Rt._)`${zn.default.vErrors} === null ? ${t} : ${zn.default.vErrors}.concat(${t})`).assign(zn.default.errors,(0,Rt._)`${zn.default.vErrors}.length`),(0,kq.extendErrors)(e)},()=>e.error())}function Lq({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function y_(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Rt.stringify)(r)})}function xq(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Sr.validSchemaType=xq;function Fq({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){let l=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}Sr.validateKeywordUsage=Fq});var v_=v(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.extendSubschemaMode=ln.extendSubschemaData=ln.getSubschema=void 0;var br=Q(),__=se();function Mq(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,br._)`${e.schemaPath}${(0,br.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,br._)`${e.schemaPath}${(0,br.getProperty)(t)}${(0,br.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,__.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}ln.getSubschema=Mq;function Vq(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:u,dataPathArr:c,opts:f}=t,h=a.let("data",(0,br._)`${t.data}${(0,br.getProperty)(r)}`,!0);l(h),e.errorPath=(0,br.str)`${u}${(0,__.getErrorPath)(r,n,f.jsPropertySyntax)}`,e.parentDataProperty=(0,br._)`${r}`,e.dataPathArr=[...c,e.parentDataProperty]}if(s!==void 0){let u=s instanceof br.Name?s:a.let("data",s,!0);l(u),o!==void 0&&(e.propertyName=o)}i&&(e.dataTypes=i);function l(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}ln.extendSubschemaData=Vq;function zq(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}ln.extendSubschemaMode=zq});var Ns=v((IB,E_)=>{"use strict";E_.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}});var b_=v((AB,S_)=>{"use strict";var cn=S_.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};za(t,n,s,e,"",e)};cn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};cn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};cn.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};cn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function za(e,t,r,n,s,i,o,a,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,i,o,a,l,u);for(var c in n){var f=n[c];if(Array.isArray(f)){if(c in cn.arrayKeywords)for(var h=0;h<f.length;h++)za(e,t,r,f[h],s+"/"+c+"/"+h,i,s,c,n,h)}else if(c in cn.propsKeywords){if(f&&typeof f=="object")for(var d in f)za(e,t,r,f[d],s+"/"+c+"/"+Hq(d),i,s,c,n,d)}else(c in cn.keywords||e.allKeys&&!(c in cn.skipKeywords))&&za(e,t,r,f,s+"/"+c,i,s,c,n)}r(n,s,i,o,a,l,u)}}function Hq(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Li=v(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.getSchemaRefs=Nt.resolveUrl=Nt.normalizeId=Nt._getFullPath=Nt.getFullPath=Nt.inlineRef=void 0;var Uq=se(),Bq=Ns(),Gq=b_(),Kq=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Jq(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Af(e):t?w_(e)<=t:!1}Nt.inlineRef=Jq;var Yq=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Af(e){for(let t in e){if(Yq.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(Af)||typeof r=="object"&&Af(r))return!0}return!1}function w_(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!Kq.has(r)&&(typeof e[r]=="object"&&(0,Uq.eachItem)(e[r],n=>t+=w_(n)),t===1/0))return 1/0}return t}function R_(e,t="",r){r!==!1&&(t=ks(t));let n=e.parse(t);return T_(e,n)}Nt.getFullPath=R_;function T_(e,t){return e.serialize(t).split("#")[0]+"#"}Nt._getFullPath=T_;var Wq=/#\/?$/;function ks(e){return e?e.replace(Wq,""):""}Nt.normalizeId=ks;function Xq(e,t,r){return r=ks(r),e.resolve(t,r)}Nt.resolveUrl=Xq;var Qq=/^[a-z_][-a-z0-9._]*$/i;function Zq(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=ks(e[r]||t),i={"":s},o=R_(n,s,!1),a={},l=new Set;return Gq(e,{allKeys:!0},(f,h,d,m)=>{if(m===void 0)return;let y=o+h,S=i[m];typeof f[r]=="string"&&(S=_.call(this,f[r])),b.call(this,f.$anchor),b.call(this,f.$dynamicAnchor),i[h]=S;function _(g){let p=this.opts.uriResolver.resolve;if(g=ks(S?p(S,g):g),l.has(g))throw c(g);l.add(g);let T=this.refs[g];return typeof T=="string"&&(T=this.refs[T]),typeof T=="object"?u(f,T.schema,g):g!==ks(y)&&(g[0]==="#"?(u(f,a[g],g),a[g]=f):this.refs[g]=y),g}function b(g){if(typeof g=="string"){if(!Qq.test(g))throw new Error(`invalid anchor "${g}"`);_.call(this,`#${g}`)}}}),a;function u(f,h,d){if(h!==void 0&&!Bq(f,h))throw c(d)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Nt.getSchemaRefs=Zq});var qs=v(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.getData=fn.KeywordCxt=fn.validateFunctionCode=void 0;var A_=i_(),$_=Di(),Nf=wf(),Ha=Di(),ej=d_(),Fi=g_(),Cf=v_(),Y=Q(),ee=Qt(),tj=Li(),Dr=se(),xi=qi();function rj(e){if(k_(e)&&(q_(e),N_(e))){ij(e);return}C_(e,()=>(0,A_.topBoolOrEmptySchema)(e))}fn.validateFunctionCode=rj;function C_({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,Y._)`${ee.default.data}, ${ee.default.valCxt}`,n.$async,()=>{e.code((0,Y._)`"use strict"; ${P_(r,s)}`),sj(e,s),e.code(i)}):e.func(t,(0,Y._)`${ee.default.data}, ${nj(s)}`,n.$async,()=>e.code(P_(r,s)).code(i))}function nj(e){return(0,Y._)`{${ee.default.instancePath}="", ${ee.default.parentData}, ${ee.default.parentDataProperty}, ${ee.default.rootData}=${ee.default.data}${e.dynamicRef?(0,Y._)`, ${ee.default.dynamicAnchors}={}`:Y.nil}}={}`}function sj(e,t){e.if(ee.default.valCxt,()=>{e.var(ee.default.instancePath,(0,Y._)`${ee.default.valCxt}.${ee.default.instancePath}`),e.var(ee.default.parentData,(0,Y._)`${ee.default.valCxt}.${ee.default.parentData}`),e.var(ee.default.parentDataProperty,(0,Y._)`${ee.default.valCxt}.${ee.default.parentDataProperty}`),e.var(ee.default.rootData,(0,Y._)`${ee.default.valCxt}.${ee.default.rootData}`),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,Y._)`${ee.default.valCxt}.${ee.default.dynamicAnchors}`)},()=>{e.var(ee.default.instancePath,(0,Y._)`""`),e.var(ee.default.parentData,(0,Y._)`undefined`),e.var(ee.default.parentDataProperty,(0,Y._)`undefined`),e.var(ee.default.rootData,ee.default.data),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,Y._)`{}`)})}function ij(e){let{schema:t,opts:r,gen:n}=e;C_(e,()=>{r.$comment&&t.$comment&&D_(e),cj(e),n.let(ee.default.vErrors,null),n.let(ee.default.errors,0),r.unevaluated&&oj(e),j_(e),hj(e)})}function oj(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,Y._)`${r}.evaluated`),t.if((0,Y._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Y._)`${e.evaluated}.props`,(0,Y._)`undefined`)),t.if((0,Y._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Y._)`${e.evaluated}.items`,(0,Y._)`undefined`))}function P_(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,Y._)`/*# sourceURL=${r} */`:Y.nil}function aj(e,t){if(k_(e)&&(q_(e),N_(e))){uj(e,t);return}(0,A_.boolOrEmptySchema)(e,t)}function N_({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function k_(e){return typeof e.schema!="boolean"}function uj(e,t){let{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&D_(e),fj(e),dj(e);let i=n.const("_errs",ee.default.errors);j_(e,i),n.var(t,(0,Y._)`${i} === ${ee.default.errors}`)}function q_(e){(0,Dr.checkUnknownRules)(e),lj(e)}function j_(e,t){if(e.opts.jtd)return O_(e,[],!1,t);let r=(0,$_.getSchemaTypes)(e.schema),n=(0,$_.coerceAndCheckDataType)(e,r);O_(e,r,!n,t)}function lj(e){let{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Dr.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function cj(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Dr.checkStrictMode)(e,"default is ignored in the schema root")}function fj(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,tj.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function dj(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function D_({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)e.code((0,Y._)`${ee.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Y.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Y._)`${ee.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function hj(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,Y._)`${ee.default.errors} === 0`,()=>t.return(ee.default.data),()=>t.throw((0,Y._)`new ${s}(${ee.default.vErrors})`)):(t.assign((0,Y._)`${n}.errors`,ee.default.vErrors),i.unevaluated&&pj(e),t.return((0,Y._)`${ee.default.errors} === 0`))}function pj({gen:e,evaluated:t,props:r,items:n}){r instanceof Y.Name&&e.assign((0,Y._)`${t}.props`,r),n instanceof Y.Name&&e.assign((0,Y._)`${t}.items`,n)}function O_(e,t,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:l,self:u}=e,{RULES:c}=u;if(i.$ref&&(l.ignoreKeywordsWithRef||!(0,Dr.schemaHasRulesButRef)(i,c))){s.block(()=>x_(e,"$ref",c.all.$ref.definition));return}l.jtd||mj(e,t),s.block(()=>{for(let h of c.rules)f(h);f(c.post)});function f(h){(0,Nf.shouldUseGroup)(i,h)&&(h.type?(s.if((0,Ha.checkDataType)(h.type,o,l.strictNumbers)),I_(e,h),t.length===1&&t[0]===h.type&&r&&(s.else(),(0,Ha.reportTypeError)(e)),s.endIf()):I_(e,h),a||s.if((0,Y._)`${ee.default.errors} === ${n||0}`))}}function I_(e,t){let{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,ej.assignDefaults)(e,t.type),r.block(()=>{for(let i of t.rules)(0,Nf.shouldUseRule)(n,i)&&x_(e,i.keyword,i.definition,t.type)})}function mj(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(yj(e,t),e.opts.allowUnionTypes||gj(e,t),_j(e,e.dataTypes))}function yj(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{L_(e.dataTypes,r)||kf(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Ej(e,t)}}function gj(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&kf(e,"use allowUnionTypes to allow union type keyword")}function _j(e,t){let r=e.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,Nf.shouldUseRule)(e.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>vj(t,o))&&kf(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function vj(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function L_(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Ej(e,t){let r=[];for(let n of e.dataTypes)L_(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function kf(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Dr.checkStrictMode)(e,t,e.opts.strictTypes)}var Ua=class{constructor(t,r,n){if((0,Fi.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Dr.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",F_(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Fi.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",ee.default.errors))}result(t,r,n){this.failResult((0,Y.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,Y.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,Y._)`${r} !== undefined && (${(0,Y.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?xi.reportExtraError:xi.reportError)(this,this.def.error,r)}$dataError(){(0,xi.reportError)(this,this.def.$dataError||xi.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,xi.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=Y.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=Y.nil,r=Y.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Y.or)((0,Y._)`${s} === undefined`,r)),t!==Y.nil&&n.assign(t,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==Y.nil&&n.assign(t,!1)),n.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Y.or)(o(),a());function o(){if(n.length){if(!(r instanceof Y.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,Y._)`${(0,Ha.checkDataTypes)(l,r,i.opts.strictNumbers,Ha.DataType.Wrong)}`}return Y.nil}function a(){if(s.validateSchema){let l=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,Y._)`!${l}(${r})`}return Y.nil}}subschema(t,r){let n=(0,Cf.getSubschema)(this.it,t);(0,Cf.extendSubschemaData)(n,this.it,t),(0,Cf.extendSubschemaMode)(n,t);let s={...this.it,...n,items:void 0,props:void 0};return aj(s,r),s}mergeEvaluated(t,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Dr.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Dr.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,Y.Name)),!0}};fn.KeywordCxt=Ua;function x_(e,t,r,n){let s=new Ua(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Fi.funcKeywordCode)(s,r):"macro"in r?(0,Fi.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Fi.funcKeywordCode)(s,r)}var Sj=/^\/(?:[^~]|~0|~1)*$/,bj=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function F_(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return ee.default.rootData;if(e[0]==="/"){if(!Sj.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=ee.default.rootData}else{let u=bj.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);let c=+u[1];if(s=u[2],s==="#"){if(c>=t)throw new Error(l("property/index",c));return n[t-c]}if(c>t)throw new Error(l("data",c));if(i=r[t-c],!s)return i}let o=i,a=s.split("/");for(let u of a)u&&(i=(0,Y._)`${i}${(0,Y.getProperty)((0,Dr.unescapeJsonPointer)(u))}`,o=(0,Y._)`${o} && ${i}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${t}`}}fn.getData=F_});var Mi=v(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var qf=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};jf.default=qf});var dn=v(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});var Df=Li(),Lf=class extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Df.resolveUrl)(t,r,n),this.missingSchema=(0,Df.normalizeId)((0,Df.getFullPath)(t,this.missingRef))}};xf.default=Lf});var Un=v(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.resolveSchema=Zt.getCompilingSchema=Zt.resolveRef=Zt.compileSchema=Zt.SchemaEnv=void 0;var fr=Q(),wj=Mi(),Hn=Qt(),dr=Li(),M_=se(),Rj=qs(),js=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,dr.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}};Zt.SchemaEnv=js;function Mf(e){let t=V_.call(this,e);if(t)return t;let r=(0,dr.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new fr.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;e.$async&&(a=o.scopeValue("Error",{ref:wj.default,code:(0,fr._)`require("ajv/dist/runtime/validation_error").default`}));let l=o.scopeName("validate");e.validateName=l;let u={gen:o,allErrors:this.opts.allErrors,data:Hn.default.data,parentData:Hn.default.parentData,parentDataProperty:Hn.default.parentDataProperty,dataNames:[Hn.default.data],dataPathArr:[fr.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,fr.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:fr.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,fr._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(e),(0,Rj.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);let f=o.toString();c=`${o.scopeRefs(Hn.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));let d=new Function(`${Hn.default.self}`,`${Hn.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:d}),d.errors=null,d.schema=e.schema,d.schemaEnv=e,e.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:m,items:y}=u;d.evaluated={props:m instanceof fr.Name?void 0:m,items:y instanceof fr.Name?void 0:y,dynamicProps:m instanceof fr.Name,dynamicItems:y instanceof fr.Name},d.source&&(d.source.evaluated=(0,fr.stringify)(d.evaluated))}return e.validate=d,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Zt.compileSchema=Mf;function Tj(e,t,r){var n;r=(0,dr.resolveUrl)(this.opts.uriResolver,t,r);let s=e.refs[r];if(s)return s;let i=Oj.call(this,e,r);if(i===void 0){let o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new js({schema:o,schemaId:a,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=$j.call(this,i)}Zt.resolveRef=Tj;function $j(e){return(0,dr.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Mf.call(this,e)}function V_(e){for(let t of this._compilations)if(Pj(t,e))return t}Zt.getCompilingSchema=V_;function Pj(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Oj(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Ba.call(this,e,t)}function Ba(e,t){let r=this.opts.uriResolver.parse(t),n=(0,dr._getFullPath)(this.opts.uriResolver,r),s=(0,dr.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return Ff.call(this,r,e);let i=(0,dr.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Ba.call(this,e,o);return typeof a?.schema!="object"?void 0:Ff.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Mf.call(this,o),i===(0,dr.normalizeId)(t)){let{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(s=(0,dr.resolveUrl)(this.opts.uriResolver,s,u)),new js({schema:a,schemaId:l,root:e,baseId:s})}return Ff.call(this,r,o)}}Zt.resolveSchema=Ba;var Ij=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ff(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,M_.unescapeFragment)(a)];if(l===void 0)return;r=l;let u=typeof r=="object"&&r[this.opts.schemaId];!Ij.has(a)&&u&&(t=(0,dr.resolveUrl)(this.opts.uriResolver,t,u))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,M_.schemaHasRulesButRef)(r,this.RULES)){let a=(0,dr.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=Ba.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new js({schema:r,schemaId:o,root:n,baseId:t}),i.schema!==i.root.schema)return i}});var z_=v((DB,Aj)=>{Aj.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var U_=v((Ga,H_)=>{(function(e,t){typeof Ga=="object"&&typeof H_<"u"?t(Ga):typeof define=="function"&&define.amd?define(["exports"],t):t(e.URI=e.URI||{})})(Ga,function(e){"use strict";function t(){for(var R=arguments.length,E=Array(R),$=0;$<R;$++)E[$]=arguments[$];if(E.length>1){E[0]=E[0].slice(0,-1);for(var C=E.length-1,N=1;N<C;++N)E[N]=E[N].slice(1,-1);return E[C]=E[C].slice(1),E.join("")}else return E[0]}function r(R){return"(?:"+R+")"}function n(R){return R===void 0?"undefined":R===null?"null":Object.prototype.toString.call(R).split(" ").pop().split("]").shift().toLowerCase()}function s(R){return R.toUpperCase()}function i(R){return R!=null?R instanceof Array?R:typeof R.length!="number"||R.split||R.setInterval||R.call?[R]:Array.prototype.slice.call(R):[]}function o(R,E){var $=R;if(E)for(var C in E)$[C]=E[C];return $}function a(R){var E="[A-Za-z]",$="[\\x0D]",C="[0-9]",N="[\\x22]",B=t(C,"[A-Fa-f]"),re="[\\x0A]",ye="[\\x20]",Re=r(r("%[EFef]"+B+"%"+B+B+"%"+B+B)+"|"+r("%[89A-Fa-f]"+B+"%"+B+B)+"|"+r("%"+B+B)),Qe="[\\:\\/\\?\\#\\[\\]\\@]",he="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Me=t(Qe,he),Ze=R?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Le=R?"[\\uE000-\\uF8FF]":"[]",Se=t(E,C,"[\\-\\.\\_\\~]",Ze),Ve=r(E+t(E,C,"[\\+\\-\\.]")+"*"),$e=r(r(Re+"|"+t(Se,he,"[\\:]"))+"*"),On=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("[1-9]"+C)+"|"+C),Ft=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("0?[1-9]"+C)+"|0?0?"+C),Gt=r(Ft+"\\."+Ft+"\\."+Ft+"\\."+Ft),Ae=r(B+"{1,4}"),Mt=r(r(Ae+"\\:"+Ae)+"|"+Gt),Kt=r(r(Ae+"\\:")+"{6}"+Mt),_r=r("\\:\\:"+r(Ae+"\\:")+"{5}"+Mt),In=r(r(Ae)+"?\\:\\:"+r(Ae+"\\:")+"{4}"+Mt),Cr=r(r(r(Ae+"\\:")+"{0,1}"+Ae)+"?\\:\\:"+r(Ae+"\\:")+"{3}"+Mt),_i=r(r(r(Ae+"\\:")+"{0,2}"+Ae)+"?\\:\\:"+r(Ae+"\\:")+"{2}"+Mt),Qo=r(r(r(Ae+"\\:")+"{0,3}"+Ae)+"?\\:\\:"+Ae+"\\:"+Mt),Zo=r(r(r(Ae+"\\:")+"{0,4}"+Ae)+"?\\:\\:"+Mt),as=r(r(r(Ae+"\\:")+"{0,5}"+Ae)+"?\\:\\:"+Ae),us=r(r(r(Ae+"\\:")+"{0,6}"+Ae)+"?\\:\\:"),Nr=r([Kt,_r,In,Cr,_i,Qo,Zo,as,us].join("|")),ls=r(r(Se+"|"+Re)+"+"),wl=r(Nr+"\\%25"+ls),An=r(Nr+r("\\%25|\\%(?!"+B+"{2})")+ls),UP=r("[vV]"+B+"+\\."+t(Se,he,"[\\:]")+"+"),BP=r("\\["+r(An+"|"+Nr+"|"+UP)+"\\]"),Tm=r(r(Re+"|"+t(Se,he))+"*"),vi=r(BP+"|"+Gt+"(?!"+Tm+")|"+Tm),Ei=r(C+"*"),$m=r(r($e+"@")+"?"+vi+r("\\:"+Ei)+"?"),Si=r(Re+"|"+t(Se,he,"[\\:\\@]")),GP=r(Si+"*"),Pm=r(Si+"+"),KP=r(r(Re+"|"+t(Se,he,"[\\@]"))+"+"),kr=r(r("\\/"+GP)+"*"),cs=r("\\/"+r(Pm+kr)+"?"),Rl=r(KP+kr),ea=r(Pm+kr),fs="(?!"+Si+")",Z5=r(kr+"|"+cs+"|"+Rl+"|"+ea+"|"+fs),ds=r(r(Si+"|"+t("[\\/\\?]",Le))+"*"),bi=r(r(Si+"|[\\/\\?]")+"*"),Om=r(r("\\/\\/"+$m+kr)+"|"+cs+"|"+ea+"|"+fs),JP=r(Ve+"\\:"+Om+r("\\?"+ds)+"?"+r("\\#"+bi)+"?"),YP=r(r("\\/\\/"+$m+kr)+"|"+cs+"|"+Rl+"|"+fs),WP=r(YP+r("\\?"+ds)+"?"+r("\\#"+bi)+"?"),e6=r(JP+"|"+WP),t6=r(Ve+"\\:"+Om+r("\\?"+ds)+"?"),r6="^("+Ve+")\\:"+r(r("\\/\\/("+r("("+$e+")@")+"?("+vi+")"+r("\\:("+Ei+")")+"?)")+"?("+kr+"|"+cs+"|"+ea+"|"+fs+")")+r("\\?("+ds+")")+"?"+r("\\#("+bi+")")+"?$",n6="^(){0}"+r(r("\\/\\/("+r("("+$e+")@")+"?("+vi+")"+r("\\:("+Ei+")")+"?)")+"?("+kr+"|"+cs+"|"+Rl+"|"+fs+")")+r("\\?("+ds+")")+"?"+r("\\#("+bi+")")+"?$",s6="^("+Ve+")\\:"+r(r("\\/\\/("+r("("+$e+")@")+"?("+vi+")"+r("\\:("+Ei+")")+"?)")+"?("+kr+"|"+cs+"|"+ea+"|"+fs+")")+r("\\?("+ds+")")+"?$",i6="^"+r("\\#("+bi+")")+"?$",o6="^"+r("("+$e+")@")+"?("+vi+")"+r("\\:("+Ei+")")+"?$";return{NOT_SCHEME:new RegExp(t("[^]",E,C,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",Se,he),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",Se,he),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",Se,he),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",Se,he),"g"),NOT_QUERY:new RegExp(t("[^\\%]",Se,he,"[\\:\\@\\/\\?]",Le),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",Se,he,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",Se,he),"g"),UNRESERVED:new RegExp(Se,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",Se,Me),"g"),PCT_ENCODED:new RegExp(Re,"g"),IPV4ADDRESS:new RegExp("^("+Gt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Nr+")"+r(r("\\%25|\\%(?!"+B+"{2})")+"("+ls+")")+"?\\]?$")}}var l=a(!1),u=a(!0),c=function(){function R(E,$){var C=[],N=!0,B=!1,re=void 0;try{for(var ye=E[Symbol.iterator](),Re;!(N=(Re=ye.next()).done)&&(C.push(Re.value),!($&&C.length===$));N=!0);}catch(Qe){B=!0,re=Qe}finally{try{!N&&ye.return&&ye.return()}finally{if(B)throw re}}return C}return function(E,$){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return R(E,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(R){if(Array.isArray(R)){for(var E=0,$=Array(R.length);E<R.length;E++)$[E]=R[E];return $}else return Array.from(R)},h=2147483647,d=36,m=1,y=26,S=38,_=700,b=72,g=128,p="-",T=/^xn--/,O=/[^\0-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=d-m,A=Math.floor,P=String.fromCharCode;function q(R){throw new RangeError(I[R])}function L(R,E){for(var $=[],C=R.length;C--;)$[C]=E(R[C]);return $}function X(R,E){var $=R.split("@"),C="";$.length>1&&(C=$[0]+"@",R=$[1]),R=R.replace(w,".");var N=R.split("."),B=L(N,E).join(".");return C+B}function de(R){for(var E=[],$=0,C=R.length;$<C;){var N=R.charCodeAt($++);if(N>=55296&&N<=56319&&$<C){var B=R.charCodeAt($++);(B&64512)==56320?E.push(((N&1023)<<10)+(B&1023)+65536):(E.push(N),$--)}else E.push(N)}return E}var V=function(E){return String.fromCodePoint.apply(String,f(E))},Z=function(E){return E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:d},xe=function(E,$){return E+22+75*(E<26)-(($!=0)<<5)},H=function(E,$,C){var N=0;for(E=C?A(E/_):E>>1,E+=A(E/$);E>k*y>>1;N+=d)E=A(E/k);return A(N+(k+1)*E/(E+S))},Fe=function(E){var $=[],C=E.length,N=0,B=g,re=b,ye=E.lastIndexOf(p);ye<0&&(ye=0);for(var Re=0;Re<ye;++Re)E.charCodeAt(Re)>=128&&q("not-basic"),$.push(E.charCodeAt(Re));for(var Qe=ye>0?ye+1:0;Qe<C;){for(var he=N,Me=1,Ze=d;;Ze+=d){Qe>=C&&q("invalid-input");var Le=Z(E.charCodeAt(Qe++));(Le>=d||Le>A((h-N)/Me))&&q("overflow"),N+=Le*Me;var Se=Ze<=re?m:Ze>=re+y?y:Ze-re;if(Le<Se)break;var Ve=d-Se;Me>A(h/Ve)&&q("overflow"),Me*=Ve}var $e=$.length+1;re=H(N-he,$e,he==0),A(N/$e)>h-B&&q("overflow"),B+=A(N/$e),N%=$e,$.splice(N++,0,B)}return String.fromCodePoint.apply(String,$)},St=function(E){var $=[];E=de(E);var C=E.length,N=g,B=0,re=b,ye=!0,Re=!1,Qe=void 0;try{for(var he=E[Symbol.iterator](),Me;!(ye=(Me=he.next()).done);ye=!0){var Ze=Me.value;Ze<128&&$.push(P(Ze))}}catch(An){Re=!0,Qe=An}finally{try{!ye&&he.return&&he.return()}finally{if(Re)throw Qe}}var Le=$.length,Se=Le;for(Le&&$.push(p);Se<C;){var Ve=h,$e=!0,On=!1,Ft=void 0;try{for(var Gt=E[Symbol.iterator](),Ae;!($e=(Ae=Gt.next()).done);$e=!0){var Mt=Ae.value;Mt>=N&&Mt<Ve&&(Ve=Mt)}}catch(An){On=!0,Ft=An}finally{try{!$e&&Gt.return&&Gt.return()}finally{if(On)throw Ft}}var Kt=Se+1;Ve-N>A((h-B)/Kt)&&q("overflow"),B+=(Ve-N)*Kt,N=Ve;var _r=!0,In=!1,Cr=void 0;try{for(var _i=E[Symbol.iterator](),Qo;!(_r=(Qo=_i.next()).done);_r=!0){var Zo=Qo.value;if(Zo<N&&++B>h&&q("overflow"),Zo==N){for(var as=B,us=d;;us+=d){var Nr=us<=re?m:us>=re+y?y:us-re;if(as<Nr)break;var ls=as-Nr,wl=d-Nr;$.push(P(xe(Nr+ls%wl,0))),as=A(ls/wl)}$.push(P(xe(as,0))),re=H(B,Kt,Se==Le),B=0,++Se}}}catch(An){In=!0,Cr=An}finally{try{!_r&&_i.return&&_i.return()}finally{if(In)throw Cr}}++B,++N}return $.join("")},_e=function(E){return X(E,function($){return T.test($)?Fe($.slice(4).toLowerCase()):$})},jt=function(E){return X(E,function($){return O.test($)?"xn--"+St($):$})},ct={version:"2.1.0",ucs2:{decode:de,encode:V},decode:Fe,encode:St,toASCII:jt,toUnicode:_e},me={};function te(R){var E=R.charCodeAt(0),$=void 0;return E<16?$="%0"+E.toString(16).toUpperCase():E<128?$="%"+E.toString(16).toUpperCase():E<2048?$="%"+(E>>6|192).toString(16).toUpperCase()+"%"+(E&63|128).toString(16).toUpperCase():$="%"+(E>>12|224).toString(16).toUpperCase()+"%"+(E>>6&63|128).toString(16).toUpperCase()+"%"+(E&63|128).toString(16).toUpperCase(),$}function We(R){for(var E="",$=0,C=R.length;$<C;){var N=parseInt(R.substr($+1,2),16);if(N<128)E+=String.fromCharCode(N),$+=3;else if(N>=194&&N<224){if(C-$>=6){var B=parseInt(R.substr($+4,2),16);E+=String.fromCharCode((N&31)<<6|B&63)}else E+=R.substr($,6);$+=6}else if(N>=224){if(C-$>=9){var re=parseInt(R.substr($+4,2),16),ye=parseInt(R.substr($+7,2),16);E+=String.fromCharCode((N&15)<<12|(re&63)<<6|ye&63)}else E+=R.substr($,9);$+=9}else E+=R.substr($,3),$+=3}return E}function ve(R,E){function $(C){var N=We(C);return N.match(E.UNRESERVED)?N:C}return R.scheme&&(R.scheme=String(R.scheme).replace(E.PCT_ENCODED,$).toLowerCase().replace(E.NOT_SCHEME,"")),R.userinfo!==void 0&&(R.userinfo=String(R.userinfo).replace(E.PCT_ENCODED,$).replace(E.NOT_USERINFO,te).replace(E.PCT_ENCODED,s)),R.host!==void 0&&(R.host=String(R.host).replace(E.PCT_ENCODED,$).toLowerCase().replace(E.NOT_HOST,te).replace(E.PCT_ENCODED,s)),R.path!==void 0&&(R.path=String(R.path).replace(E.PCT_ENCODED,$).replace(R.scheme?E.NOT_PATH:E.NOT_PATH_NOSCHEME,te).replace(E.PCT_ENCODED,s)),R.query!==void 0&&(R.query=String(R.query).replace(E.PCT_ENCODED,$).replace(E.NOT_QUERY,te).replace(E.PCT_ENCODED,s)),R.fragment!==void 0&&(R.fragment=String(R.fragment).replace(E.PCT_ENCODED,$).replace(E.NOT_FRAGMENT,te).replace(E.PCT_ENCODED,s)),R}function j(R){return R.replace(/^0*(.*)/,"$1")||"0"}function x(R,E){var $=R.match(E.IPV4ADDRESS)||[],C=c($,2),N=C[1];return N?N.split(".").map(j).join("."):R}function M(R,E){var $=R.match(E.IPV6ADDRESS)||[],C=c($,3),N=C[1],B=C[2];if(N){for(var re=N.toLowerCase().split("::").reverse(),ye=c(re,2),Re=ye[0],Qe=ye[1],he=Qe?Qe.split(":").map(j):[],Me=Re.split(":").map(j),Ze=E.IPV4ADDRESS.test(Me[Me.length-1]),Le=Ze?7:8,Se=Me.length-Le,Ve=Array(Le),$e=0;$e<Le;++$e)Ve[$e]=he[$e]||Me[Se+$e]||"";Ze&&(Ve[Le-1]=x(Ve[Le-1],E));var On=Ve.reduce(function(Kt,_r,In){if(!_r||_r==="0"){var Cr=Kt[Kt.length-1];Cr&&Cr.index+Cr.length===In?Cr.length++:Kt.push({index:In,length:1})}return Kt},[]),Ft=On.sort(function(Kt,_r){return _r.length-Kt.length})[0],Gt=void 0;if(Ft&&Ft.length>1){var Ae=Ve.slice(0,Ft.index),Mt=Ve.slice(Ft.index+Ft.length);Gt=Ae.join(":")+"::"+Mt.join(":")}else Gt=Ve.join(":");return B&&(Gt+="%"+B),Gt}else return R}var z=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ee="".match(/(){0}/)[1]===void 0;function J(R){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$={},C=E.iri!==!1?u:l;E.reference==="suffix"&&(R=(E.scheme?E.scheme+":":"")+"//"+R);var N=R.match(z);if(N){Ee?($.scheme=N[1],$.userinfo=N[3],$.host=N[4],$.port=parseInt(N[5],10),$.path=N[6]||"",$.query=N[7],$.fragment=N[8],isNaN($.port)&&($.port=N[5])):($.scheme=N[1]||void 0,$.userinfo=R.indexOf("@")!==-1?N[3]:void 0,$.host=R.indexOf("//")!==-1?N[4]:void 0,$.port=parseInt(N[5],10),$.path=N[6]||"",$.query=R.indexOf("?")!==-1?N[7]:void 0,$.fragment=R.indexOf("#")!==-1?N[8]:void 0,isNaN($.port)&&($.port=R.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?N[4]:void 0)),$.host&&($.host=M(x($.host,C),C)),$.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&!$.path&&$.query===void 0?$.reference="same-document":$.scheme===void 0?$.reference="relative":$.fragment===void 0?$.reference="absolute":$.reference="uri",E.reference&&E.reference!=="suffix"&&E.reference!==$.reference&&($.error=$.error||"URI is not a "+E.reference+" reference.");var B=me[(E.scheme||$.scheme||"").toLowerCase()];if(!E.unicodeSupport&&(!B||!B.unicodeSupport)){if($.host&&(E.domainHost||B&&B.domainHost))try{$.host=ct.toASCII($.host.replace(C.PCT_ENCODED,We).toLowerCase())}catch(re){$.error=$.error||"Host's domain name can not be converted to ASCII via punycode: "+re}ve($,l)}else ve($,C);B&&B.parse&&B.parse($,E)}else $.error=$.error||"URI can not be parsed.";return $}function Oe(R,E){var $=E.iri!==!1?u:l,C=[];return R.userinfo!==void 0&&(C.push(R.userinfo),C.push("@")),R.host!==void 0&&C.push(M(x(String(R.host),$),$).replace($.IPV6ADDRESS,function(N,B,re){return"["+B+(re?"%25"+re:"")+"]"})),(typeof R.port=="number"||typeof R.port=="string")&&(C.push(":"),C.push(String(R.port))),C.length?C.join(""):void 0}var Be=/^\.\.?\//,Ie=/^\/\.(\/|$)/,nt=/^\/\.\.(\/|$)/,xP=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(R){for(var E=[];R.length;)if(R.match(Be))R=R.replace(Be,"");else if(R.match(Ie))R=R.replace(Ie,"/");else if(R.match(nt))R=R.replace(nt,"/"),E.pop();else if(R==="."||R==="..")R="";else{var $=R.match(xP);if($){var C=$[0];R=R.slice(C.length),E.push(C)}else throw new Error("Unexpected dot segment condition")}return E.join("")}function rt(R){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=E.iri?u:l,C=[],N=me[(E.scheme||R.scheme||"").toLowerCase()];if(N&&N.serialize&&N.serialize(R,E),R.host&&!$.IPV6ADDRESS.test(R.host)){if(E.domainHost||N&&N.domainHost)try{R.host=E.iri?ct.toUnicode(R.host):ct.toASCII(R.host.replace($.PCT_ENCODED,We).toLowerCase())}catch(ye){R.error=R.error||"Host's domain name can not be converted to "+(E.iri?"Unicode":"ASCII")+" via punycode: "+ye}}ve(R,$),E.reference!=="suffix"&&R.scheme&&(C.push(R.scheme),C.push(":"));var B=Oe(R,E);if(B!==void 0&&(E.reference!=="suffix"&&C.push("//"),C.push(B),R.path&&R.path.charAt(0)!=="/"&&C.push("/")),R.path!==void 0){var re=R.path;!E.absolutePath&&(!N||!N.absolutePath)&&(re=Ge(re)),B===void 0&&(re=re.replace(/^\/\//,"/%2F")),C.push(re)}return R.query!==void 0&&(C.push("?"),C.push(R.query)),R.fragment!==void 0&&(C.push("#"),C.push(R.fragment)),C.join("")}function Sm(R,E){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments[3],N={};return C||(R=J(rt(R,$),$),E=J(rt(E,$),$)),$=$||{},!$.tolerant&&E.scheme?(N.scheme=E.scheme,N.userinfo=E.userinfo,N.host=E.host,N.port=E.port,N.path=Ge(E.path||""),N.query=E.query):(E.userinfo!==void 0||E.host!==void 0||E.port!==void 0?(N.userinfo=E.userinfo,N.host=E.host,N.port=E.port,N.path=Ge(E.path||""),N.query=E.query):(E.path?(E.path.charAt(0)==="/"?N.path=Ge(E.path):((R.userinfo!==void 0||R.host!==void 0||R.port!==void 0)&&!R.path?N.path="/"+E.path:R.path?N.path=R.path.slice(0,R.path.lastIndexOf("/")+1)+E.path:N.path=E.path,N.path=Ge(N.path)),N.query=E.query):(N.path=R.path,E.query!==void 0?N.query=E.query:N.query=R.query),N.userinfo=R.userinfo,N.host=R.host,N.port=R.port),N.scheme=R.scheme),N.fragment=E.fragment,N}function ir(R,E,$){var C=o({scheme:"null"},$);return rt(Sm(J(R,C),J(E,C),C,!0),C)}function Ir(R,E){return typeof R=="string"?R=rt(J(R,E),E):n(R)==="object"&&(R=J(rt(R,E),E)),R}function yi(R,E,$){return typeof R=="string"?R=rt(J(R,$),$):n(R)==="object"&&(R=rt(R,$)),typeof E=="string"?E=rt(J(E,$),$):n(E)==="object"&&(E=rt(E,$)),R===E}function Wr(R,E){return R&&R.toString().replace(!E||!E.iri?l.ESCAPE:u.ESCAPE,te)}function or(R,E){return R&&R.toString().replace(!E||!E.iri?l.PCT_ENCODED:u.PCT_ENCODED,We)}var gi={scheme:"http",domainHost:!0,parse:function(E,$){return E.host||(E.error=E.error||"HTTP URIs must have a host."),E},serialize:function(E,$){var C=String(E.scheme).toLowerCase()==="https";return(E.port===(C?443:80)||E.port==="")&&(E.port=void 0),E.path||(E.path="/"),E}},yt={scheme:"https",domainHost:gi.domainHost,parse:gi.parse,serialize:gi.serialize};function Wo(R){return typeof R.secure=="boolean"?R.secure:String(R.scheme).toLowerCase()==="wss"}var Xr={scheme:"ws",domainHost:!0,parse:function(E,$){var C=E;return C.secure=Wo(C),C.resourceName=(C.path||"/")+(C.query?"?"+C.query:""),C.path=void 0,C.query=void 0,C},serialize:function(E,$){if((E.port===(Wo(E)?443:80)||E.port==="")&&(E.port=void 0),typeof E.secure=="boolean"&&(E.scheme=E.secure?"wss":"ws",E.secure=void 0),E.resourceName){var C=E.resourceName.split("?"),N=c(C,2),B=N[0],re=N[1];E.path=B&&B!=="/"?B:void 0,E.query=re,E.resourceName=void 0}return E.fragment=void 0,E}},je={scheme:"wss",domainHost:Xr.domainHost,parse:Xr.parse,serialize:Xr.serialize},Dt={},FP=!0,Lt="[A-Za-z0-9\\-\\.\\_\\~"+(FP?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",st="[0-9A-Fa-f]",MP=r(r("%[EFef]"+st+"%"+st+st+"%"+st+st)+"|"+r("%[89A-Fa-f]"+st+"%"+st+st)+"|"+r("%"+st+st)),Xe="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Pn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",VP=t(Pn,'[\\"\\\\]'),ar="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",xt=new RegExp(Lt,"g"),Ar=new RegExp(MP,"g"),Qr=new RegExp(t("[^]",Xe,"[\\.]",'[\\"]',VP),"g"),Zr=new RegExp(t("[^]",Lt,ar),"g"),Xo=Zr;function gr(R){var E=We(R);return E.match(xt)?E:R}var bm={scheme:"mailto",parse:function(E,$){var C=E,N=C.to=C.path?C.path.split(","):[];if(C.path=void 0,C.query){for(var B=!1,re={},ye=C.query.split("&"),Re=0,Qe=ye.length;Re<Qe;++Re){var he=ye[Re].split("=");switch(he[0]){case"to":for(var Me=he[1].split(","),Ze=0,Le=Me.length;Ze<Le;++Ze)N.push(Me[Ze]);break;case"subject":C.subject=or(he[1],$);break;case"body":C.body=or(he[1],$);break;default:B=!0,re[or(he[0],$)]=or(he[1],$);break}}B&&(C.headers=re)}C.query=void 0;for(var Se=0,Ve=N.length;Se<Ve;++Se){var $e=N[Se].split("@");if($e[0]=or($e[0]),$.unicodeSupport)$e[1]=or($e[1],$).toLowerCase();else try{$e[1]=ct.toASCII(or($e[1],$).toLowerCase())}catch(On){C.error=C.error||"Email address's domain name can not be converted to ASCII via punycode: "+On}N[Se]=$e.join("@")}return C},serialize:function(E,$){var C=E,N=i(E.to);if(N){for(var B=0,re=N.length;B<re;++B){var ye=String(N[B]),Re=ye.lastIndexOf("@"),Qe=ye.slice(0,Re).replace(Ar,gr).replace(Ar,s).replace(Qr,te),he=ye.slice(Re+1);try{he=$.iri?ct.toUnicode(he):ct.toASCII(or(he,$).toLowerCase())}catch(Se){C.error=C.error||"Email address's domain name can not be converted to "+($.iri?"Unicode":"ASCII")+" via punycode: "+Se}N[B]=Qe+"@"+he}C.path=N.join(",")}var Me=E.headers=E.headers||{};E.subject&&(Me.subject=E.subject),E.body&&(Me.body=E.body);var Ze=[];for(var Le in Me)Me[Le]!==Dt[Le]&&Ze.push(Le.replace(Ar,gr).replace(Ar,s).replace(Zr,te)+"="+Me[Le].replace(Ar,gr).replace(Ar,s).replace(Xo,te));return Ze.length&&(C.query=Ze.join("&")),C}},zP=/^([^\:]+)\:(.*)/,wm={scheme:"urn",parse:function(E,$){var C=E.path&&E.path.match(zP),N=E;if(C){var B=$.scheme||N.scheme||"urn",re=C[1].toLowerCase(),ye=C[2],Re=B+":"+($.nid||re),Qe=me[Re];N.nid=re,N.nss=ye,N.path=void 0,Qe&&(N=Qe.parse(N,$))}else N.error=N.error||"URN can not be parsed.";return N},serialize:function(E,$){var C=$.scheme||E.scheme||"urn",N=E.nid,B=C+":"+($.nid||N),re=me[B];re&&(E=re.serialize(E,$));var ye=E,Re=E.nss;return ye.path=(N||$.nid)+":"+Re,ye}},HP=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Rm={scheme:"urn:uuid",parse:function(E,$){var C=E;return C.uuid=C.nss,C.nss=void 0,!$.tolerant&&(!C.uuid||!C.uuid.match(HP))&&(C.error=C.error||"UUID is not valid."),C},serialize:function(E,$){var C=E;return C.nss=(E.uuid||"").toLowerCase(),C}};me[gi.scheme]=gi,me[yt.scheme]=yt,me[Xr.scheme]=Xr,me[je.scheme]=je,me[bm.scheme]=bm,me[wm.scheme]=wm,me[Rm.scheme]=Rm,e.SCHEMES=me,e.pctEncChar=te,e.pctDecChars=We,e.parse=J,e.removeDotSegments=Ge,e.serialize=rt,e.resolveComponents=Sm,e.resolve=ir,e.normalize=Ir,e.equal=yi,e.escapeComponent=Wr,e.unescapeComponent=or,Object.defineProperty(e,"__esModule",{value:!0})})});var G_=v(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});var B_=U_();B_.code='require("ajv/dist/runtime/uri").default';Vf.default=B_});var Uf=v(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.CodeGen=pt.Name=pt.nil=pt.stringify=pt.str=pt._=pt.KeywordCxt=void 0;var Cj=qs();Object.defineProperty(pt,"KeywordCxt",{enumerable:!0,get:function(){return Cj.KeywordCxt}});var Ds=Q();Object.defineProperty(pt,"_",{enumerable:!0,get:function(){return Ds._}});Object.defineProperty(pt,"str",{enumerable:!0,get:function(){return Ds.str}});Object.defineProperty(pt,"stringify",{enumerable:!0,get:function(){return Ds.stringify}});Object.defineProperty(pt,"nil",{enumerable:!0,get:function(){return Ds.nil}});Object.defineProperty(pt,"Name",{enumerable:!0,get:function(){return Ds.Name}});Object.defineProperty(pt,"CodeGen",{enumerable:!0,get:function(){return Ds.CodeGen}});var Nj=Mi(),X_=dn(),kj=bf(),Vi=Un(),qj=Q(),zi=Li(),Ka=Di(),Hf=se(),K_=z_(),jj=G_(),Q_=(e,t)=>new RegExp(e,t);Q_.code="new RegExp";var Dj=["removeAdditional","useDefaults","coerceTypes"],Lj=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),xj={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Fj={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},J_=200;function Mj(e){var t,r,n,s,i,o,a,l,u,c,f,h,d,m,y,S,_,b,g,p,T,O,w,I,k;let A=e.strict,P=(t=e.code)===null||t===void 0?void 0:t.optimize,q=P===!0||P===void 0?1:P||0,L=(n=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Q_,X=(s=e.uriResolver)!==null&&s!==void 0?s:jj.default;return{strictSchema:(o=(i=e.strictSchema)!==null&&i!==void 0?i:A)!==null&&o!==void 0?o:!0,strictNumbers:(l=(a=e.strictNumbers)!==null&&a!==void 0?a:A)!==null&&l!==void 0?l:!0,strictTypes:(c=(u=e.strictTypes)!==null&&u!==void 0?u:A)!==null&&c!==void 0?c:"log",strictTuples:(h=(f=e.strictTuples)!==null&&f!==void 0?f:A)!==null&&h!==void 0?h:"log",strictRequired:(m=(d=e.strictRequired)!==null&&d!==void 0?d:A)!==null&&m!==void 0?m:!1,code:e.code?{...e.code,optimize:q,regExp:L}:{optimize:q,regExp:L},loopRequired:(y=e.loopRequired)!==null&&y!==void 0?y:J_,loopEnum:(S=e.loopEnum)!==null&&S!==void 0?S:J_,meta:(_=e.meta)!==null&&_!==void 0?_:!0,messages:(b=e.messages)!==null&&b!==void 0?b:!0,inlineRefs:(g=e.inlineRefs)!==null&&g!==void 0?g:!0,schemaId:(p=e.schemaId)!==null&&p!==void 0?p:"$id",addUsedSchema:(T=e.addUsedSchema)!==null&&T!==void 0?T:!0,validateSchema:(O=e.validateSchema)!==null&&O!==void 0?O:!0,validateFormats:(w=e.validateFormats)!==null&&w!==void 0?w:!0,unicodeRegExp:(I=e.unicodeRegExp)!==null&&I!==void 0?I:!0,int32range:(k=e.int32range)!==null&&k!==void 0?k:!0,uriResolver:X}}var Hi=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...Mj(t)};let{es5:r,lines:n}=this.opts.code;this.scope=new qj.ValueScope({scope:{},prefixes:Lj,es5:r,lines:n}),this.logger=Gj(t.logger);let s=t.validateFormats;t.validateFormats=!1,this.RULES=(0,kj.getRules)(),Y_.call(this,xj,t,"NOT SUPPORTED"),Y_.call(this,Fj,t,"DEPRECATED","warn"),this._metaOpts=Uj.call(this),t.formats&&zj.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&Hj.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),Vj.call(this),t.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:n}=this.opts,s=K_;n==="id"&&(s={...K_},s.id=s.$id,delete s.$id),r&&t&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let n;if(typeof t=="string"){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(t,r){let n=this._addSchema(t,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,t,r);async function s(c,f){await i.call(this,c.$schema);let h=this._addSchema(c,f);return h.validate||o.call(this,h)}async function i(c){c&&!this.getSchema(c)&&await s.call(this,{$ref:c},!0)}async function o(c){try{return this._compileSchemaEnv(c)}catch(f){if(!(f instanceof X_.default))throw f;return a.call(this,f),await l.call(this,f.missingSchema),o.call(this,c)}}function a({missingSchema:c,missingRef:f}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${f} cannot be resolved`)}async function l(c){let f=await u.call(this,c);this.refs[c]||await i.call(this,f.$schema),this.refs[c]||this.addSchema(f,c,r)}async function u(c){let f=this._loading[c];if(f)return f;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(t,r,n,s=this.opts.validateSchema){if(Array.isArray(t)){for(let o of t)this.addSchema(o,void 0,n,s);return this}let i;if(typeof t=="object"){let{schemaId:o}=this.opts;if(i=t[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,zi.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,s,!0),this}addMetaSchema(t,r,n=this.opts.validateSchema){return this.addSchema(t,r,!0,n),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let n;if(n=t.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,t);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(t){let r;for(;typeof(r=W_.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Vi.SchemaEnv({schema:{},schemaId:n});if(r=Vi.resolveSchema.call(this,s,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=W_.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let n=t[this.opts.schemaId];return n&&(n=(0,zi.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let n;if(typeof t=="string")n=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof t=="object"&&r===void 0){if(r=t,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Jj.call(this,n,r),!r)return(0,Hf.eachItem)(n,i=>zf.call(this,i)),this;Wj.call(this,r);let s={...r,type:(0,Ka.getJSONTypes)(r.type),schemaType:(0,Ka.getJSONTypes)(r.schemaType)};return(0,Hf.eachItem)(n,s.type.length===0?i=>zf.call(this,i,s):i=>s.type.forEach(o=>zf.call(this,i,s,o))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===t);s>=0&&n.rules.splice(s,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!t||t.length===0?"No errors":t.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(t,r){let n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let s of r){let i=s.split("/").slice(1),o=t;for(let a of i)o=o[a];for(let a in n){let l=n[a];if(typeof l!="object")continue;let{$data:u}=l.definition,c=o[a];u&&c&&(o[a]=Z_(c))}}return t}_removeAllSchemas(t,r){for(let n in t){let s=t[n];(!r||r.test(n))&&(typeof s=="string"?delete t[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete t[n]))}}_addSchema(t,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof t=="object")o=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(t);if(l!==void 0)return l;n=(0,zi.normalizeId)(o||n);let u=zi.getSchemaRefs.call(this,t,n);return l=new Vi.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:n,localRefs:u}),this._cache.set(l.schema,l),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),s&&this.validateSchema(t,!0),l}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Vi.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Vi.compileSchema.call(this,t)}finally{this.opts=r}}};pt.default=Hi;Hi.ValidationError=Nj.default;Hi.MissingRefError=X_.default;function Y_(e,t,r,n="error"){for(let s in e){let i=s;i in t&&this.logger[n](`${r}: option ${s}. ${e[i]}`)}}function W_(e){return e=(0,zi.normalizeId)(e),this.schemas[e]||this.refs[e]}function Vj(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function zj(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function Hj(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function Uj(){let e={...this.opts};for(let t of Dj)delete e[t];return e}var Bj={log(){},warn(){},error(){}};function Gj(e){if(e===!1)return Bj;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var Kj=/^[a-z_$][a-z0-9_$:-]*$/i;function Jj(e,t){let{RULES:r}=this;if((0,Hf.eachItem)(e,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Kj.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function zf(e,t,r){var n;let s=t?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:l})=>l===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,Ka.getJSONTypes)(t.type),schemaType:(0,Ka.getJSONTypes)(t.schemaType)}};t.before?Yj.call(this,o,a,t.before):o.rules.push(a),i.all[e]=a,(n=t.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function Yj(e,t,r){let n=e.rules.findIndex(s=>s.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function Wj(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=Z_(t)),e.validateSchema=this.compile(t,!0))}var Xj={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Z_(e){return{anyOf:[e,Xj]}}});var ev=v(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});var Qj={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Bf.default=Qj});var Gf=v(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.callRef=Bn.getValidate=void 0;var Zj=dn(),tv=ht(),kt=Q(),Ls=Qt(),rv=Un(),Ja=se(),eD={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:l}=n,{root:u}=i;if((r==="#"||r==="#/")&&s===u.baseId)return f();let c=rv.resolveRef.call(l,u,s,r);if(c===void 0)throw new Zj.default(n.opts.uriResolver,s,r);if(c instanceof rv.SchemaEnv)return h(c);return d(c);function f(){if(i===u)return Ya(e,o,i,i.$async);let m=t.scopeValue("root",{ref:u});return Ya(e,(0,kt._)`${m}.validate`,u,u.$async)}function h(m){let y=nv(e,m);Ya(e,y,m,m.$async)}function d(m){let y=t.scopeValue("schema",a.code.source===!0?{ref:m,code:(0,kt.stringify)(m)}:{ref:m}),S=t.name("valid"),_=e.subschema({schema:m,dataTypes:[],schemaPath:kt.nil,topSchemaRef:y,errSchemaPath:r},S);e.mergeEvaluated(_),e.ok(S)}}};function nv(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,kt._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Bn.getValidate=nv;function Ya(e,t,r,n){let{gen:s,it:i}=e,{allErrors:o,schemaEnv:a,opts:l}=i,u=l.passContext?Ls.default.this:kt.nil;n?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");let m=s.let("valid");s.try(()=>{s.code((0,kt._)`await ${(0,tv.callValidateCode)(e,t,u)}`),d(t),o||s.assign(m,!0)},y=>{s.if((0,kt._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),h(y),o||s.assign(m,!1)}),e.ok(m)}function f(){e.result((0,tv.callValidateCode)(e,t,u),()=>d(t),()=>h(t))}function h(m){let y=(0,kt._)`${m}.errors`;s.assign(Ls.default.vErrors,(0,kt._)`${Ls.default.vErrors} === null ? ${y} : ${Ls.default.vErrors}.concat(${y})`),s.assign(Ls.default.errors,(0,kt._)`${Ls.default.vErrors}.length`)}function d(m){var y;if(!i.opts.unevaluated)return;let S=(y=r?.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(S&&!S.dynamicProps)S.props!==void 0&&(i.props=Ja.mergeEvaluated.props(s,S.props,i.props));else{let _=s.var("props",(0,kt._)`${m}.evaluated.props`);i.props=Ja.mergeEvaluated.props(s,_,i.props,kt.Name)}if(i.items!==!0)if(S&&!S.dynamicItems)S.items!==void 0&&(i.items=Ja.mergeEvaluated.items(s,S.items,i.items));else{let _=s.var("items",(0,kt._)`${m}.evaluated.items`);i.items=Ja.mergeEvaluated.items(s,_,i.items,kt.Name)}}}Bn.callRef=Ya;Bn.default=eD});var sv=v(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var tD=ev(),rD=Gf(),nD=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",tD.default,rD.default];Kf.default=nD});var iv=v(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var Wa=Q(),hn=Wa.operators,Xa={maximum:{okStr:"<=",ok:hn.LTE,fail:hn.GT},minimum:{okStr:">=",ok:hn.GTE,fail:hn.LT},exclusiveMaximum:{okStr:"<",ok:hn.LT,fail:hn.GTE},exclusiveMinimum:{okStr:">",ok:hn.GT,fail:hn.LTE}},sD={message:({keyword:e,schemaCode:t})=>(0,Wa.str)`must be ${Xa[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Wa._)`{comparison: ${Xa[e].okStr}, limit: ${t}}`},iD={keyword:Object.keys(Xa),type:"number",schemaType:"number",$data:!0,error:sD,code(e){let{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Wa._)`${r} ${Xa[t].fail} ${n} || isNaN(${r})`)}};Jf.default=iD});var ov=v(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var Ui=Q(),oD={message:({schemaCode:e})=>(0,Ui.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Ui._)`{multipleOf: ${e}}`},aD={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:oD,code(e){let{gen:t,data:r,schemaCode:n,it:s}=e,i=s.opts.multipleOfPrecision,o=t.let("res"),a=i?(0,Ui._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Ui._)`${o} !== parseInt(${o})`;e.fail$data((0,Ui._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Yf.default=aD});var uv=v(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});function av(e){let t=e.length,r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}Wf.default=av;av.code='require("ajv/dist/runtime/ucs2length").default'});var lv=v(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});var Gn=Q(),uD=se(),lD=uv(),cD={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,Gn.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Gn._)`{limit: ${e}}`},fD={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:cD,code(e){let{keyword:t,data:r,schemaCode:n,it:s}=e,i=t==="maxLength"?Gn.operators.GT:Gn.operators.LT,o=s.opts.unicode===!1?(0,Gn._)`${r}.length`:(0,Gn._)`${(0,uD.useFunc)(e.gen,lD.default)}(${r})`;e.fail$data((0,Gn._)`${o} ${i} ${n}`)}};Xf.default=fD});var cv=v(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var dD=ht(),Qa=Q(),hD={message:({schemaCode:e})=>(0,Qa.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Qa._)`{pattern: ${e}}`},pD={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:hD,code(e){let{data:t,$data:r,schema:n,schemaCode:s,it:i}=e,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Qa._)`(new RegExp(${s}, ${o}))`:(0,dD.usePattern)(e,n);e.fail$data((0,Qa._)`!${a}.test(${t})`)}};Qf.default=pD});var fv=v(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});var Bi=Q(),mD={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Bi.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Bi._)`{limit: ${e}}`},yD={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:mD,code(e){let{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?Bi.operators.GT:Bi.operators.LT;e.fail$data((0,Bi._)`Object.keys(${r}).length ${s} ${n}`)}};Zf.default=yD});var dv=v(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});var Gi=ht(),Ki=Q(),gD=se(),_D={message:({params:{missingProperty:e}})=>(0,Ki.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Ki._)`{missingProperty: ${e}}`},vD={keyword:"required",type:"object",schemaType:"array",$data:!0,error:_D,code(e){let{gen:t,schema:r,schemaCode:n,data:s,$data:i,it:o}=e,{opts:a}=o;if(!i&&r.length===0)return;let l=r.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){let d=e.parentSchema.properties,{definedProperties:m}=e.it;for(let y of r)if(d?.[y]===void 0&&!m.has(y)){let S=o.schemaEnv.baseId+o.errSchemaPath,_=`required property "${y}" is not defined at "${S}" (strictRequired)`;(0,gD.checkStrictMode)(o,_,o.opts.strictRequired)}}function u(){if(l||i)e.block$data(Ki.nil,f);else for(let d of r)(0,Gi.checkReportMissingProp)(e,d)}function c(){let d=t.let("missing");if(l||i){let m=t.let("valid",!0);e.block$data(m,()=>h(d,m)),e.ok(m)}else t.if((0,Gi.checkMissingProp)(e,r,d)),(0,Gi.reportMissingProp)(e,d),t.else()}function f(){t.forOf("prop",n,d=>{e.setParams({missingProperty:d}),t.if((0,Gi.noPropertyInData)(t,s,d,a.ownProperties),()=>e.error())})}function h(d,m){e.setParams({missingProperty:d}),t.forOf(d,n,()=>{t.assign(m,(0,Gi.propertyInData)(t,s,d,a.ownProperties)),t.if((0,Ki.not)(m),()=>{e.error(),t.break()})},Ki.nil)}}};ed.default=vD});var hv=v(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});var Ji=Q(),ED={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,Ji.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Ji._)`{limit: ${e}}`},SD={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:ED,code(e){let{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?Ji.operators.GT:Ji.operators.LT;e.fail$data((0,Ji._)`${r}.length ${s} ${n}`)}};td.default=SD});var Yi=v(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});var pv=Ns();pv.code='require("ajv/dist/runtime/equal").default';rd.default=pv});var mv=v(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var nd=Di(),mt=Q(),bD=se(),wD=Yi(),RD={message:({params:{i:e,j:t}})=>(0,mt.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,mt._)`{i: ${e}, j: ${t}}`},TD={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:RD,code(e){let{gen:t,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=e;if(!n&&!s)return;let l=t.let("valid"),u=i.items?(0,nd.getSchemaTypes)(i.items):[];e.block$data(l,c,(0,mt._)`${o} === false`),e.ok(l);function c(){let m=t.let("i",(0,mt._)`${r}.length`),y=t.let("j");e.setParams({i:m,j:y}),t.assign(l,!0),t.if((0,mt._)`${m} > 1`,()=>(f()?h:d)(m,y))}function f(){return u.length>0&&!u.some(m=>m==="object"||m==="array")}function h(m,y){let S=t.name("item"),_=(0,nd.checkDataTypes)(u,S,a.opts.strictNumbers,nd.DataType.Wrong),b=t.const("indices",(0,mt._)`{}`);t.for((0,mt._)`;${m}--;`,()=>{t.let(S,(0,mt._)`${r}[${m}]`),t.if(_,(0,mt._)`continue`),u.length>1&&t.if((0,mt._)`typeof ${S} == "string"`,(0,mt._)`${S} += "_"`),t.if((0,mt._)`typeof ${b}[${S}] == "number"`,()=>{t.assign(y,(0,mt._)`${b}[${S}]`),e.error(),t.assign(l,!1).break()}).code((0,mt._)`${b}[${S}] = ${m}`)})}function d(m,y){let S=(0,bD.useFunc)(t,wD.default),_=t.name("outer");t.label(_).for((0,mt._)`;${m}--;`,()=>t.for((0,mt._)`${y} = ${m}; ${y}--;`,()=>t.if((0,mt._)`${S}(${r}[${m}], ${r}[${y}])`,()=>{e.error(),t.assign(l,!1).break(_)})))}}};sd.default=TD});var yv=v(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var id=Q(),$D=se(),PD=Yi(),OD={message:"must be equal to constant",params:({schemaCode:e})=>(0,id._)`{allowedValue: ${e}}`},ID={keyword:"const",$data:!0,error:OD,code(e){let{gen:t,data:r,$data:n,schemaCode:s,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,id._)`!${(0,$D.useFunc)(t,PD.default)}(${r}, ${s})`):e.fail((0,id._)`${i} !== ${r}`)}};od.default=ID});var gv=v(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var Wi=Q(),AD=se(),CD=Yi(),ND={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Wi._)`{allowedValues: ${e}}`},kD={keyword:"enum",schemaType:"array",$data:!0,error:ND,code(e){let{gen:t,data:r,$data:n,schema:s,schemaCode:i,it:o}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,l,u=()=>l??(l=(0,AD.useFunc)(t,CD.default)),c;if(a||n)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=t.const("vSchema",i);c=(0,Wi.or)(...s.map((m,y)=>h(d,y)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",i,d=>t.if((0,Wi._)`${u()}(${r}, ${d})`,()=>t.assign(c,!0).break()))}function h(d,m){let y=s[m];return typeof y=="object"&&y!==null?(0,Wi._)`${u()}(${r}, ${d}[${m}])`:(0,Wi._)`${r} === ${y}`}}};ad.default=kD});var _v=v(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var qD=iv(),jD=ov(),DD=lv(),LD=cv(),xD=fv(),FD=dv(),MD=hv(),VD=mv(),zD=yv(),HD=gv(),UD=[qD.default,jD.default,DD.default,LD.default,xD.default,FD.default,MD.default,VD.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},zD.default,HD.default];ud.default=UD});var cd=v(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.validateAdditionalItems=void 0;var Kn=Q(),ld=se(),BD={message:({params:{len:e}})=>(0,Kn.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Kn._)`{limit: ${e}}`},GD={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:BD,code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,ld.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}vv(e,n)}};function vv(e,t){let{gen:r,schema:n,data:s,keyword:i,it:o}=e;o.items=!0;let a=r.const("len",(0,Kn._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,Kn._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,ld.alwaysValidSchema)(o,n)){let u=r.var("valid",(0,Kn._)`${a} <= ${t.length}`);r.if((0,Kn.not)(u),()=>l(u)),e.ok(u)}function l(u){r.forRange("i",t.length,a,c=>{e.subschema({keyword:i,dataProp:c,dataPropType:ld.Type.Num},u),o.allErrors||r.if((0,Kn.not)(u),()=>r.break())})}}Xi.validateAdditionalItems=vv;Xi.default=GD});var fd=v(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.validateTuple=void 0;var Ev=Q(),Za=se(),KD=ht(),JD={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return Sv(e,"additionalItems",t);r.items=!0,!(0,Za.alwaysValidSchema)(r,t)&&e.ok((0,KD.validateArray)(e))}};function Sv(e,t,r=e.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=e;c(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Za.mergeEvaluated.items(n,r.length,a.items));let l=n.name("valid"),u=n.const("len",(0,Ev._)`${i}.length`);r.forEach((f,h)=>{(0,Za.alwaysValidSchema)(a,f)||(n.if((0,Ev._)`${u} > ${h}`,()=>e.subschema({keyword:o,schemaProp:h,dataProp:h},l)),e.ok(l))});function c(f){let{opts:h,errSchemaPath:d}=a,m=r.length,y=m===f.minItems&&(m===f.maxItems||f[t]===!1);if(h.strictTuples&&!y){let S=`"${o}" is ${m}-tuple, but minItems or maxItems/${t} are not specified or different at path "${d}"`;(0,Za.checkStrictMode)(a,S,h.strictTuples)}}}Qi.validateTuple=Sv;Qi.default=JD});var bv=v(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});var YD=fd(),WD={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,YD.validateTuple)(e,"items")};dd.default=WD});var Rv=v(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});var wv=Q(),XD=se(),QD=ht(),ZD=cd(),eL={message:({params:{len:e}})=>(0,wv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,wv._)`{limit: ${e}}`},tL={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:eL,code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,XD.alwaysValidSchema)(n,t)&&(s?(0,ZD.validateAdditionalItems)(e,s):e.ok((0,QD.validateArray)(e)))}};hd.default=tL});var Tv=v(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});var er=Q(),eu=se(),rL={message:({params:{min:e,max:t}})=>t===void 0?(0,er.str)`must contain at least ${e} valid item(s)`:(0,er.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,er._)`{minContains: ${e}}`:(0,er._)`{minContains: ${e}, maxContains: ${t}}`},nL={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:rL,code(e){let{gen:t,schema:r,parentSchema:n,data:s,it:i}=e,o,a,{minContains:l,maxContains:u}=n;i.opts.next?(o=l===void 0?1:l,a=u):o=1;let c=t.const("len",(0,er._)`${s}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,eu.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,eu.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,eu.alwaysValidSchema)(i,r)){let y=(0,er._)`${c} >= ${o}`;a!==void 0&&(y=(0,er._)`${y} && ${c} <= ${a}`),e.pass(y);return}i.items=!0;let f=t.name("valid");a===void 0&&o===1?d(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,er._)`${s}.length > 0`,h)):(t.let(f,!1),h()),e.result(f,()=>e.reset());function h(){let y=t.name("_valid"),S=t.let("count",0);d(y,()=>t.if(y,()=>m(S)))}function d(y,S){t.forRange("i",0,c,_=>{e.subschema({keyword:"contains",dataProp:_,dataPropType:eu.Type.Num,compositeRule:!0},y),S()})}function m(y){t.code((0,er._)`${y}++`),a===void 0?t.if((0,er._)`${y} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,er._)`${y} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,er._)`${y} >= ${o}`,()=>t.assign(f,!0)))}}};pd.default=nL});var Ov=v(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.validateSchemaDeps=wr.validatePropertyDeps=wr.error=void 0;var md=Q(),sL=se(),Zi=ht();wr.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let n=t===1?"property":"properties";return(0,md.str)`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,md._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var iL={keyword:"dependencies",type:"object",schemaType:"object",error:wr.error,code(e){let[t,r]=oL(e);$v(e,t),Pv(e,r)}};function oL({schema:e}){let t={},r={};for(let n in e){if(n==="__proto__")continue;let s=Array.isArray(e[n])?t:r;s[n]=e[n]}return[t,r]}function $v(e,t=e.schema){let{gen:r,data:n,it:s}=e;if(Object.keys(t).length===0)return;let i=r.let("missing");for(let o in t){let a=t[o];if(a.length===0)continue;let l=(0,Zi.propertyInData)(r,n,o,s.opts.ownProperties);e.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(l,()=>{for(let u of a)(0,Zi.checkReportMissingProp)(e,u)}):(r.if((0,md._)`${l} && (${(0,Zi.checkMissingProp)(e,a,i)})`),(0,Zi.reportMissingProp)(e,i),r.else())}}wr.validatePropertyDeps=$v;function Pv(e,t=e.schema){let{gen:r,data:n,keyword:s,it:i}=e,o=r.name("valid");for(let a in t)(0,sL.alwaysValidSchema)(i,t[a])||(r.if((0,Zi.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let l=e.subschema({keyword:s,schemaProp:a},o);e.mergeValidEvaluated(l,o)},()=>r.var(o,!0)),e.ok(o))}wr.validateSchemaDeps=Pv;wr.default=iL});var Av=v(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var Iv=Q(),aL=se(),uL={message:"property name must be valid",params:({params:e})=>(0,Iv._)`{propertyName: ${e.propertyName}}`},lL={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:uL,code(e){let{gen:t,schema:r,data:n,it:s}=e;if((0,aL.alwaysValidSchema)(s,r))return;let i=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),t.if((0,Iv.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};yd.default=lL});var _d=v(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});var tu=ht(),hr=Q(),cL=Qt(),ru=se(),fL={message:"must NOT have additional properties",params:({params:e})=>(0,hr._)`{additionalProperty: ${e.additionalProperty}}`},dL={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:fL,code(e){let{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=e;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,ru.alwaysValidSchema)(o,r))return;let u=(0,tu.allSchemaProperties)(n.properties),c=(0,tu.allSchemaProperties)(n.patternProperties);f(),e.ok((0,hr._)`${i} === ${cL.default.errors}`);function f(){t.forIn("key",s,S=>{!u.length&&!c.length?m(S):t.if(h(S),()=>m(S))})}function h(S){let _;if(u.length>8){let b=(0,ru.schemaRefOrVal)(o,n.properties,"properties");_=(0,tu.isOwnProperty)(t,b,S)}else u.length?_=(0,hr.or)(...u.map(b=>(0,hr._)`${S} === ${b}`)):_=hr.nil;return c.length&&(_=(0,hr.or)(_,...c.map(b=>(0,hr._)`${(0,tu.usePattern)(e,b)}.test(${S})`))),(0,hr.not)(_)}function d(S){t.code((0,hr._)`delete ${s}[${S}]`)}function m(S){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){d(S);return}if(r===!1){e.setParams({additionalProperty:S}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,ru.alwaysValidSchema)(o,r)){let _=t.name("valid");l.removeAdditional==="failing"?(y(S,_,!1),t.if((0,hr.not)(_),()=>{e.reset(),d(S)})):(y(S,_),a||t.if((0,hr.not)(_),()=>t.break()))}}function y(S,_,b){let g={keyword:"additionalProperties",dataProp:S,dataPropType:ru.Type.Str};b===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(g,_)}}};gd.default=dL});var kv=v(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});var hL=qs(),Cv=ht(),vd=se(),Nv=_d(),pL={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Nv.default.code(new hL.KeywordCxt(i,Nv.default,"additionalProperties"));let o=(0,Cv.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=vd.mergeEvaluated.props(t,(0,vd.toHash)(o),i.props));let a=o.filter(f=>!(0,vd.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let l=t.name("valid");for(let f of a)u(f)?c(f):(t.if((0,Cv.propertyInData)(t,s,f,i.opts.ownProperties)),c(f),i.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(l);function u(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};Ed.default=pL});var Lv=v(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});var qv=ht(),nu=Q(),jv=se(),Dv=se(),mL={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:n,parentSchema:s,it:i}=e,{opts:o}=i,a=(0,qv.allSchemaProperties)(r),l=a.filter(y=>(0,jv.alwaysValidSchema)(i,r[y]));if(a.length===0||l.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let u=o.strictSchema&&!o.allowMatchingProperties&&s.properties,c=t.name("valid");i.props!==!0&&!(i.props instanceof nu.Name)&&(i.props=(0,Dv.evaluatedPropsToName)(t,i.props));let{props:f}=i;h();function h(){for(let y of a)u&&d(y),i.allErrors?m(y):(t.var(c,!0),m(y),t.if(c))}function d(y){for(let S in u)new RegExp(y).test(S)&&(0,jv.checkStrictMode)(i,`property ${S} matches pattern ${y} (use allowMatchingProperties)`)}function m(y){t.forIn("key",n,S=>{t.if((0,nu._)`${(0,qv.usePattern)(e,y)}.test(${S})`,()=>{let _=l.includes(y);_||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:S,dataPropType:Dv.Type.Str},c),i.opts.unevaluated&&f!==!0?t.assign((0,nu._)`${f}[${S}]`,!0):!_&&!i.allErrors&&t.if((0,nu.not)(c),()=>t.break())})})}}};Sd.default=mL});var xv=v(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var yL=se(),gL={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:n}=e;if((0,yL.alwaysValidSchema)(n,r)){e.fail();return}let s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};bd.default=gL});var Fv=v(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});var _L=ht(),vL={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:_L.validateUnion,error:{message:"must match a schema in anyOf"}};wd.default=vL});var Mv=v(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var su=Q(),EL=se(),SL={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,su._)`{passingSchemas: ${e.passing}}`},bL={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:SL,code(e){let{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(o,()=>e.reset(),()=>e.error(!0));function u(){i.forEach((c,f)=>{let h;(0,EL.alwaysValidSchema)(s,c)?t.var(l,!0):h=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&t.if((0,su._)`${l} && ${o}`).assign(o,!1).assign(a,(0,su._)`[${a}, ${f}]`).else(),t.if(l,()=>{t.assign(o,!0),t.assign(a,f),h&&e.mergeEvaluated(h,su.Name)})})}}};Rd.default=bL});var Vv=v(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});var wL=se(),RL={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=t.name("valid");r.forEach((i,o)=>{if((0,wL.alwaysValidSchema)(n,i))return;let a=e.subschema({keyword:"allOf",schemaProp:o},s);e.ok(s),e.mergeEvaluated(a)})}};Td.default=RL});var Uv=v($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});var iu=Q(),Hv=se(),TL={message:({params:e})=>(0,iu.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,iu._)`{failingKeyword: ${e.ifClause}}`},$L={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:TL,code(e){let{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,Hv.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=zv(n,"then"),i=zv(n,"else");if(!s&&!i)return;let o=t.let("valid",!0),a=t.name("_valid");if(l(),e.reset(),s&&i){let c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,u("then",c),u("else",c))}else s?t.if(a,u("then")):t.if((0,iu.not)(a),u("else"));e.pass(o,()=>e.error(!0));function l(){let c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function u(c,f){return()=>{let h=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(h,o),f?t.assign(f,(0,iu._)`${c}`):e.setParams({ifClause:c})}}}};function zv(e,t){let r=e.schema[t];return r!==void 0&&!(0,Hv.alwaysValidSchema)(e,r)}$d.default=$L});var Bv=v(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});var PL=se(),OL={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,PL.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Pd.default=OL});var Gv=v(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});var IL=cd(),AL=bv(),CL=fd(),NL=Rv(),kL=Tv(),qL=Ov(),jL=Av(),DL=_d(),LL=kv(),xL=Lv(),FL=xv(),ML=Fv(),VL=Mv(),zL=Vv(),HL=Uv(),UL=Bv();function BL(e=!1){let t=[FL.default,ML.default,VL.default,zL.default,HL.default,UL.default,jL.default,DL.default,qL.default,LL.default,xL.default];return e?t.push(AL.default,NL.default):t.push(IL.default,CL.default),t.push(kL.default),t}Od.default=BL});var Kv=v(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});var Ke=Q(),GL={message:({schemaCode:e})=>(0,Ke.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Ke._)`{format: ${e}}`},KL={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:GL,code(e,t){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=e,{opts:l,errSchemaPath:u,schemaEnv:c,self:f}=a;if(!l.validateFormats)return;s?h():d();function h(){let m=r.scopeValue("formats",{ref:f.formats,code:l.code.formats}),y=r.const("fDef",(0,Ke._)`${m}[${o}]`),S=r.let("fType"),_=r.let("format");r.if((0,Ke._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(S,(0,Ke._)`${y}.type || "string"`).assign(_,(0,Ke._)`${y}.validate`),()=>r.assign(S,(0,Ke._)`"string"`).assign(_,y)),e.fail$data((0,Ke.or)(b(),g()));function b(){return l.strictSchema===!1?Ke.nil:(0,Ke._)`${o} && !${_}`}function g(){let p=c.$async?(0,Ke._)`(${y}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,Ke._)`${_}(${n})`,T=(0,Ke._)`(typeof ${_} == "function" ? ${p} : ${_}.test(${n}))`;return(0,Ke._)`${_} && ${_} !== true && ${S} === ${t} && !${T}`}}function d(){let m=f.formats[i];if(!m){b();return}if(m===!0)return;let[y,S,_]=g(m);y===t&&e.pass(p());function b(){if(l.strictSchema===!1){f.logger.warn(T());return}throw new Error(T());function T(){return`unknown format "${i}" ignored in schema at path "${u}"`}}function g(T){let O=T instanceof RegExp?(0,Ke.regexpCode)(T):l.code.formats?(0,Ke._)`${l.code.formats}${(0,Ke.getProperty)(i)}`:void 0,w=r.scopeValue("formats",{key:i,ref:T,code:O});return typeof T=="object"&&!(T instanceof RegExp)?[T.type||"string",T.validate,(0,Ke._)`${w}.validate`]:["string",T,w]}function p(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Ke._)`await ${_}(${n})`}return typeof S=="function"?(0,Ke._)`${_}(${n})`:(0,Ke._)`${_}.test(${n})`}}}};Id.default=KL});var Jv=v(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});var JL=Kv(),YL=[JL.default];Ad.default=YL});var Yv=v(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.contentVocabulary=xs.metadataVocabulary=void 0;xs.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];xs.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Xv=v(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var WL=sv(),XL=_v(),QL=Gv(),ZL=Jv(),Wv=Yv(),ex=[WL.default,XL.default,(0,QL.default)(),ZL.default,Wv.metadataVocabulary,Wv.contentVocabulary];Cd.default=ex});var Nd=v(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.DiscrError=void 0;var tx;(function(e){e.Tag="tag",e.Mapping="mapping"})(tx=eo.DiscrError||(eo.DiscrError={}))});var Zv=v(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});var Fs=Q(),kd=Nd(),Qv=Un(),rx=se(),nx={message:({params:{discrError:e,tagName:t}})=>e===kd.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Fs._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},sx={keyword:"discriminator",type:"object",schemaType:"object",error:nx,code(e){let{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let l=t.let("valid",!1),u=t.const("tag",(0,Fs._)`${r}${(0,Fs.getProperty)(a)}`);t.if((0,Fs._)`typeof ${u} == "string"`,()=>c(),()=>e.error(!1,{discrError:kd.DiscrError.Tag,tag:u,tagName:a})),e.ok(l);function c(){let d=h();t.if(!1);for(let m in d)t.elseIf((0,Fs._)`${u} === ${m}`),t.assign(l,f(d[m]));t.else(),e.error(!1,{discrError:kd.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function f(d){let m=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:d},m);return e.mergeEvaluated(y,Fs.Name),m}function h(){var d;let m={},y=_(s),S=!0;for(let p=0;p<o.length;p++){let T=o[p];T?.$ref&&!(0,rx.schemaHasRulesButRef)(T,i.self.RULES)&&(T=Qv.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T?.$ref),T instanceof Qv.SchemaEnv&&(T=T.schema));let O=(d=T?.properties)===null||d===void 0?void 0:d[a];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);S=S&&(y||_(T)),b(O,p)}if(!S)throw new Error(`discriminator: "${a}" must be required`);return m;function _({required:p}){return Array.isArray(p)&&p.includes(a)}function b(p,T){if(p.const)g(p.const,T);else if(p.enum)for(let O of p.enum)g(O,T);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(p,T){if(typeof p!="string"||p in m)throw new Error(`discriminator: "${a}" values must be unique strings`);m[p]=T}}}};qd.default=sx});var eE=v((RG,ix)=>{ix.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var uu=v((ze,rE)=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.MissingRefError=ze.ValidationError=ze.CodeGen=ze.Name=ze.nil=ze.stringify=ze.str=ze._=ze.KeywordCxt=void 0;var ox=Uf(),ax=Xv(),ux=Zv(),tE=eE(),lx=["/properties"],ou="http://json-schema.org/draft-07/schema",au=class extends ox.default{_addVocabularies(){super._addVocabularies(),ax.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(ux.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(tE,lx):tE;this.addMetaSchema(t,ou,!1),this.refs["http://json-schema.org/schema"]=ou}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(ou)?ou:void 0)}};rE.exports=ze=au;Object.defineProperty(ze,"__esModule",{value:!0});ze.default=au;var cx=qs();Object.defineProperty(ze,"KeywordCxt",{enumerable:!0,get:function(){return cx.KeywordCxt}});var Ms=Q();Object.defineProperty(ze,"_",{enumerable:!0,get:function(){return Ms._}});Object.defineProperty(ze,"str",{enumerable:!0,get:function(){return Ms.str}});Object.defineProperty(ze,"stringify",{enumerable:!0,get:function(){return Ms.stringify}});Object.defineProperty(ze,"nil",{enumerable:!0,get:function(){return Ms.nil}});Object.defineProperty(ze,"Name",{enumerable:!0,get:function(){return Ms.Name}});Object.defineProperty(ze,"CodeGen",{enumerable:!0,get:function(){return Ms.CodeGen}});var fx=Mi();Object.defineProperty(ze,"ValidationError",{enumerable:!0,get:function(){return fx.default}});var dx=dn();Object.defineProperty(ze,"MissingRefError",{enumerable:!0,get:function(){return dx.default}})});var sE=v((TG,nE)=>{"use strict";var hx={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};nE.exports={HEX:hx}});var dE=v(($G,fE)=>{"use strict";var{HEX:px}=sE();function uE(e){if(cE(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(/^(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)||[],[r]=t;return r?{host:yx(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function jd(e){let t="",r=!0;for(let n of e){if(n!=="0"&&r===!0&&(r=!1),px[n]===void 0)return;r||(t+=n)}return t}function mx(e){let t=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=!1;function l(){if(s.length){if(i===!1){let u=jd(s.join(""));if(u!==void 0)n.push(u);else return r.error=!0,!1}s.length=0}return!0}for(let u=0;u<e.length;u++){let c=e[u];if(!(c==="["||c==="]"))if(c===":"){if(o===!0&&(a=!0),!l())break;if(t++,n.push(":"),t>7){r.error=!0;break}u-1>=0&&e[u-1]===":"&&(o=!0);continue}else if(c==="%"){if(!l())break;i=!0}else{s.push(c);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(jd(s.join("")))),r.address=n.join(""),r}function lE(e,t={}){if(cE(e,":")<2)return{host:e,isIPV6:!1};let r=mx(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function yx(e,t){let r="",n=!0,s=e.length;for(let i=0;i<s;i++){let o=e[i];o==="0"&&n?(i+1<=s&&e[i+1]===t||i+1===s)&&(r+=o,n=!1):(o===t?n=!0:n=!1,r+=o)}return r}function cE(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}var iE=/^\.\.?\//,oE=/^\/\.(\/|$)/,aE=/^\/\.\.(\/|$)/,gx=/^\/?(?:.|\n)*?(?=\/|$)/;function _x(e){let t=[];for(;e.length;)if(e.match(iE))e=e.replace(iE,"");else if(e.match(oE))e=e.replace(oE,"/");else if(e.match(aE))e=e.replace(aE,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(gx);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function vx(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function Ex(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host),s=uE(n);if(s.isIPV4)n=s.host;else{let i=lE(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}fE.exports={recomposeAuthority:Ex,normalizeComponentEncoding:vx,removeDotSegments:_x,normalizeIPv4:uE,normalizeIPv6:lE,stringToHexStripped:jd}});var _E=v((PG,gE)=>{"use strict";var Sx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,bx=/([A-Za-z0-9][A-Za-z0-9-]{0,31}):(([A-Za-z0-9()+,\-.:=@;$_!*']|%[0-9A-Fa-f]{2})+)/;function hE(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function pE(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function mE(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function wx(e){return e.secure=hE(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function Rx(e){if((e.port===(hE(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function Tx(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(bx);if(r){let n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let s=`${n}:${t.nid||e.nid}`,i=Dd[s];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function $x(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,i=Dd[s];i&&(e=i.serialize(e,t));let o=e,a=e.nss;return o.path=`${n||t.nid}:${a}`,t.skipEscape=!0,o}function Px(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!Sx.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Ox(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var yE={scheme:"http",domainHost:!0,parse:pE,serialize:mE},Ix={scheme:"https",domainHost:yE.domainHost,parse:pE,serialize:mE},lu={scheme:"ws",domainHost:!0,parse:wx,serialize:Rx},Ax={scheme:"wss",domainHost:lu.domainHost,parse:lu.parse,serialize:lu.serialize},Cx={scheme:"urn",parse:Tx,serialize:$x,skipNormalize:!0},Nx={scheme:"urn:uuid",parse:Px,serialize:Ox,skipNormalize:!0},Dd={http:yE,https:Ix,ws:lu,wss:Ax,urn:Cx,"urn:uuid":Nx};gE.exports=Dd});var xd=v((OG,fu)=>{"use strict";var kx=require("url"),{normalizeIPv6:qx,normalizeIPv4:jx,removeDotSegments:to,recomposeAuthority:Dx,normalizeComponentEncoding:cu}=dE(),vE=_E();function Lx(e,t){return typeof e=="string"?e=Rr(Lr(e,t),t):typeof e=="object"&&(e=Lr(Rr(e,t),t)),e}function xx(e,t,r){let n=Object.assign({scheme:"null"},r),s=EE(Lr(e,n),Lr(t,n),n,!0);return Rr(s,{...n,skipEscape:!0})}function EE(e,t,r,n){let s={};return n||(e=Lr(Rr(e,r),r),t=Lr(Rr(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=to(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=to(t.path||""),s.query=t.query):(t.path?(t.path.charAt(0)==="/"?s.path=to(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=to(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function Fx(e,t,r){return typeof e=="string"?(e=unescape(e),e=Rr(cu(Lr(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Rr(cu(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Rr(cu(Lr(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Rr(cu(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Rr(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],i=vE[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));let o=Dx(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=to(a)),o===void 0&&(a=a.replace(/^\/\//,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}var Mx=/^(?:([^:/?#]+):)?(?:\/\/((?:([^/?#@]*)@)?(\[[^/?#\]]+\]|[^/?#:]*)(?::(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;function Lr(e,t){let r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=e.indexOf("%")!==-1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let i=e.match(Mx);if(i){if(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5]),n.host){let a=jx(n.host);a.isIPV4===!1?n.host=qx(a.host,{isIPV4:!1}).host.toLowerCase():n.host=a.host}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=vE[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost))try{n.host=kx.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=encodeURI(n.path)),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURI(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var Ld={normalize:Lx,resolve:xx,resolveComponents:EE,equal:Fx,serialize:Rr,parse:Lr};fu.exports=Ld;fu.exports.default=Ld;fu.exports.fastUri=Ld});var du=v(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.formatNames=Tr.fastFormats=Tr.fullFormats=void 0;function Vs(e,t){return{validate:e,compare:t}}Tr.fullFormats={date:Vs(wE,Vd),time:Vs(RE,zd),"date-time":Vs(Ux,TE),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Kx,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:eF,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Jx,int32:{type:"number",validate:Xx},int64:{type:"number",validate:Qx},float:{type:"number",validate:bE},double:{type:"number",validate:bE},password:!0,binary:!0};Tr.fastFormats={...Tr.fullFormats,date:Vs(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,Vd),time:Vs(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,zd),"date-time":Vs(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,TE),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Tr.formatNames=Object.keys(Tr.fullFormats);function Vx(e){return e%4===0&&(e%100!==0||e%400===0)}var zx=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Hx=[0,31,28,31,30,31,30,31,31,30,31,30,31];function wE(e){let t=zx.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&Vx(r)?29:Hx[n])}function Vd(e,t){if(e&&t)return e>t?1:e<t?-1:0}var Fd=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function RE(e,t){let r=Fd.exec(e);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!t||o!=="")}function zd(e,t){if(!(e&&t))return;let r=Fd.exec(e),n=Fd.exec(t);if(r&&n)return e=r[1]+r[2]+r[3]+(r[4]||""),t=n[1]+n[2]+n[3]+(n[4]||""),e>t?1:e<t?-1:0}var Md=/t|\s/i;function Ux(e){let t=e.split(Md);return t.length===2&&wE(t[0])&&RE(t[1],!0)}function TE(e,t){if(!(e&&t))return;let[r,n]=e.split(Md),[s,i]=t.split(Md),o=Vd(r,s);if(o!==void 0)return o||zd(n,i)}var Bx=/\/|:/,Gx=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Kx(e){return Bx.test(e)&&Gx.test(e)}var SE=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Jx(e){return SE.lastIndex=0,SE.test(e)}var Yx=-(2**31),Wx=2**31-1;function Xx(e){return Number.isInteger(e)&&e<=Wx&&e>=Yx}function Qx(e){return Number.isInteger(e)}function bE(){return!0}var Zx=/[^\\]\\Z/;function eF(e){if(Zx.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var $E=v(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.formatLimitDefinition=void 0;var tF=uu(),pr=Q(),pn=pr.operators,hu={formatMaximum:{okStr:"<=",ok:pn.LTE,fail:pn.GT},formatMinimum:{okStr:">=",ok:pn.GTE,fail:pn.LT},formatExclusiveMaximum:{okStr:"<",ok:pn.LT,fail:pn.GTE},formatExclusiveMinimum:{okStr:">",ok:pn.GT,fail:pn.LTE}},rF={message:({keyword:e,schemaCode:t})=>pr.str`should be ${hu[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>pr._`{comparison: ${hu[e].okStr}, limit: ${t}}`};zs.formatLimitDefinition={keyword:Object.keys(hu),type:"string",schemaType:"string",$data:!0,error:rF,code(e){let{gen:t,data:r,schemaCode:n,keyword:s,it:i}=e,{opts:o,self:a}=i;if(!o.validateFormats)return;let l=new tF.KeywordCxt(i,a.RULES.all.format.definition,"format");l.$data?u():c();function u(){let h=t.scopeValue("formats",{ref:a.formats,code:o.code.formats}),d=t.const("fmt",pr._`${h}[${l.schemaCode}]`);e.fail$data(pr.or(pr._`typeof ${d} != "object"`,pr._`${d} instanceof RegExp`,pr._`typeof ${d}.compare != "function"`,f(d)))}function c(){let h=l.schema,d=a.formats[h];if(!d||d===!0)return;if(typeof d!="object"||d instanceof RegExp||typeof d.compare!="function")throw new Error(`"${s}": format "${h}" does not define "compare" function`);let m=t.scopeValue("formats",{key:h,ref:d,code:o.code.formats?pr._`${o.code.formats}${pr.getProperty(h)}`:void 0});e.fail$data(f(m))}function f(h){return pr._`${h}.compare(${r}, ${n}) ${hu[s].fail} 0`}},dependencies:["format"]};var nF=e=>(e.addKeyword(zs.formatLimitDefinition),e);zs.default=nF});var Bd=v((ro,IE)=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});var Hs=du(),sF=$E(),Hd=Q(),PE=new Hd.Name("fullFormats"),iF=new Hd.Name("fastFormats"),Ud=(e,t={keywords:!0})=>{if(Array.isArray(t))return OE(e,t,Hs.fullFormats,PE),e;let[r,n]=t.mode==="fast"?[Hs.fastFormats,iF]:[Hs.fullFormats,PE],s=t.formats||Hs.formatNames;return OE(e,s,r,n),t.keywords&&sF.default(e),e};Ud.get=(e,t="full")=>{let n=(t==="fast"?Hs.fastFormats:Hs.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n};function OE(e,t,r,n){var s,i;(s=(i=e.opts.code).formats)!==null&&s!==void 0||(i.formats=Hd._`require("ajv-formats/dist/formats").${n}`);for(let o of t)e.addFormat(o,r[o])}IE.exports=ro=Ud;Object.defineProperty(ro,"__esModule",{value:!0});ro.default=Ud});var Gd=v((CG,AE)=>{"use strict";var oF=uu(),aF=xd(),uF=Bd(),lF=Ti()({proto:!0}),no=class{constructor(t){this.ajv=new oF({...t,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:aF}),uF(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=t||{}}addSchema(t,r){let n=t.$id||r;if(t.$id!==void 0&&t.$id[0]==="#"&&(n=r+t.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let s=lF(t);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,n),this._ajvSchemas[n]=t}}validate(t,r){return this.ajv.validate(t,r)}convertSchemaToAjvFormat(t){if(t!==null){t.type==="string"?(t.fjs_type="string",t.type=["string","object"]):Array.isArray(t.type)&&t.type.includes("string")&&!t.type.includes("object")&&(t.fjs_type="string",t.type.push("object"));for(let r in t)typeof t[r]=="object"&&this.convertSchemaToAjvFormat(t[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(t){let r=new no(t.ajvOptions);for(let[n,s]of Object.entries(t.ajvSchemas))r.ajv.addSchema(s,n);return r}};AE.exports=no});var Jd=v((NG,Kd)=>{"use strict";function cF(e,t,r,n){let s="";return t.validatorSchemasIds.size>0?(s+=`const validatorState = ${JSON.stringify(n.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`,`
  'use strict'
  const { dependencies } = require('fast-json-stringify/lib/standalone')

  const { Serializer, Validator } = dependencies

  const serializerState = ${JSON.stringify(r.getState())}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${e.toString()}(validator, serializer)`}Kd.exports=cF;Kd.exports.dependencies={Serializer:ef(),Validator:Gd()}});var NE=v((qG,CE)=>{"use strict";var{dependencies:fF}=Jd(),{Serializer:dF,Validator:kG}=fF,hF={mode:"standalone"},pF=dF.restoreFromState(hF),mF=null;CE.exports=function(t,r){function n(i){let o=i&&typeof i.toJSON=="function"?i.toJSON():i,a="{",l=!1;return o.statusCode!==void 0&&(!l&&(l=!0)||(a+=","),a+='"statusCode":',a+=r.asNumber(o.statusCode)),o.code!==void 0&&(!l&&(l=!0)||(a+=","),a+='"code":',a+=r.asString(o.code)),o.error!==void 0&&(!l&&(l=!0)||(a+=","),a+='"error":',a+=r.asString(o.error)),o.message!==void 0&&(!l&&(l=!0)||(a+=","),a+='"message":',a+=r.asString(o.message)),a+"}"}return n}(mF,pF)});var so=v((jG,DE)=>{"use strict";var kE=require("http").STATUS_CODES,yF=ec(),{kReplyHeaders:Us,kReplyNextErrorHandler:pu,kReplyIsRunningOnErrorHook:gF,kReplyHasStatusCode:_F,kRouteContext:jE}=at(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:vF,FST_ERR_FAILED_ERROR_SERIALIZATION:EF}=gt(),{getSchemaSerializer:SF}=$i(),Yd=NE(),bF={func:RF,toJSON(){return this.func.name.toString()+"()"}};function wF(e,t,r){e[gF]=!1;let n=e[jE];if(e[pu]===!1){qE(t,e,function(a,l){try{a.raw.writeHead(a.raw.statusCode,a[Us])}catch(u){a.log.warn({req:a.request,res:a,err:u},u&&u.message),a.raw.writeHead(a.raw.statusCode)}a.raw.end(l)});return}let s=e[pu]||n.errorHandler;e[pu]=Object.getPrototypeOf(s),delete e[Us]["content-type"],delete e[Us]["content-length"];let i=s.func;if(!i){e[pu]=!1,qE(t,e,r);return}let o=i(t,e.request,e);o!==void 0&&(o!==null&&typeof o.then=="function"?yF(o,e):e.send(o))}function RF(e,t,r){if($F(e,r),!r[_F]||r.statusCode===200){let n=e.statusCode||e.status;r.code(n>=400?n:500)}r.statusCode<500?r.log.info({res:r,err:e},e&&e.message):r.log.error({req:t,res:r,err:e},e&&e.message),r.send(e)}function qE(e,t,r){let n=t.raw,s=t.statusCode,i;try{let o=SF(t[jE],s,t[Us]["content-type"]);i=o===!1?Yd({error:kE[s+""],code:e.code,message:e.message,statusCode:s}):o(Object.create(e,{error:{value:kE[s+""]},message:{value:e.message},statusCode:{value:s}}))}catch(o){t.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),t.code(500),i=Yd(new EF(o.message,e.message))}typeof i!="string"&&!Buffer.isBuffer(i)&&(i=Yd(new vF(typeof i))),t[Us]["content-type"]="application/json; charset=utf-8",t[Us]["content-length"]=""+Buffer.byteLength(i),r(t,i)}function TF(e=bF,t){if(!t)return e;let r=Object.create(e);return r.func=t,r}function $F(e,t){let r=t.raw,n=r.statusCode;n=n>=400?n:500,e!=null&&(e.headers!==void 0&&t.headers(e.headers),e.status>=400?n=e.status:e.statusCode>=400&&(n=e.statusCode)),r.statusCode=n}DE.exports={buildErrorHandler:TF,handleError:wF}});var vu=v((DG,_u)=>{"use strict";var Qd=require("stream").finished,{kFourOhFourContext:LE,kReplyErrorHandlerCalled:UE,kReplyHijacked:io,kReplyStartTime:oo,kReplyEndTime:th,kReplySerializer:xr,kReplySerializerDefault:mu,kReplyIsError:yu,kReplyHeaders:Ne,kReplyTrailers:ut,kReplyHasStatusCode:rh,kReplyIsRunningOnErrorHook:nh,kReplyNextErrorHandler:PF,kDisableRequestLogging:BE,kSchemaResponse:gu,kReplyCacheSerializeFns:mn,kSchemaController:Wd,kOptions:OF,kRouteContext:ue}=at(),{hookRunner:GE,hookIterator:IF,onSendHookRunner:sh}=kn(),xE=sc()[Symbol.for("internals")],AF=Xc(),Zd=AF.now,{handleError:FE}=so(),{getSchemaSerializer:CF}=$i(),Xd={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:NF,FST_ERR_REP_ALREADY_SENT:KE,FST_ERR_REP_SENT_VALUE:kF,FST_ERR_SEND_INSIDE_ONERR:qF,FST_ERR_BAD_STATUS_CODE:jF,FST_ERR_BAD_TRAILER_NAME:DF,FST_ERR_BAD_TRAILER_VALUE:LF,FST_ERR_MISSING_SERIALIZATION_FN:xF,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:FF}=gt(),JE=en();function ke(e,t,r){this.raw=e,this[xr]=null,this[UE]=!1,this[yu]=!1,this[nh]=!1,this.request=t,this[Ne]={},this[ut]=null,this[rh]=!1,this[oo]=void 0,this.log=r}ke.props=[];Object.defineProperties(ke.prototype,{[ue]:{get(){return this.request[ue]}},context:{get(){return this.request[ue]}},server:{get(){return this.request[ue].server}},sent:{enumerable:!0,get(){return(this[io]||this.raw.writableEnded)===!0},set(e){if(JE.emit("FSTDEP010"),e!==!0)throw new kF;if(this.sent&&this[io])throw new KE;this[io]=!0}},statusCode:{get(){return this.raw.statusCode},set(e){this.code(e)}}});ke.prototype.hijack=function(){return this[io]=!0,this};ke.prototype.send=function(e){if(this[nh]===!0)throw new qF;if(this.sent)return this.log.warn({err:new KE},"Reply already sent"),this;if(e instanceof Error||this[yu]===!0)return this[yu]=!1,ao(this,e,Jn),this;if(e===void 0)return Jn(this,e),this;let t=this.getHeader("content-type"),r=t!==void 0;if(e!==null){if(typeof e.pipe=="function")return Jn(this,e),this;if(Buffer.isBuffer(e))return r===!1&&(this[Ne]["content-type"]=Xd.OCTET),Jn(this,e),this;if(r===!1&&typeof e=="string")return this[Ne]["content-type"]=Xd.PLAIN,Jn(this,e),this}if(this[xr]!==null){if(typeof e!="string")return ME(this,e),this;e=this[xr](e)}else if(r===!1||t.indexOf("json")>-1){if(r===!1)this[Ne]["content-type"]=Xd.JSON;else if(t.indexOf("charset")===-1){let n=t.trim();n.endsWith(";")?this[Ne]["content-type"]=`${n} charset=utf-8`:this[Ne]["content-type"]=`${n}; charset=utf-8`}if(typeof e!="string")return ME(this,e),this}return Jn(this,e),this};ke.prototype.getHeader=function(e){e=e.toLowerCase();let t=this.raw,r=this[Ne][e];return r===void 0&&t.hasHeader(e)&&(r=t.getHeader(e)),r};ke.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[Ne]}};ke.prototype.hasHeader=function(e){return e=e.toLowerCase(),this[Ne][e]!==void 0||this.raw.hasHeader(e)};ke.prototype.removeHeader=function(e){return delete this[Ne][e.toLowerCase()],this};ke.prototype.header=function(e,t=""){return e=e.toLowerCase(),this[Ne][e]&&e==="set-cookie"?(typeof this[Ne][e]=="string"&&(this[Ne][e]=[this[Ne][e]]),Array.isArray(t)?this[Ne][e].push(...t):this[Ne][e].push(t)):this[Ne][e]=t,this};ke.prototype.headers=function(e){let t=Object.keys(e);for(var r=0;r!==t.length;++r){let n=t[r];this.header(n,e[n])}return this};var MF=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);ke.prototype.trailer=function(e,t){if(e=e.toLowerCase(),MF.has(e))throw new DF(e);if(typeof t!="function")throw new LF(e,typeof t);return this[ut]===null&&(this[ut]={}),this[ut][e]=t,this};ke.prototype.hasTrailer=function(e){return this[ut]?.[e.toLowerCase()]!==void 0};ke.prototype.removeTrailer=function(e){return this[ut]===null?this:(this[ut][e.toLowerCase()]=void 0,this)};ke.prototype.code=function(e){let t=Number(e);if(isNaN(t)||t<100||t>599)throw new jF(e||String(e));return this.raw.statusCode=t,this[rh]=!0,this};ke.prototype.status=ke.prototype.code;ke.prototype.getSerializationFunction=function(e,t){let r;return typeof e=="string"||typeof e=="number"?typeof t=="string"?r=this[ue][gu]?.[e]?.[t]:r=this[ue][gu]?.[e]:typeof e=="object"&&(r=this[ue][mn]?.get(e)),r};ke.prototype.compileSerializationSchema=function(e,t=null,r=null){let{request:n}=this,{method:s,url:i}=n;if(this[ue][mn]?.has(e))return this[ue][mn].get(e);let a=(this[ue].serializerCompiler||this.server[Wd].serializerCompiler||this.server[Wd].setupSerializer(this.server[OF])||this.server[Wd].serializerCompiler)({schema:e,method:s,url:i,httpStatus:t,contentType:r});return this[ue][mn]==null&&(this[ue][mn]=new WeakMap),this[ue][mn].set(e,a),a};ke.prototype.serializeInput=function(e,t,r,n){let s=r,i;if(r=typeof t=="string"||typeof t=="number"?t:r,n=r&&s!==r?s:n,r!=null){if(n!=null?i=this[ue][gu]?.[r]?.[n]:i=this[ue][gu]?.[r],i==null)throw n?new FF(r,n):new xF(r)}else this[ue][mn]?.has(t)?i=this[ue][mn].get(t):i=this.compileSerializationSchema(t,r,n);return i(e)};ke.prototype.serialize=function(e){return this[xr]!==null?this[xr](e):this[ue]&&this[ue][mu]?this[ue][mu](e,this.raw.statusCode):WE(this[ue],e,this.raw.statusCode)};ke.prototype.serializer=function(e){return this[xr]=e,this};ke.prototype.type=function(e){return this[Ne]["content-type"]=e,this};ke.prototype.redirect=function(e,t){return typeof e=="string"&&(t=e,e=this[rh]?this.raw.statusCode:302),this.header("location",t).code(e).send()};ke.prototype.callNotFound=function(){return JF(this),this};ke.prototype.getResponseTime=function(){let e=0;return this[oo]!==void 0&&(e=(this[th]||Zd())-this[oo]),e};ke.prototype.then=function(e,t){if(this.sent){e();return}Qd(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?t?t(r):this.log&&this.log.warn("unhandled rejection on reply.then"):e()})};function ME(e,t){e[ue].preSerialization!==null?sh(e[ue].preSerialization,e.request,e,t,VE):VE(null,e.request,e,t)}function VE(e,t,r,n){if(e!=null){ao(r,e);return}try{r[xr]!==null?n=r[xr](n):r[ue]&&r[ue][mu]?n=r[ue][mu](n,r.raw.statusCode):n=WE(r[ue],n,r.raw.statusCode,r[Ne]["content-type"])}catch(s){VF(s,r),ao(r,s);return}Jn(r,n)}function VF(e,t){e.serialization=t[ue].config}function Jn(e,t){e[ue].onSend!==null?sh(e[ue].onSend,e.request,e,t,zF):YE(e,t)}function zF(e,t,r,n){e!=null?ao(r,e):YE(r,n)}function YE(e,t){let r=e.raw,n=e.request,s=r.statusCode;if(e[ut]!==null){let i=Object.keys(e[ut]),o="";for(let a of i)typeof e[ut][a]=="function"&&(o+=" ",o+=a);e.header("Transfer-Encoding","chunked"),e.header("Trailer",o.trim())}if(t==null){s>=200&&s!==204&&s!==304&&n.method!=="HEAD"&&e[ut]===null&&(e[Ne]["content-length"]="0"),r.writeHead(s,e[Ne]),eh(t,r,e);return}if(typeof t.pipe=="function"){HF(t,r,e);return}if(typeof t!="string"&&!Buffer.isBuffer(t))throw new NF(typeof t);if(e[ut]===null){let i=e[Ne]["content-length"];(!i||n.raw.method!=="HEAD"&&Number(i)!==Buffer.byteLength(t))&&(e[Ne]["content-length"]=""+Buffer.byteLength(t))}r.writeHead(s,e[Ne]),r.write(t),eh(t,r,e)}function zE(e,t,r){t.code==="ERR_STREAM_PREMATURE_CLOSE"?e[BE]||e.info({res:r},"stream closed prematurely"):e.warn({err:t},"response terminated with an error with headers already sent")}function HF(e,t,r){let n=!0,s=!1;if(UF(e,t,r),Qd(e,{readable:!0,writable:!1},function(i){n=!1,i!=null&&(t.headersSent||r.request.raw.aborted===!0?(s||(s=!0,zE(r.log,i,t)),t.destroy()):ao(r,i))}),Qd(t,function(i){n&&(i!=null&&t.headersSent&&!s&&(s=!0,zE(r.log,i,t)),typeof e.destroy=="function"?e.destroy():typeof e.close=="function"?e.close(YF):typeof e.abort=="function"?e.abort():r.log.warn("stream payload does not end properly"))}),t.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let i in r[Ne])t.setHeader(i,r[Ne][i]);e.pipe(t)}function eh(e,t,r){if(r[ut]===null){t.end(null,null,null);return}let n=Object.keys(r[ut]),s={},i=0,o=!0;function a(){i===0&&(t.addTrailers(s),t.end(null,null,null))}for(let l of n){let u=function(f,h){i++,f?r.log.debug(f):s[l]=h,process.nextTick(a)};if(typeof r[ut][l]!="function")continue;o=!1,i--;let c=r[ut][l](r,e,u);typeof c=="object"&&typeof c.then=="function"?c.then(f=>u(null,f),u):c!=null&&(JE.emit("FSTDEP013"),u(null,c))}o&&t.end(null,null,null)}function UF(e,t,r){r[ut]!==null&&e.on("end",()=>eh(null,t,r))}function ao(e,t,r){e[ue].onError!==null&&!e[PF]?(e[nh]=!0,sh(e[ue].onError,e.request,e,t,()=>FE(e,t,r))):FE(e,t,r)}function BF(e){e[oo]=Zd();let t=r=>{e[th]=Zd(),e.raw.removeListener("finish",t),e.raw.removeListener("error",t);let n=e[ue];n&&n.onResponse!==null?GE(n.onResponse,GF,e.request,e,HE):HE(r,e.request,e)};e.raw.on("finish",t),e.raw.on("error",t)}function GF(e,t,r,n){return e(t,r,n)}function HE(e,t,r){if(r.log[BE])return;let n=r.getResponseTime();if(e!=null){r.log.error({res:r,err:e,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function KF(e){let t=[...e.props];function r(n,s,i){this.raw=n,this[yu]=!1,this[UE]=!1,this[io]=!1,this[xr]=null,this.request=s,this[Ne]={},this[ut]=null,this[oo]=void 0,this[th]=void 0,this.log=i;for(var o,a=0;a<t.length;a++)o=t[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.parent=e,r.props=t,r}function JF(e){if(e[ue][LE]===null){e.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),e.code(404).send("404 Not Found");return}e.request[ue]=e[ue][LE],e[ue].preHandler!==null?GE(e[ue].preHandler,IF,e.request,e,xE.preHandlerCallback):xE.preHandlerCallback(null,e.request,e)}function WE(e,t,r,n){let s=CF(e,r,n);return s?s(t):JSON.stringify(t)}function YF(){}_u.exports=ke;_u.exports.buildReply=KF;_u.exports.setupResponseListeners=BF});var QE=v((LG,XE)=>{"use strict";XE.exports=WF;function WF(e){if(!e)throw new TypeError("argument req is required");var t=QF(e.headers["x-forwarded-for"]||""),r=XF(e),n=[r].concat(t);return n}function XF(e){return e.socket?e.socket.remoteAddress:e.connection.remoteAddress}function QF(e){for(var t=e.length,r=[],n=e.length,s=e.length-1;s>=0;s--)switch(e.charCodeAt(s)){case 32:n===t&&(n=t=s);break;case 44:n!==t&&r.push(e.substring(n,t)),n=t=s;break;default:n=s;break}return n!==t&&r.push(e.substring(n,t)),r}});var eS=v((ZE,uo)=>{(function(){var e,t,r,n,s,i,o,a,l;t={},a=this,typeof uo<"u"&&uo!==null&&uo.exports?uo.exports=t:a.ipaddr=t,o=function(u,c,f,h){var d,m;if(u.length!==c.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(d=0;h>0;){if(m=f-h,m<0&&(m=0),u[d]>>m!==c[d]>>m)return!1;h-=f,d+=1}return!0},t.subnetMatch=function(u,c,f){var h,d,m,y,S;f==null&&(f="unicast");for(m in c)for(y=c[m],y[0]&&!(y[0]instanceof Array)&&(y=[y]),h=0,d=y.length;h<d;h++)if(S=y[h],u.kind()===S[0].kind()&&u.match.apply(u,S))return m;return f},t.IPv4=function(){function u(c){var f,h,d;if(c.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");for(f=0,h=c.length;f<h;f++)if(d=c[f],!(0<=d&&d<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=c}return u.prototype.kind=function(){return"ipv4"},u.prototype.toString=function(){return this.octets.join(".")},u.prototype.toNormalizedString=function(){return this.toString()},u.prototype.toByteArray=function(){return this.octets.slice(0)},u.prototype.match=function(c,f){var h;if(f===void 0&&(h=c,c=h[0],f=h[1]),c.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return o(this.octets,c.octets,8,f)},u.prototype.SpecialRanges={unspecified:[[new u([0,0,0,0]),8]],broadcast:[[new u([255,255,255,255]),32]],multicast:[[new u([224,0,0,0]),4]],linkLocal:[[new u([169,254,0,0]),16]],loopback:[[new u([127,0,0,0]),8]],carrierGradeNat:[[new u([100,64,0,0]),10]],private:[[new u([10,0,0,0]),8],[new u([172,16,0,0]),12],[new u([192,168,0,0]),16]],reserved:[[new u([192,0,0,0]),24],[new u([192,0,2,0]),24],[new u([192,88,99,0]),24],[new u([198,51,100,0]),24],[new u([203,0,113,0]),24],[new u([240,0,0,0]),4]]},u.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},u.prototype.toIPv4MappedAddress=function(){return t.IPv6.parse("::ffff:"+this.toString())},u.prototype.prefixLengthFromSubnetMask=function(){var c,f,h,d,m,y,S;for(S={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},c=0,m=!1,f=h=3;h>=0;f=h+=-1)if(d=this.octets[f],d in S){if(y=S[d],m&&y!==0)return null;y!==8&&(m=!0),c+=y}else return null;return 32-c},u}(),r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^"+r+"\\."+r+"\\."+r+"\\."+r+"$","i"),longValue:new RegExp("^"+r+"$","i")},t.IPv4.parser=function(u){var c,f,h,d,m;if(f=function(y){return y[0]==="0"&&y[1]!=="x"?parseInt(y,8):parseInt(y)},c=u.match(n.fourOctet))return function(){var y,S,_,b;for(_=c.slice(1,6),b=[],y=0,S=_.length;y<S;y++)h=_[y],b.push(f(h));return b}();if(c=u.match(n.longValue)){if(m=f(c[1]),m>4294967295||m<0)throw new Error("ipaddr: address outside defined range");return function(){var y,S;for(S=[],d=y=0;y<=24;d=y+=8)S.push(m>>d&255);return S}().reverse()}else return null},t.IPv6=function(){function u(c,f){var h,d,m,y,S,_;if(c.length===16)for(this.parts=[],h=d=0;d<=14;h=d+=2)this.parts.push(c[h]<<8|c[h+1]);else if(c.length===8)this.parts=c;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(_=this.parts,m=0,y=_.length;m<y;m++)if(S=_[m],!(0<=S&&S<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");f&&(this.zoneId=f)}return u.prototype.kind=function(){return"ipv6"},u.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},u.prototype.toRFC5952String=function(){var c,f,h,d,m;for(d=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString(),c=0,f=-1;h=d.exec(m);)h[0].length>f&&(c=h.index,f=h[0].length);return f<0?m:m.substring(0,c)+"::"+m.substring(c+f)},u.prototype.toByteArray=function(){var c,f,h,d,m;for(c=[],m=this.parts,f=0,h=m.length;f<h;f++)d=m[f],c.push(d>>8),c.push(d&255);return c},u.prototype.toNormalizedString=function(){var c,f,h;return c=function(){var d,m,y,S;for(y=this.parts,S=[],d=0,m=y.length;d<m;d++)f=y[d],S.push(f.toString(16));return S}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),c+h},u.prototype.toFixedLengthString=function(){var c,f,h;return c=function(){var d,m,y,S;for(y=this.parts,S=[],d=0,m=y.length;d<m;d++)f=y[d],S.push(f.toString(16).padStart(4,"0"));return S}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),c+h},u.prototype.match=function(c,f){var h;if(f===void 0&&(h=c,c=h[0],f=h[1]),c.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return o(this.parts,c.parts,16,f)},u.prototype.SpecialRanges={unspecified:[new u([0,0,0,0,0,0,0,0]),128],linkLocal:[new u([65152,0,0,0,0,0,0,0]),10],multicast:[new u([65280,0,0,0,0,0,0,0]),8],loopback:[new u([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new u([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new u([0,0,0,0,0,65535,0,0]),96],rfc6145:[new u([0,0,0,0,65535,0,0,0]),96],rfc6052:[new u([100,65435,0,0,0,0,0,0]),96],"6to4":[new u([8194,0,0,0,0,0,0,0]),16],teredo:[new u([8193,0,0,0,0,0,0,0]),32],reserved:[[new u([8193,3512,0,0,0,0,0,0]),32]]},u.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},u.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},u.prototype.toIPv4Address=function(){var c,f,h;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return h=this.parts.slice(-2),c=h[0],f=h[1],new t.IPv4([c>>8,c&255,f>>8,f&255])},u.prototype.prefixLengthFromSubnetMask=function(){var c,f,h,d,m,y,S;for(S={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},c=0,m=!1,f=h=7;h>=0;f=h+=-1)if(d=this.parts[f],d in S){if(y=S[d],m&&y!==0)return null;y!==16&&(m=!0),c+=y}else return null;return 128-c},u}(),s="(?:[0-9a-f]+::?)+",l="%[0-9a-z]{1,}",i={zoneIndex:new RegExp(l,"i"),native:new RegExp("^(::)?("+s+")?([0-9a-f]+)?(::)?("+l+")?$","i"),transitional:new RegExp("^((?:"+s+")|(?:::)(?:"+s+")?)"+(r+"\\."+r+"\\."+r+"\\."+r)+("("+l+")?$"),"i")},e=function(u,c){var f,h,d,m,y,S;if(u.indexOf("::")!==u.lastIndexOf("::"))return null;for(S=(u.match(i.zoneIndex)||[])[0],S&&(S=S.substring(1),u=u.replace(/%.+$/,"")),f=0,h=-1;(h=u.indexOf(":",h+1))>=0;)f++;if(u.substr(0,2)==="::"&&f--,u.substr(-2,2)==="::"&&f--,f>c)return null;for(y=c-f,m=":";y--;)m+="0:";return u=u.replace("::",m),u[0]===":"&&(u=u.slice(1)),u[u.length-1]===":"&&(u=u.slice(0,-1)),c=function(){var _,b,g,p;for(g=u.split(":"),p=[],_=0,b=g.length;_<b;_++)d=g[_],p.push(parseInt(d,16));return p}(),{parts:c,zoneId:S}},t.IPv6.parser=function(u){var c,f,h,d,m,y,S;if(i.native.test(u))return e(u,8);if((d=u.match(i.transitional))&&(S=d[6]||"",c=e(d[1].slice(0,-1)+S,6),c.parts)){for(y=[parseInt(d[2]),parseInt(d[3]),parseInt(d[4]),parseInt(d[5])],f=0,h=y.length;f<h;f++)if(m=y[f],!(0<=m&&m<=255))return null;return c.parts.push(y[0]<<8|y[1]),c.parts.push(y[2]<<8|y[3]),{parts:c.parts,zoneId:c.zoneId}}return null},t.IPv4.isIPv4=t.IPv6.isIPv6=function(u){return this.parser(u)!==null},t.IPv4.isValid=function(u){var c;try{return new this(this.parser(u)),!0}catch(f){return c=f,!1}},t.IPv4.isValidFourPartDecimal=function(u){return!!(t.IPv4.isValid(u)&&u.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},t.IPv6.isValid=function(u){var c,f;if(typeof u=="string"&&u.indexOf(":")===-1)return!1;try{return c=this.parser(u),new this(c.parts,c.zoneId),!0}catch(h){return f=h,!1}},t.IPv4.parse=function(u){var c;if(c=this.parser(u),c===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(c)},t.IPv6.parse=function(u){var c;if(c=this.parser(u),c.parts===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(c.parts,c.zoneId)},t.IPv4.parseCIDR=function(u){var c,f,h;if((f=u.match(/^(.+)\/(\d+)$/))&&(c=parseInt(f[2]),c>=0&&c<=32))return h=[this.parse(f[1]),c],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},t.IPv4.subnetMaskFromPrefixLength=function(u){var c,f,h;if(u=parseInt(u),u<0||u>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(h=[0,0,0,0],f=0,c=Math.floor(u/8);f<c;)h[f]=255,f++;return c<4&&(h[c]=Math.pow(2,u%8)-1<<8-u%8),new this(h)},t.IPv4.broadcastAddressFromCIDR=function(u){var c,f,h,d,m,y;try{for(c=this.parseCIDR(u),d=c[0].toByteArray(),y=this.subnetMaskFromPrefixLength(c[1]).toByteArray(),m=[],h=0;h<4;)m.push(parseInt(d[h],10)|parseInt(y[h],10)^255),h++;return new this(m)}catch(S){throw f=S,new Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv4.networkAddressFromCIDR=function(u){var c,f,h,d,m,y;try{for(c=this.parseCIDR(u),d=c[0].toByteArray(),y=this.subnetMaskFromPrefixLength(c[1]).toByteArray(),m=[],h=0;h<4;)m.push(parseInt(d[h],10)&parseInt(y[h],10)),h++;return new this(m)}catch(S){throw f=S,new Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv6.parseCIDR=function(u){var c,f,h;if((f=u.match(/^(.+)\/(\d+)$/))&&(c=parseInt(f[2]),c>=0&&c<=128))return h=[this.parse(f[1]),c],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},t.isValid=function(u){return t.IPv6.isValid(u)||t.IPv4.isValid(u)},t.parse=function(u){if(t.IPv6.isValid(u))return t.IPv6.parse(u);if(t.IPv4.isValid(u))return t.IPv4.parse(u);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},t.parseCIDR=function(u){var c;try{return t.IPv6.parseCIDR(u)}catch(f){c=f;try{return t.IPv4.parseCIDR(u)}catch(h){throw c=h,new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},t.fromByteArray=function(u){var c;if(c=u.length,c===4)return new t.IPv4(u);if(c===16)return new t.IPv6(u);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},t.process=function(u){var c;return c=this.parse(u),c.kind()==="ipv6"&&c.isIPv4MappedAddress()?c.toIPv4Address():c}}).call(ZE)});var iS=v((xG,bu)=>{"use strict";bu.exports=i2;bu.exports.all=nS;bu.exports.compile=sS;var ZF=QE(),rS=eS(),e2=/^[0-9]+$/,Eu=rS.isValid,Su=rS.parse,tS={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function nS(e,t){var r=ZF(e);if(!t)return r;typeof t!="function"&&(t=sS(t));for(var n=0;n<r.length-1;n++)t(r[n],n)||(r.length=n+1);return r}function sS(e){if(!e)throw new TypeError("argument is required");var t;if(typeof e=="string")t=[e];else if(Array.isArray(e))t=e.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<t.length;r++)e=t[r],Object.prototype.hasOwnProperty.call(tS,e)&&(e=tS[e],t.splice.apply(t,[r,1].concat(e)),r+=e.length-1);return r2(t2(t))}function t2(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=n2(e[r]);return t}function r2(e){var t=e.length;return t===0?o2:t===1?u2(e[0]):a2(e)}function n2(e){var t=e.lastIndexOf("/"),r=t!==-1?e.substring(0,t):e;if(!Eu(r))throw new TypeError("invalid IP address: "+r);var n=Su(r);t===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());var s=n.kind()==="ipv6"?128:32,i=t!==-1?e.substring(t+1,e.length):null;if(i===null?i=s:e2.test(i)?i=parseInt(i,10):n.kind()==="ipv4"&&Eu(i)?i=s2(i):i=null,i<=0||i>s)throw new TypeError("invalid range on address: "+e);return[n,i]}function s2(e){var t=Su(e),r=t.kind();return r==="ipv4"?t.prefixLengthFromSubnetMask():null}function i2(e,t){if(!e)throw new TypeError("req argument is required");if(!t)throw new TypeError("trust argument is required");var r=nS(e,t),n=r[r.length-1];return n}function o2(){return!1}function a2(e){return function(r){if(!Eu(r))return!1;for(var n=Su(r),s,i=n.kind(),o=0;o<e.length;o++){var a=e[o],l=a[0],u=l.kind(),c=a[1],f=n;if(i!==u){if(u==="ipv4"&&!n.isIPv4MappedAddress())continue;s||(s=u==="ipv4"?n.toIPv4Address():n.toIPv4MappedAddress()),f=s}if(f.match(l,c))return!0}return!1}}function u2(e){var t=e[0],r=t.kind(),n=r==="ipv4",s=e[1];return function(o){if(!Eu(o))return!1;var a=Su(o),l=a.kind();if(l!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(t,s)}}});var lo=v((FG,oS)=>{var l2="2.0.0",c2=Number.MAX_SAFE_INTEGER||9007199254740991,f2=16,d2=["major","premajor","minor","preminor","patch","prepatch","prerelease"];oS.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:f2,MAX_SAFE_INTEGER:c2,RELEASE_TYPES:d2,SEMVER_SPEC_VERSION:l2,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var co=v((MG,aS)=>{var h2=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};aS.exports=h2});var Bs=v((yn,uS)=>{var{MAX_SAFE_COMPONENT_LENGTH:ih}=lo(),p2=co();yn=uS.exports={};var m2=yn.re=[],G=yn.src=[],K=yn.t={},y2=0,ie=(e,t,r)=>{let n=y2++;p2(e,n,t),K[e]=n,G[n]=t,m2[n]=new RegExp(t,r?"g":void 0)};ie("NUMERICIDENTIFIER","0|[1-9]\\d*");ie("NUMERICIDENTIFIERLOOSE","[0-9]+");ie("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ie("MAINVERSION",`(${G[K.NUMERICIDENTIFIER]})\\.(${G[K.NUMERICIDENTIFIER]})\\.(${G[K.NUMERICIDENTIFIER]})`);ie("MAINVERSIONLOOSE",`(${G[K.NUMERICIDENTIFIERLOOSE]})\\.(${G[K.NUMERICIDENTIFIERLOOSE]})\\.(${G[K.NUMERICIDENTIFIERLOOSE]})`);ie("PRERELEASEIDENTIFIER",`(?:${G[K.NUMERICIDENTIFIER]}|${G[K.NONNUMERICIDENTIFIER]})`);ie("PRERELEASEIDENTIFIERLOOSE",`(?:${G[K.NUMERICIDENTIFIERLOOSE]}|${G[K.NONNUMERICIDENTIFIER]})`);ie("PRERELEASE",`(?:-(${G[K.PRERELEASEIDENTIFIER]}(?:\\.${G[K.PRERELEASEIDENTIFIER]})*))`);ie("PRERELEASELOOSE",`(?:-?(${G[K.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${G[K.PRERELEASEIDENTIFIERLOOSE]})*))`);ie("BUILDIDENTIFIER","[0-9A-Za-z-]+");ie("BUILD",`(?:\\+(${G[K.BUILDIDENTIFIER]}(?:\\.${G[K.BUILDIDENTIFIER]})*))`);ie("FULLPLAIN",`v?${G[K.MAINVERSION]}${G[K.PRERELEASE]}?${G[K.BUILD]}?`);ie("FULL",`^${G[K.FULLPLAIN]}$`);ie("LOOSEPLAIN",`[v=\\s]*${G[K.MAINVERSIONLOOSE]}${G[K.PRERELEASELOOSE]}?${G[K.BUILD]}?`);ie("LOOSE",`^${G[K.LOOSEPLAIN]}$`);ie("GTLT","((?:<|>)?=?)");ie("XRANGEIDENTIFIERLOOSE",`${G[K.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ie("XRANGEIDENTIFIER",`${G[K.NUMERICIDENTIFIER]}|x|X|\\*`);ie("XRANGEPLAIN",`[v=\\s]*(${G[K.XRANGEIDENTIFIER]})(?:\\.(${G[K.XRANGEIDENTIFIER]})(?:\\.(${G[K.XRANGEIDENTIFIER]})(?:${G[K.PRERELEASE]})?${G[K.BUILD]}?)?)?`);ie("XRANGEPLAINLOOSE",`[v=\\s]*(${G[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[K.XRANGEIDENTIFIERLOOSE]})(?:${G[K.PRERELEASELOOSE]})?${G[K.BUILD]}?)?)?`);ie("XRANGE",`^${G[K.GTLT]}\\s*${G[K.XRANGEPLAIN]}$`);ie("XRANGELOOSE",`^${G[K.GTLT]}\\s*${G[K.XRANGEPLAINLOOSE]}$`);ie("COERCE",`(^|[^\\d])(\\d{1,${ih}})(?:\\.(\\d{1,${ih}}))?(?:\\.(\\d{1,${ih}}))?(?:$|[^\\d])`);ie("COERCERTL",G[K.COERCE],!0);ie("LONETILDE","(?:~>?)");ie("TILDETRIM",`(\\s*)${G[K.LONETILDE]}\\s+`,!0);yn.tildeTrimReplace="$1~";ie("TILDE",`^${G[K.LONETILDE]}${G[K.XRANGEPLAIN]}$`);ie("TILDELOOSE",`^${G[K.LONETILDE]}${G[K.XRANGEPLAINLOOSE]}$`);ie("LONECARET","(?:\\^)");ie("CARETTRIM",`(\\s*)${G[K.LONECARET]}\\s+`,!0);yn.caretTrimReplace="$1^";ie("CARET",`^${G[K.LONECARET]}${G[K.XRANGEPLAIN]}$`);ie("CARETLOOSE",`^${G[K.LONECARET]}${G[K.XRANGEPLAINLOOSE]}$`);ie("COMPARATORLOOSE",`^${G[K.GTLT]}\\s*(${G[K.LOOSEPLAIN]})$|^$`);ie("COMPARATOR",`^${G[K.GTLT]}\\s*(${G[K.FULLPLAIN]})$|^$`);ie("COMPARATORTRIM",`(\\s*)${G[K.GTLT]}\\s*(${G[K.LOOSEPLAIN]}|${G[K.XRANGEPLAIN]})`,!0);yn.comparatorTrimReplace="$1$2$3";ie("HYPHENRANGE",`^\\s*(${G[K.XRANGEPLAIN]})\\s+-\\s+(${G[K.XRANGEPLAIN]})\\s*$`);ie("HYPHENRANGELOOSE",`^\\s*(${G[K.XRANGEPLAINLOOSE]})\\s+-\\s+(${G[K.XRANGEPLAINLOOSE]})\\s*$`);ie("STAR","(<|>)?=?\\s*\\*");ie("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ie("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var wu=v((VG,lS)=>{var g2=Object.freeze({loose:!0}),_2=Object.freeze({}),v2=e=>e?typeof e!="object"?g2:e:_2;lS.exports=v2});var oh=v((zG,dS)=>{var cS=/^[0-9]+$/,fS=(e,t)=>{let r=cS.test(e),n=cS.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},E2=(e,t)=>fS(t,e);dS.exports={compareIdentifiers:fS,rcompareIdentifiers:E2}});var Et=v((HG,yS)=>{var Ru=co(),{MAX_LENGTH:hS,MAX_SAFE_INTEGER:Tu}=lo(),{re:pS,t:mS}=Bs(),S2=wu(),{compareIdentifiers:Gs}=oh(),Ht=class{constructor(t,r){if(r=S2(r),t instanceof Ht){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>hS)throw new TypeError(`version is longer than ${hS} characters`);Ru("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?pS[mS.LOOSE]:pS[mS.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Tu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Tu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Tu||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Tu)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ru("SemVer.compare",this.version,this.options,t),!(t instanceof Ht)){if(typeof t=="string"&&t===this.version)return 0;t=new Ht(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ht||(t=new Ht(t,this.options)),Gs(this.major,t.major)||Gs(this.minor,t.minor)||Gs(this.patch,t.patch)}comparePre(t){if(t instanceof Ht||(t=new Ht(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=t.prerelease[r];if(Ru("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Gs(n,s)}while(++r)}compareBuild(t){t instanceof Ht||(t=new Ht(t,this.options));let r=0;do{let n=this.build[r],s=t.build[r];if(Ru("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Gs(n,s)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),Gs(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};yS.exports=Ht});var Yn=v((UG,_S)=>{var gS=Et(),b2=(e,t,r=!1)=>{if(e instanceof gS)return e;try{return new gS(e,t)}catch(n){if(!r)return null;throw n}};_S.exports=b2});var ES=v((BG,vS)=>{var w2=Yn(),R2=(e,t)=>{let r=w2(e,t);return r?r.version:null};vS.exports=R2});var bS=v((GG,SS)=>{var T2=Yn(),$2=(e,t)=>{let r=T2(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};SS.exports=$2});var TS=v((KG,RS)=>{var wS=Et(),P2=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new wS(e instanceof wS?e.version:e,r).inc(t,n,s).version}catch{return null}};RS.exports=P2});var OS=v((JG,PS)=>{var $S=Yn(),O2=(e,t)=>{let r=$S(e,null,!0),n=$S(t,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,l=!!o.prerelease.length,u=l?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":l?"prerelease":a.patch?"patch":a.minor?"minor":"major"};PS.exports=O2});var AS=v((YG,IS)=>{var I2=Et(),A2=(e,t)=>new I2(e,t).major;IS.exports=A2});var NS=v((WG,CS)=>{var C2=Et(),N2=(e,t)=>new C2(e,t).minor;CS.exports=N2});var qS=v((XG,kS)=>{var k2=Et(),q2=(e,t)=>new k2(e,t).patch;kS.exports=q2});var DS=v((QG,jS)=>{var j2=Yn(),D2=(e,t)=>{let r=j2(e,t);return r&&r.prerelease.length?r.prerelease:null};jS.exports=D2});var tr=v((ZG,xS)=>{var LS=Et(),L2=(e,t,r)=>new LS(e,r).compare(new LS(t,r));xS.exports=L2});var MS=v((e8,FS)=>{var x2=tr(),F2=(e,t,r)=>x2(t,e,r);FS.exports=F2});var zS=v((t8,VS)=>{var M2=tr(),V2=(e,t)=>M2(e,t,!0);VS.exports=V2});var $u=v((r8,US)=>{var HS=Et(),z2=(e,t,r)=>{let n=new HS(e,r),s=new HS(t,r);return n.compare(s)||n.compareBuild(s)};US.exports=z2});var GS=v((n8,BS)=>{var H2=$u(),U2=(e,t)=>e.sort((r,n)=>H2(r,n,t));BS.exports=U2});var JS=v((s8,KS)=>{var B2=$u(),G2=(e,t)=>e.sort((r,n)=>B2(n,r,t));KS.exports=G2});var fo=v((i8,YS)=>{var K2=tr(),J2=(e,t,r)=>K2(e,t,r)>0;YS.exports=J2});var Pu=v((o8,WS)=>{var Y2=tr(),W2=(e,t,r)=>Y2(e,t,r)<0;WS.exports=W2});var ah=v((a8,XS)=>{var X2=tr(),Q2=(e,t,r)=>X2(e,t,r)===0;XS.exports=Q2});var uh=v((u8,QS)=>{var Z2=tr(),eM=(e,t,r)=>Z2(e,t,r)!==0;QS.exports=eM});var Ou=v((l8,ZS)=>{var tM=tr(),rM=(e,t,r)=>tM(e,t,r)>=0;ZS.exports=rM});var Iu=v((c8,eb)=>{var nM=tr(),sM=(e,t,r)=>nM(e,t,r)<=0;eb.exports=sM});var lh=v((f8,tb)=>{var iM=ah(),oM=uh(),aM=fo(),uM=Ou(),lM=Pu(),cM=Iu(),fM=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return iM(e,r,n);case"!=":return oM(e,r,n);case">":return aM(e,r,n);case">=":return uM(e,r,n);case"<":return lM(e,r,n);case"<=":return cM(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};tb.exports=fM});var nb=v((d8,rb)=>{var dM=Et(),hM=Yn(),{re:Au,t:Cu}=Bs(),pM=(e,t)=>{if(e instanceof dM)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Au[Cu.COERCE]);else{let n;for(;(n=Au[Cu.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Au[Cu.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Au[Cu.COERCERTL].lastIndex=-1}return r===null?null:hM(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};rb.exports=pM});var ib=v((h8,sb)=>{"use strict";sb.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var ab=v((p8,ob)=>{"use strict";ob.exports=be;be.Node=Wn;be.create=be;function be(e){var t=this;if(t instanceof be||(t=new be),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}be.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};be.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};be.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};be.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)yM(this,arguments[e]);return this.length};be.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)gM(this,arguments[e]);return this.length};be.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};be.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};be.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};be.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};be.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};be.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};be.prototype.map=function(e,t){t=t||this;for(var r=new be,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};be.prototype.mapReverse=function(e,t){t=t||this;for(var r=new be,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};be.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)r=e(r,n.value,s),n=n.next;return r};be.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)r=e(r,n.value,s),n=n.prev;return r};be.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};be.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};be.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new be;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(;s!==null&&n<t;n++,s=s.next)r.push(s.value);return r};be.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new be;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,s=this.tail;s!==null&&n>t;n--)s=s.prev;for(;s!==null&&n>e;n--,s=s.prev)r.push(s.value);return r};be.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(var i=[],n=0;s&&n<t;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=mM(this,s,r[n]);return i};be.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function mM(e,t,r){var n=t===e.head?new Wn(r,null,t,e):new Wn(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function yM(e,t){e.tail=new Wn(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function gM(e,t){e.head=new Wn(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Wn(e,t,r,n){if(!(this instanceof Wn))return new Wn(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{ib()(be)}catch{}});var db=v((m8,fb)=>{"use strict";var _M=ab(),Xn=Symbol("max"),Mr=Symbol("length"),Ks=Symbol("lengthCalculator"),po=Symbol("allowStale"),Qn=Symbol("maxAge"),Fr=Symbol("dispose"),ub=Symbol("noDisposeOnSet"),lt=Symbol("lruList"),mr=Symbol("cache"),cb=Symbol("updateAgeOnGet"),ch=()=>1,dh=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[Xn]=t.max||1/0,n=t.length||ch;if(this[Ks]=typeof n!="function"?ch:n,this[po]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Qn]=t.maxAge||0,this[Fr]=t.dispose,this[ub]=t.noDisposeOnSet||!1,this[cb]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Xn]=t||1/0,ho(this)}get max(){return this[Xn]}set allowStale(t){this[po]=!!t}get allowStale(){return this[po]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Qn]=t,ho(this)}get maxAge(){return this[Qn]}set lengthCalculator(t){typeof t!="function"&&(t=ch),t!==this[Ks]&&(this[Ks]=t,this[Mr]=0,this[lt].forEach(r=>{r.length=this[Ks](r.value,r.key),this[Mr]+=r.length})),ho(this)}get lengthCalculator(){return this[Ks]}get length(){return this[Mr]}get itemCount(){return this[lt].length}rforEach(t,r){r=r||this;for(let n=this[lt].tail;n!==null;){let s=n.prev;lb(this,t,n,r),n=s}}forEach(t,r){r=r||this;for(let n=this[lt].head;n!==null;){let s=n.next;lb(this,t,n,r),n=s}}keys(){return this[lt].toArray().map(t=>t.key)}values(){return this[lt].toArray().map(t=>t.value)}reset(){this[Fr]&&this[lt]&&this[lt].length&&this[lt].forEach(t=>this[Fr](t.key,t.value)),this[mr]=new Map,this[lt]=new _M,this[Mr]=0}dump(){return this[lt].map(t=>Nu(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[lt]}set(t,r,n){if(n=n||this[Qn],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[Ks](r,t);if(this[mr].has(t)){if(i>this[Xn])return Js(this,this[mr].get(t)),!1;let l=this[mr].get(t).value;return this[Fr]&&(this[ub]||this[Fr](t,l.value)),l.now=s,l.maxAge=n,l.value=r,this[Mr]+=i-l.length,l.length=i,this.get(t),ho(this),!0}let o=new hh(t,r,i,s,n);return o.length>this[Xn]?(this[Fr]&&this[Fr](t,r),!1):(this[Mr]+=o.length,this[lt].unshift(o),this[mr].set(t,this[lt].head),ho(this),!0)}has(t){if(!this[mr].has(t))return!1;let r=this[mr].get(t).value;return!Nu(this,r)}get(t){return fh(this,t,!0)}peek(t){return fh(this,t,!1)}pop(){let t=this[lt].tail;return t?(Js(this,t),t.value):null}del(t){Js(this,this[mr].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let s=t[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-r;o>0&&this.set(s.k,s.v,o)}}}prune(){this[mr].forEach((t,r)=>fh(this,r,!1))}},fh=(e,t,r)=>{let n=e[mr].get(t);if(n){let s=n.value;if(Nu(e,s)){if(Js(e,n),!e[po])return}else r&&(e[cb]&&(n.value.now=Date.now()),e[lt].unshiftNode(n));return s.value}},Nu=(e,t)=>{if(!t||!t.maxAge&&!e[Qn])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Qn]&&r>e[Qn]},ho=e=>{if(e[Mr]>e[Xn])for(let t=e[lt].tail;e[Mr]>e[Xn]&&t!==null;){let r=t.prev;Js(e,t),t=r}},Js=(e,t)=>{if(t){let r=t.value;e[Fr]&&e[Fr](r.key,r.value),e[Mr]-=r.length,e[mr].delete(r.key),e[lt].removeNode(t)}},hh=class{constructor(t,r,n,s,i){this.key=t,this.value=r,this.length=n,this.now=s,this.maxAge=i||0}},lb=(e,t,r,n)=>{let s=r.value;Nu(e,s)&&(Js(e,r),e[po]||(s=void 0)),s&&t.call(n,s.value,s.key,e)};fb.exports=dh});var rr=v((y8,yb)=>{var Zn=class{constructor(t,r){if(r=EM(r),t instanceof Zn)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new Zn(t.raw,r);if(t instanceof ph)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!pb(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&PM(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();let n=((this.options.includePrerelease&&TM)|(this.options.loose&&$M))+":"+t,s=hb.get(n);if(s)return s;let i=this.options.loose,o=i?qt[Tt.HYPHENRANGELOOSE]:qt[Tt.HYPHENRANGE];t=t.replace(o,LM(this.options.includePrerelease)),He("hyphen replace",t),t=t.replace(qt[Tt.COMPARATORTRIM],bM),He("comparator trim",t),t=t.replace(qt[Tt.TILDETRIM],wM),t=t.replace(qt[Tt.CARETTRIM],RM),t=t.split(/\s+/).join(" ");let a=t.split(" ").map(f=>OM(f,this.options)).join(" ").split(/\s+/).map(f=>DM(f,this.options));i&&(a=a.filter(f=>(He("loose invalid filter",f,this.options),!!f.match(qt[Tt.COMPARATORLOOSE])))),He("range list",a);let l=new Map,u=a.map(f=>new ph(f,this.options));for(let f of u){if(pb(f))return[f];l.set(f.value,f)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return hb.set(n,c),c}intersects(t,r){if(!(t instanceof Zn))throw new TypeError("a Range is required");return this.set.some(n=>mb(n,r)&&t.set.some(s=>mb(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new SM(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(xM(this.set[r],t,this.options))return!0;return!1}};yb.exports=Zn;var vM=db(),hb=new vM({max:1e3}),EM=wu(),ph=mo(),He=co(),SM=Et(),{re:qt,t:Tt,comparatorTrimReplace:bM,tildeTrimReplace:wM,caretTrimReplace:RM}=Bs(),{FLAG_INCLUDE_PRERELEASE:TM,FLAG_LOOSE:$M}=lo(),pb=e=>e.value==="<0.0.0-0",PM=e=>e.value==="",mb=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,t)),s=n.pop();return r},OM=(e,t)=>(He("comp",e,t),e=CM(e,t),He("caret",e),e=IM(e,t),He("tildes",e),e=kM(e,t),He("xrange",e),e=jM(e,t),He("stars",e),e),$t=e=>!e||e.toLowerCase()==="x"||e==="*",IM=(e,t)=>e.trim().split(/\s+/).map(r=>AM(r,t)).join(" "),AM=(e,t)=>{let r=t.loose?qt[Tt.TILDELOOSE]:qt[Tt.TILDE];return e.replace(r,(n,s,i,o,a)=>{He("tilde",e,n,s,i,o,a);let l;return $t(s)?l="":$t(i)?l=`>=${s}.0.0 <${+s+1}.0.0-0`:$t(o)?l=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(He("replaceTilde pr",a),l=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):l=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,He("tilde return",l),l})},CM=(e,t)=>e.trim().split(/\s+/).map(r=>NM(r,t)).join(" "),NM=(e,t)=>{He("caret",e,t);let r=t.loose?qt[Tt.CARETLOOSE]:qt[Tt.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(s,i,o,a,l)=>{He("caret",e,s,i,o,a,l);let u;return $t(i)?u="":$t(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:$t(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:l?(He("replaceCaret pr",l),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${l} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${l} <${+i+1}.0.0-0`):(He("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),He("caret return",u),u})},kM=(e,t)=>(He("replaceXRanges",e,t),e.split(/\s+/).map(r=>qM(r,t)).join(" ")),qM=(e,t)=>{e=e.trim();let r=t.loose?qt[Tt.XRANGELOOSE]:qt[Tt.XRANGE];return e.replace(r,(n,s,i,o,a,l)=>{He("xRange",e,n,s,i,o,a,l);let u=$t(i),c=u||$t(o),f=c||$t(a),h=f;return s==="="&&h&&(s=""),l=t.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&h?(c&&(o=0),a=0,s===">"?(s=">=",c?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",c?i=+i+1:o=+o+1),s==="<"&&(l="-0"),n=`${s+i}.${o}.${a}${l}`):c?n=`>=${i}.0.0${l} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${l} <${i}.${+o+1}.0-0`),He("xRange return",n),n})},jM=(e,t)=>(He("replaceStars",e,t),e.trim().replace(qt[Tt.STAR],"")),DM=(e,t)=>(He("replaceGTE0",e,t),e.trim().replace(qt[t.includePrerelease?Tt.GTE0PRE:Tt.GTE0],"")),LM=e=>(t,r,n,s,i,o,a,l,u,c,f,h,d)=>($t(n)?r="":$t(s)?r=`>=${n}.0.0${e?"-0":""}`:$t(i)?r=`>=${n}.${s}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,$t(u)?l="":$t(c)?l=`<${+u+1}.0.0-0`:$t(f)?l=`<${u}.${+c+1}.0-0`:h?l=`<=${u}.${c}.${f}-${h}`:e?l=`<${u}.${c}.${+f+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),xM=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(He(e[n].semver),e[n].semver!==ph.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}});var mo=v((g8,bb)=>{var yo=Symbol("SemVer ANY"),Ys=class{static get ANY(){return yo}constructor(t,r){if(r=gb(r),t instanceof Ys){if(t.loose===!!r.loose)return t;t=t.value}yh("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===yo?this.value="":this.value=this.operator+this.semver.version,yh("comp",this)}parse(t){let r=this.options.loose?_b[vb.COMPARATORLOOSE]:_b[vb.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Eb(n[2],this.options.loose):this.semver=yo}toString(){return this.value}test(t){if(yh("Comparator.test",t,this.options.loose),this.semver===yo||t===yo)return!0;if(typeof t=="string")try{t=new Eb(t,this.options)}catch{return!1}return mh(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof Ys))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Sb(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new Sb(this.value,r).test(t.semver):(r=gb(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||mh(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||mh(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};bb.exports=Ys;var gb=wu(),{re:_b,t:vb}=Bs(),mh=lh(),yh=co(),Eb=Et(),Sb=rr()});var go=v((_8,wb)=>{var FM=rr(),MM=(e,t,r)=>{try{t=new FM(t,r)}catch{return!1}return t.test(e)};wb.exports=MM});var Tb=v((v8,Rb)=>{var VM=rr(),zM=(e,t)=>new VM(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Rb.exports=zM});var Pb=v((E8,$b)=>{var HM=Et(),UM=rr(),BM=(e,t,r)=>{let n=null,s=null,i=null;try{i=new UM(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new HM(n,r))}),n};$b.exports=BM});var Ib=v((S8,Ob)=>{var GM=Et(),KM=rr(),JM=(e,t,r)=>{let n=null,s=null,i=null;try{i=new KM(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new GM(n,r))}),n};Ob.exports=JM});var Nb=v((b8,Cb)=>{var gh=Et(),YM=rr(),Ab=fo(),WM=(e,t)=>{e=new YM(e,t);let r=new gh("0.0.0");if(e.test(r)||(r=new gh("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new gh(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Ab(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||Ab(r,i))&&(r=i)}return r&&e.test(r)?r:null};Cb.exports=WM});var qb=v((w8,kb)=>{var XM=rr(),QM=(e,t)=>{try{return new XM(e,t).range||"*"}catch{return null}};kb.exports=QM});var ku=v((R8,xb)=>{var ZM=Et(),Lb=mo(),{ANY:eV}=Lb,tV=rr(),rV=go(),jb=fo(),Db=Pu(),nV=Iu(),sV=Ou(),iV=(e,t,r,n)=>{e=new ZM(e,n),t=new tV(t,n);let s,i,o,a,l;switch(r){case">":s=jb,i=nV,o=Db,a=">",l=">=";break;case"<":s=Db,i=sV,o=jb,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rV(e,t,n))return!1;for(let u=0;u<t.set.length;++u){let c=t.set[u],f=null,h=null;if(c.forEach(d=>{d.semver===eV&&(d=new Lb(">=0.0.0")),f=f||d,h=h||d,s(d.semver,f.semver,n)?f=d:o(d.semver,h.semver,n)&&(h=d)}),f.operator===a||f.operator===l||(!h.operator||h.operator===a)&&i(e,h.semver))return!1;if(h.operator===l&&o(e,h.semver))return!1}return!0};xb.exports=iV});var Mb=v((T8,Fb)=>{var oV=ku(),aV=(e,t,r)=>oV(e,t,">",r);Fb.exports=aV});var zb=v(($8,Vb)=>{var uV=ku(),lV=(e,t,r)=>uV(e,t,"<",r);Vb.exports=lV});var Bb=v((P8,Ub)=>{var Hb=rr(),cV=(e,t,r)=>(e=new Hb(e,r),t=new Hb(t,r),e.intersects(t,r));Ub.exports=cV});var Kb=v((O8,Gb)=>{var fV=go(),dV=tr();Gb.exports=(e,t,r)=>{let n=[],s=null,i=null,o=e.sort((c,f)=>dV(c,f,r));for(let c of o)fV(c,t,r)?(i=c,s||(s=c)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[c,f]of n)c===f?a.push(c):!f&&c===o[0]?a.push("*"):f?c===o[0]?a.push(`<=${f}`):a.push(`${c} - ${f}`):a.push(`>=${c}`);let l=a.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return l.length<u.length?l:t}});var Zb=v((I8,Qb)=>{var Jb=rr(),vh=mo(),{ANY:_h}=vh,_o=go(),Eh=tr(),hV=(e,t,r={})=>{if(e===t)return!0;e=new Jb(e,r),t=new Jb(t,r);let n=!1;e:for(let s of e.set){for(let i of t.set){let o=mV(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},pV=[new vh(">=0.0.0-0")],Yb=[new vh(">=0.0.0")],mV=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===_h){if(t.length===1&&t[0].semver===_h)return!0;r.includePrerelease?e=pV:e=Yb}if(t.length===1&&t[0].semver===_h){if(r.includePrerelease)return!0;t=Yb}let n=new Set,s,i;for(let d of e)d.operator===">"||d.operator===">="?s=Wb(s,d,r):d.operator==="<"||d.operator==="<="?i=Xb(i,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Eh(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let d of n){if(s&&!_o(d,String(s),r)||i&&!_o(d,String(i),r))return null;for(let m of t)if(!_o(d,String(m),r))return!1;return!0}let a,l,u,c,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of t){if(c=c||d.operator===">"||d.operator===">=",u=u||d.operator==="<"||d.operator==="<=",s){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=Wb(s,d,r),a===d&&a!==s)return!1}else if(s.operator===">="&&!_o(s.semver,String(d),r))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(l=Xb(i,d,r),l===d&&l!==i)return!1}else if(i.operator==="<="&&!_o(i.semver,String(d),r))return!1}if(!d.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&c&&!s&&o!==0||h||f)},Wb=(e,t,r)=>{if(!e)return t;let n=Eh(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Xb=(e,t,r)=>{if(!e)return t;let n=Eh(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};Qb.exports=hV});var bh=v((A8,rw)=>{var Sh=Bs(),ew=lo(),yV=Et(),tw=oh(),gV=Yn(),_V=ES(),vV=bS(),EV=TS(),SV=OS(),bV=AS(),wV=NS(),RV=qS(),TV=DS(),$V=tr(),PV=MS(),OV=zS(),IV=$u(),AV=GS(),CV=JS(),NV=fo(),kV=Pu(),qV=ah(),jV=uh(),DV=Ou(),LV=Iu(),xV=lh(),FV=nb(),MV=mo(),VV=rr(),zV=go(),HV=Tb(),UV=Pb(),BV=Ib(),GV=Nb(),KV=qb(),JV=ku(),YV=Mb(),WV=zb(),XV=Bb(),QV=Kb(),ZV=Zb();rw.exports={parse:gV,valid:_V,clean:vV,inc:EV,diff:SV,major:bV,minor:wV,patch:RV,prerelease:TV,compare:$V,rcompare:PV,compareLoose:OV,compareBuild:IV,sort:AV,rsort:CV,gt:NV,lt:kV,eq:qV,neq:jV,gte:DV,lte:LV,cmp:xV,coerce:FV,Comparator:MV,Range:VV,satisfies:zV,toComparators:HV,maxSatisfying:UV,minSatisfying:BV,minVersion:GV,validRange:KV,outside:JV,gtr:YV,ltr:WV,intersects:XV,simplifyRange:QV,subset:ZV,SemVer:yV,re:Sh.re,src:Sh.src,tokens:Sh.t,SEMVER_SPEC_VERSION:ew.SEMVER_SPEC_VERSION,RELEASE_TYPES:ew.RELEASE_TYPES,compareIdentifiers:tw.compareIdentifiers,rcompareIdentifiers:tw.rcompareIdentifiers}});var ju=v((C8,Th)=>{"use strict";var qu=iS(),ez=bh(),nw=en(),{kHasBeenDecorated:tz,kSchemaBody:rz,kSchemaHeaders:nz,kSchemaParams:sz,kSchemaQuerystring:sw,kSchemaController:wh,kOptions:iz,kRequestCacheValidateFns:gn,kRouteContext:Je,kPublicRouteContext:iw}=at(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:oz}=gt(),ow={body:rz,headers:nz,params:sz,querystring:sw,query:sw};function Rh(e,t,r,n,s,i){this.id=e,this[Je]=i,this.params=t,this.raw=r,this.query=n,this.log=s,this.body=void 0}Rh.props=[];function az(e){if(typeof e=="function")return e;if(e===!0)return function(){return!0};if(typeof e=="number")return function(t,r){return r<e};if(typeof e=="string"){let t=e.split(",").map(r=>r.trim());return qu.compile(t)}return qu.compile(e)}function uz(e,t){return t?lz(e,t):uw(e)}function uw(e){let t=[...e.props];function r(n,s,i,o,a,l){this.id=n,this[Je]=l,this.params=s,this.raw=i,this.query=o,this.log=a,this.body=void 0;for(var u,c=0;c<t.length;c++)u=t[c],this[u.key]=u.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.props=t,r.parent=e,r}function aw(e){let t=e.lastIndexOf(",");return t===-1?e.trim():e.slice(t+1).trim()}function lz(e,t){let r=uw(e),n=az(t);return r[tz]=!0,Object.defineProperties(r.prototype,{ip:{get(){return qu(this.raw,n)}},ips:{get(){return qu.all(this.raw,n)}},hostname:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?aw(this.headers["x-forwarded-host"]):this.headers.host||this.headers[":authority"]}},protocol:{get(){if(this.headers["x-forwarded-proto"])return aw(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}Object.defineProperties(Rh.prototype,{server:{get(){return this[Je].server}},url:{get(){return this.raw.url}},method:{get(){return this.raw.method}},context:{get(){return nw.emit("FSTDEP012"),this[Je]}},routerPath:{get(){return this[Je].config.url}},routeOptions:{get(){let e=this[Je],t=e._parserOptions.limit,r=e.server.initialConfig.bodyLimit,n=e.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,s={method:e.config.method,url:e.config.url,bodyLimit:t||r,attachValidation:e.attachValidation,logLevel:e.logLevel,exposeHeadRoute:e.exposeHeadRoute,prefixTrailingSlash:e.prefixTrailingSlash,version:n};return Object.freeze(s)}},routerMethod:{get(){return this[Je].config.method}},routeConfig:{get(){return this[Je][iw].config}},routeSchema:{get(){return this[Je][iw].schema}},is404:{get(){return this[Je].config.url===void 0}},connection:{get(){return ez.gte(process.versions.node,"13.0.0")&&nw.emit("FSTDEP005"),this.raw.connection}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},hostname:{get(){return this.raw.headers.host||this.raw.headers[":authority"]}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(e){this.additionalHeaders=e}},getValidationFunction:{value:function(e){if(typeof e=="string"){let t=ow[e];return this[Je][t]}else if(typeof e=="object")return this[Je][gn]?.get(e)}},compileValidationSchema:{value:function(e,t=null){let{method:r,url:n}=this;if(this[Je][gn]?.has(e))return this[Je][gn].get(e);let i=(this[Je].validatorCompiler||this.server[wh].validatorCompiler||this.server[wh].setupValidator(this.server[iz])||this.server[wh].validatorCompiler)({schema:e,method:r,url:n,httpPart:t});return this[Je][gn]==null&&(this[Je][gn]=new WeakMap),this[Je][gn].set(e,i),i}},validateInput:{value:function(e,t,r){r=typeof t=="string"?t:r;let n=r!=null&&typeof r=="string"&&ow[r],s;if(n&&(s=this[Je][n]),s==null&&(t==null||typeof t!="object"||Array.isArray(t)))throw new oz(r);return s==null&&(this[Je][gn]?.has(t)?s=this[Je][gn].get(t):s=this.compileValidationSchema(t,r)),s(e)}}});Th.exports=Rh;Th.exports.buildRequest=uz});var $h=v((N8,lw)=>{"use strict";lw.exports={supportedMethods:["DELETE","GET","HEAD","PATCH","POST","PUT","OPTIONS","PROPFIND","PROPPATCH","MKCOL","COPY","MOVE","LOCK","UNLOCK","TRACE","SEARCH"]}});var Ch=v((k8,hw)=>{"use strict";var{kReply:Ph,kRequest:Oh,kState:cz,kHasBeenDecorated:fz}=at(),{FST_ERR_DEC_ALREADY_PRESENT:cw,FST_ERR_DEC_MISSING_DEPENDENCY:dz,FST_ERR_DEC_AFTER_START:hz,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:pz}=gt(),mz=en();function yz(e,t,r,n){if(Object.prototype.hasOwnProperty.call(e,t))throw new cw(t);Ih(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(e,t,{get:r.getter,set:r.setter}):e[t]=r}function fw(e,t,r,n){let s=e.prototype;if(Object.prototype.hasOwnProperty.call(s,t)||Lu(e,t))throw new cw(t);e[fz]=!0,Ih(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,t,{get:r.getter,set:r.setter}):typeof r=="function"?s[t]=r:e.props.push({key:t,value:r})}function dw(e,t){typeof t=="object"&&t&&!(typeof t.getter=="function"||typeof t.setter=="function")&&mz.emit("FSTDEP006",e)}function gz(e,t,r){return Ah(this,e),yz(this,e,t,r),this}function Du(e,t){return t?t in e||e.prototype&&t in e.prototype||Lu(e,t):e in this}function Lu(e,t){return e.props?e.props.find(({key:r})=>r===t):!1}function _z(e){return e&&Lu(this[Oh],e)?!0:Du(this[Oh].prototype,e)}function vz(e){return e&&Lu(this[Ph],e)?!0:Du(this[Ph].prototype,e)}function Ih(e,t,r){if(r!=null){if(!Array.isArray(r))throw new pz(t);for(var n=0;n!==r.length;++n)if(!Du(e,r[n]))throw new dz(r[n])}}function Ez(e,t,r){return Ah(this,e),dw(e,t),fw(this[Ph],e,t,r),this}function Sz(e,t,r){return Ah(this,e),dw(e,t),fw(this[Oh],e,t,r),this}function Ah(e,t){if(e[cz].started)throw new hz(t)}hw.exports={add:gz,exist:Du,existRequest:_z,existReply:vz,dependencies:Ih,decorateReply:Ez,decorateRequest:Sz}});var mw=v(pw=>{"use strict";function xu(e,t){return t in e}var Nh=class{constructor(t=0,r=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=n,this.size=0,this.ttl=r}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(xu(this.items,t)){let r=this.items[t];delete this.items[t],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}return this}evict(t=!1){if(t||this.size>0){let r=this.first;delete this.items[r.key],--this.size===0?(this.first=null,this.last=null):(this.first=r.next,this.first.prev=null)}return this}expiresAt(t){let r;return xu(this.items,t)&&(r=this.items[t].expiry),r}get(t){let r;if(xu(this.items,t)){let n=this.items[t];this.ttl>0&&n.expiry<=Date.now()?this.delete(t):(r=n.value,this.set(t,r,!0))}return r}keys(){return Object.keys(this.items)}set(t,r,n=!1,s=this.resetTtl){let i;if(n||xu(this.items,t)){if(i=this.items[t],i.value=r,s&&(i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==i){let o=this.last,a=i.next,l=i.prev;this.first===i&&(this.first=i.next),i.next=null,i.prev=this.last,o.next=i,l!==null&&(l.next=a),a!==null&&(a.prev=l)}}else this.max>0&&this.size===this.max&&this.evict(!0),i=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r},++this.size===1?this.first=i:this.last.next=i;return this.last=i,this}};function bz(e=1e3,t=0,r=!1){if(isNaN(e)||e<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof r!="boolean")throw new TypeError("Invalid resetTtl value");return new Nh(e,t,r)}pw.lru=bz});var vw=v((j8,vo)=>{"use strict";var Vu=function(){};Vu.prototype=Object.create(null);var Fu=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+)=("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,Mu=/\\([\u000b\u0020-\u00ff])/g,yw=/^[!#$%&'*+.^_|~0-9A-Za-z-]+\/[!#$%&'*+.^_|~0-9A-Za-z-]+$/,es={type:"",parameters:new Vu};Object.freeze(es.parameters);Object.freeze(es);function gw(e){if(typeof e!="string")throw new TypeError("argument header is required and must be a string");let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(yw.test(r)===!1)throw new TypeError("invalid media type");let n={type:r.toLowerCase(),parameters:new Vu};if(t===-1)return n;let s,i,o;for(Fu.lastIndex=t;i=Fu.exec(e);){if(i.index!==t)throw new TypeError("invalid parameter format");t+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),Mu.test(o)&&(o=o.replace(Mu,"$1"))),n.parameters[s]=o}if(t!==e.length)throw new TypeError("invalid parameter format");return n}function _w(e){if(typeof e!="string")return es;let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(yw.test(r)===!1)return es;let n={type:r.toLowerCase(),parameters:new Vu};if(t===-1)return n;let s,i,o;for(Fu.lastIndex=t;i=Fu.exec(e);){if(i.index!==t)return es;t+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),Mu.test(o)&&(o=o.replace(Mu,"$1"))),n.parameters[s]=o}return t!==e.length?es:n}vo.exports.default={parse:gw,safeParse:_w};vo.exports.parse=gw;vo.exports.safeParse=_w;vo.exports.defaultContentType=es});var Rw=v((D8,Ws)=>{"use strict";var wz=typeof Buffer<"u",Ew=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,Sw=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function bw(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),wz&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(s==="ignore"&&i==="ignore")return n;if(s!=="ignore"&&i!=="ignore"){if(Ew.test(e)===!1&&Sw.test(e)===!1)return n}else if(s!=="ignore"&&i==="ignore"){if(Ew.test(e)===!1)return n}else if(Sw.test(e)===!1)return n;return ww(n,{protoAction:s,constructorAction:i,safe:r&&r.safe})}function ww(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let s=[e];for(;s.length;){let i=s;s=[];for(let o of i){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let l=o[a];l&&typeof l=="object"&&s.push(l)}}}return e}function kh(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return bw(e,t,r)}finally{Error.stackTraceLimit=n}}function Rz(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return bw(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}Ws.exports=kh;Ws.exports.default=kh;Ws.exports.parse=kh;Ws.exports.safeParse=Rz;Ws.exports.scan=ww});var xh=v((L8,So)=>{"use strict";var{AsyncResource:Tz}=require("async_hooks"),$w=mw().lru,{safeParse:Pw,defaultContentType:$z}=vw(),Pz=Rw(),{kDefaultJsonParse:Eo,kContentTypeParser:Xs,kBodyLimit:Oz,kRequestPayloadStream:Ow,kState:jh,kTestInternals:Iz,kReplyIsError:Iw,kRouteContext:Az}=at(),{FST_ERR_CTP_INVALID_TYPE:Aw,FST_ERR_CTP_EMPTY_TYPE:Cz,FST_ERR_CTP_ALREADY_PRESENT:Nz,FST_ERR_CTP_INVALID_HANDLER:kz,FST_ERR_CTP_INVALID_PARSE_TYPE:qz,FST_ERR_CTP_BODY_TOO_LARGE:Tw,FST_ERR_CTP_INVALID_MEDIA_TYPE:jz,FST_ERR_CTP_INVALID_CONTENT_LENGTH:Dz,FST_ERR_CTP_EMPTY_JSON_BODY:Lz,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:Dh}=gt();function Vr(e,t,r){this[Eo]=Nw(t,r),this.customParsers=new Map,this.customParsers.set("application/json",new qh(!0,!1,e,this[Eo])),this.customParsers.set("text/plain",new qh(!0,!1,e,Lh)),this.parserList=[new zu("application/json"),new zu("text/plain")],this.parserRegExpList=[],this.cache=$w(100)}Vr.prototype.add=function(e,t,r){let n=typeof e=="string";if(!n&&!(e instanceof RegExp))throw new Aw;if(n&&e.length===0)throw new Cz;if(typeof r!="function")throw new kz;if(this.existingParser(e))throw new Nz(e);if(t.parseAs!==void 0&&t.parseAs!=="string"&&t.parseAs!=="buffer")throw new qz(t.parseAs);let s=new qh(t.parseAs==="string",t.parseAs==="buffer",t.bodyLimit,r);n&&e==="*"?this.customParsers.set("",s):(n?this.parserList.unshift(new zu(e)):(e.isEssence=e.source.indexOf(";")===-1,this.parserRegExpList.unshift(e)),this.customParsers.set(e.toString(),s))};Vr.prototype.hasParser=function(e){return this.customParsers.has(typeof e=="string"?e:e.toString())};Vr.prototype.existingParser=function(e){return e==="application/json"&&this.customParsers.has(e)?this.customParsers.get(e).fn!==this[Eo]:e==="text/plain"&&this.customParsers.has(e)?this.customParsers.get(e).fn!==Lh:this.hasParser(e)};Vr.prototype.getParser=function(e){if(this.hasParser(e))return this.customParsers.get(e);let t=this.cache.get(e);if(t!==void 0)return t;let r=Pw(e);if(r===$z)return this.customParsers.get("");for(var n=0;n!==this.parserList.length;++n){let i=this.parserList[n];if(Hz(r,i)){let o=this.customParsers.get(i.name);return this.cache.set(e,o),o}}for(var s=0;s!==this.parserRegExpList.length;++s){let i=this.parserRegExpList[s];if(Uz(e,r.type,i)){let o=this.customParsers.get(i.toString());return this.cache.set(e,o),o}}return this.customParsers.get("")};Vr.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=$w(100)};Vr.prototype.remove=function(e){if(!(typeof e=="string"||e instanceof RegExp))throw new Aw;let t=this.customParsers.delete(e.toString()),r=typeof e=="string"?this.parserList:this.parserRegExpList,n=r.findIndex(s=>s.toString()===e.toString());return n>-1&&r.splice(n,1),t||n>-1};Vr.prototype.run=function(e,t,r,n){let s=this.getParser(e),i=new Tz("content-type-parser:run",r);if(s===void 0)r.is404?t(r,n):n.send(new jz(e||void 0));else if(s.asString===!0||s.asBuffer===!0)Cw(r,n,n[Az]._parserOptions,s,o);else{let a=s.fn(r,r[Ow],o);a&&typeof a.then=="function"&&a.then(l=>o(null,l),o)}function o(a,l){i.runInAsyncScope(()=>{a?(n[Iw]=!0,n.send(a)):(r.body=l,t(r,n))})}};function Cw(e,t,r,n,s){let i=n.asString,o=r.limit===null?n.bodyLimit:r.limit,a=e.headers["content-length"]===void 0?NaN:Number(e.headers["content-length"]);if(a>o){t.header("connection","close"),t.send(new Tw);return}let l=0,u=i===!0?"":[],c=e[Ow]||e.raw;i===!0&&c.setEncoding("utf8"),c.on("data",f),c.on("end",h),c.on("error",h),c.resume();function f(d){if(l+=d.length,(c.receivedEncodedLength||l)>o){c.removeListener("data",f),c.removeListener("end",h),c.removeListener("error",h),t.send(new Tw);return}i===!0?u+=d:u.push(d)}function h(d){if(c.removeListener("data",f),c.removeListener("end",h),c.removeListener("error",h),d!==void 0){d.statusCode=400,t[Iw]=!0,t.code(d.statusCode).send(d);return}if(i===!0&&(l=Buffer.byteLength(u)),!Number.isNaN(a)&&(c.receivedEncodedLength||l)!==a){t.header("connection","close"),t.send(new Dz);return}i===!1&&(u=Buffer.concat(u));let m=n.fn(e,u,s);m&&typeof m.then=="function"&&m.then(y=>s(null,y),s)}}function Nw(e,t){return r;function r(n,s,i){if(s===""||s==null)return i(new Lz,void 0);let o;try{o=Pz.parse(s,{protoAction:e,constructorAction:t})}catch(a){return a.statusCode=400,i(a,void 0)}i(null,o)}}function Lh(e,t,r){r(null,t)}function qh(e,t,r,n){this.asString=e,this.asBuffer=t,this.bodyLimit=r,this.fn=n}function xz(e){let t=new Vr;return t[Eo]=e[Eo],t.customParsers=new Map(e.customParsers.entries()),t.parserList=e.parserList.slice(),t.parserRegExpList=e.parserRegExpList.slice(),t}function Fz(e,t,r){if(this[jh].started)throw new Dh("addContentTypeParser");return typeof t=="function"&&(r=t,t={}),t||(t={}),t.bodyLimit||(t.bodyLimit=this[Oz]),Array.isArray(e)?e.forEach(n=>this[Xs].add(n,t,r)):this[Xs].add(e,t,r),this}function Mz(e){return this[Xs].hasParser(e)}function Vz(e){if(this[jh].started)throw new Dh("removeContentTypeParser");if(Array.isArray(e))for(let t of e)this[Xs].remove(t);else this[Xs].remove(e)}function zz(){if(this[jh].started)throw new Dh("removeAllContentTypeParsers");this[Xs].removeAll()}function Hz(e,t){if(t.isEssence)return e.type.indexOf(t)!==-1;if(e.type.indexOf(t.type)===-1)return!1;for(let r of t.parameterKeys)if(!(r in e.parameters)||e.parameters[r]!==t.parameters[r])return!1;return!0}function Uz(e,t,r){return r.isEssence?r.test(t):r.test(e)}function zu(e){this.name=e;let t=Pw(e);if(this.isEssence=e.indexOf(";")===-1,this.isEssence===!1&&t.type===""){let r=e.split(";")[0];this.type=r===""?e:r}else this.type=t.type;this.parameters=t.parameters,this.parameterKeys=Object.keys(t.parameters)}zu.prototype.toString=function(){return this.name};So.exports=Vr;So.exports.helpers={buildContentTypeParser:xz,addContentTypeParser:Fz,hasContentTypeParser:Mz,removeContentTypeParser:Vz,removeAllContentTypeParsers:zz};So.exports.defaultParsers={getDefaultJsonParser:Nw,defaultTextParser:Lh};So.exports[Iz]={rawBody:Cw}});var kw=v((x8,Hu)=>{"use strict";var Bz=Object.getPrototypeOf({});function Fh(e){function t(_){return _!=="constructor"&&_!=="prototype"&&_!=="__proto__"}function r(_){let b=0,g=_.length,p=new Array(g);for(b=0;b<g;++b)p[b]=d(_[b]);return p}function n(_){let b={};if(l&&Object.getPrototypeOf(_)!==Bz)return l(_);let g=a(_),p,T,O;for(p=0,T=g.length;p<T;++p)t(O=g[p])&&(b[O]=d(_[O]));return b}function s(_,b){let g=_.length,p=b.length,T=0,O=new Array(g+p);for(T=0;T<g;++T)O[T]=d(_[T]);for(T=0;T<p;++T)O[T+g]=d(b[T]);return O}let i=Object.prototype.propertyIsEnumerable;function o(_){let b=Object.keys(_),g=Object.getOwnPropertySymbols(_);for(let p=0,T=g.length;p<T;++p)i.call(_,g[p])&&b.push(g[p]);return b}let a=e&&e.symbols?o:Object.keys,l=typeof e?.cloneProtoObject=="function"?e.cloneProtoObject:void 0;function u(_){return typeof _=="object"&&_!==null&&!(_ instanceof RegExp)&&!(_ instanceof Date)}function c(_){return typeof _!="object"||_===null}let f=typeof Buffer<"u"?_=>typeof _!="object"||_===null||_ instanceof RegExp||_ instanceof Date||_ instanceof Buffer:_=>typeof _!="object"||_===null||_ instanceof RegExp||_ instanceof Date,h=e&&typeof e.mergeArray=="function"?e.mergeArray({clone:d,deepmerge:y,getKeys:a,isMergeableObject:u}):s;function d(_){return u(_)?Array.isArray(_)?r(_):n(_):_}function m(_,b){let g={},p=a(_),T=a(b),O,w,I;for(O=0,w=p.length;O<w;++O)t(I=p[O])&&T.indexOf(I)===-1&&(g[I]=d(_[I]));for(O=0,w=T.length;O<w;++O)t(I=T[O])&&(I in _&&(p.indexOf(I)!==-1&&(g[I]=y(_[I],b[I])),!0)||(g[I]=d(b[I])));return g}function y(_,b){let g=Array.isArray(b),p=Array.isArray(_);return c(b)?b:f(_)?d(b):g&&p?h(_,b):g!==p?d(b):m(_,b)}function S(){switch(arguments.length){case 0:return{};case 1:return d(arguments[0]);case 2:return y(arguments[0],arguments[1])}let _;for(let b=0,g=arguments.length;b<g;++b)_=y(_,arguments[b]);return _}return e&&e.all?S:y}Hu.exports=Fh;Hu.exports.default=Fh;Hu.exports.deepmerge=Fh});var xw=v((F8,Vh)=>{"use strict";Vh.exports=F;Vh.exports.default=F;var Gz={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},qw={enum:["array","boolean","integer","null","number","object","string"]},jw=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Kz=du().fullFormats.uri,Dw=du().fullFormats.regex;function nr(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0,a=o;return typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e)?o===a&&typeof e=="number"&&isFinite(e)&&(e<0||isNaN(e))?(nr.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(nr.errors=i,o===0):(nr.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var Mh={validate:F};function Pt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(Array.isArray(e)){if(e.length<1)return Pt.errors=[{instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let l=e.length;for(let u=0;u<l;u++){let c=o;Mh.validate(e[u],{instancePath:t+"/"+u,parentData:e,parentDataProperty:u,rootData:s})||(i=i===null?Mh.validate.errors:i.concat(Mh.validate.errors),o=i.length);var a=c===o;if(!a)break}}}else return Pt.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Pt.errors=i,o===0}var Lw=Yi().default;function F(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))&&typeof e!="boolean")return F.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:Gz.type},message:"must be object,boolean"}],!1;if(o===0&&e&&typeof e=="object"&&!Array.isArray(e)){if(e.$id!==void 0){let g=e.$id,p=o;if(o===p&&o===p)if(typeof g=="string"){if(!jw.test(g))return F.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(e.$schema!==void 0){let g=e.$schema,p=o;if(o===p&&o===p)if(typeof g=="string"){if(!Kz(g))return F.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return F.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(e.$ref!==void 0){let g=e.$ref,p=o;if(o===p&&o===p)if(typeof g=="string"){if(!jw.test(g))return F.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(e.$comment!==void 0){let g=o;if(typeof e.$comment!="string")return F.errors=[{instancePath:t+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.title!==void 0){let g=o;if(typeof e.title!="string")return F.errors=[{instancePath:t+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.description!==void 0){let g=o;if(typeof e.description!="string")return F.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.readOnly!==void 0){let g=o;if(typeof e.readOnly!="boolean")return F.errors=[{instancePath:t+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.examples!==void 0){let g=o;if(o===g&&!Array.isArray(e.examples))return F.errors=[{instancePath:t+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=g===o}else var a=!0;if(a){if(e.multipleOf!==void 0){let g=e.multipleOf,p=o;if(o===p)if(typeof g=="number"&&isFinite(g)){if(g<=0||isNaN(g))return F.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return F.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=p===o}else var a=!0;if(a){if(e.maximum!==void 0){let g=e.maximum,p=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=p===o}else var a=!0;if(a){if(e.exclusiveMaximum!==void 0){let g=e.exclusiveMaximum,p=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=p===o}else var a=!0;if(a){if(e.minimum!==void 0){let g=e.minimum,p=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=p===o}else var a=!0;if(a){if(e.exclusiveMinimum!==void 0){let g=e.exclusiveMinimum,p=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=p===o}else var a=!0;if(a){if(e.maxLength!==void 0){let g=e.maxLength,p=o,T=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===T&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=p===o}else var a=!0;if(a){if(e.minLength!==void 0){let g=o;nr(e.minLength,{instancePath:t+"/minLength",parentData:e,parentDataProperty:"minLength",rootData:s})||(i=i===null?nr.errors:i.concat(nr.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.pattern!==void 0){let g=e.pattern,p=o;if(o===p&&o===p)if(typeof g=="string"){if(!Dw(g))return F.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return F.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(e.additionalItems!==void 0){let g=o;F(e.additionalItems,{instancePath:t+"/additionalItems",parentData:e,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.items!==void 0){let g=e.items,p=o,T=o,O=!1,w=o;F(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var l=w===o;if(O=O||l,!O){let k=o;Pt(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?Pt.errors:i.concat(Pt.errors),o=i.length);var l=k===o;O=O||l}if(O)o=T,i!==null&&(T?i.length=T:i=null);else{let k={instancePath:t+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[k]:i.push(k),o++,F.errors=i,!1}var a=p===o}else var a=!0;if(a){if(e.maxItems!==void 0){let g=e.maxItems,p=o,T=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===T&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=p===o}else var a=!0;if(a){if(e.minItems!==void 0){let g=o;nr(e.minItems,{instancePath:t+"/minItems",parentData:e,parentDataProperty:"minItems",rootData:s})||(i=i===null?nr.errors:i.concat(nr.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.uniqueItems!==void 0){let g=o;if(typeof e.uniqueItems!="boolean")return F.errors=[{instancePath:t+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.contains!==void 0){let g=o;F(e.contains,{instancePath:t+"/contains",parentData:e,parentDataProperty:"contains",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.maxProperties!==void 0){let g=e.maxProperties,p=o,T=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===T&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=p===o}else var a=!0;if(a){if(e.minProperties!==void 0){let g=o;nr(e.minProperties,{instancePath:t+"/minProperties",parentData:e,parentDataProperty:"minProperties",rootData:s})||(i=i===null?nr.errors:i.concat(nr.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.required!==void 0){let g=e.required,p=o;if(o===o)if(Array.isArray(g)){var u=!0;let w=g.length;for(let I=0;I<w;I++){let k=o;if(typeof g[I]!="string")return F.errors=[{instancePath:t+"/required/"+I,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=k===o;if(!u)break}if(u){let I=g.length,k;if(I>1){let A={};for(;I--;){let P=g[I];if(typeof P=="string"){if(typeof A[P]=="number"){return k=A[P],F.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:I,j:k},message:"must NOT have duplicate items (items ## "+k+" and "+I+" are identical)"}],!1;break}A[P]=I}}}}}else return F.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=p===o}else var a=!0;if(a){if(e.additionalProperties!==void 0){let g=o;F(e.additionalProperties,{instancePath:t+"/additionalProperties",parentData:e,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.definitions!==void 0){let g=e.definitions,p=o;if(o===p)if(g&&typeof g=="object"&&!Array.isArray(g))for(let O in g){let w=o;F(g[O],{instancePath:t+"/definitions/"+O.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:O,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var c=w===o;if(!c)break}else return F.errors=[{instancePath:t+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=p===o}else var a=!0;if(a){if(e.properties!==void 0){let g=e.properties,p=o;if(o===p)if(g&&typeof g=="object"&&!Array.isArray(g))for(let O in g){let w=o;F(g[O],{instancePath:t+"/properties/"+O.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:O,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var f=w===o;if(!f)break}else return F.errors=[{instancePath:t+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=p===o}else var a=!0;if(a){if(e.patternProperties!==void 0){let g=e.patternProperties,p=o;if(o===p)if(g&&typeof g=="object"&&!Array.isArray(g)){for(let O in g){let w=o;if(o===w&&typeof O=="string"&&!Dw(O)){let I={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:O};i===null?i=[I]:i.push(I),o++}var h=w===o;if(!h){let I={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:O},message:"property name must be valid"};return i===null?i=[I]:i.push(I),o++,F.errors=i,!1;break}}if(h)for(let O in g){let w=o;F(g[O],{instancePath:t+"/patternProperties/"+O.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:O,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var d=w===o;if(!d)break}}else return F.errors=[{instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=p===o}else var a=!0;if(a){if(e.dependencies!==void 0){let g=e.dependencies,p=o;if(o===p)if(g&&typeof g=="object"&&!Array.isArray(g))for(let O in g){let w=g[O],I=o,k=o,A=!1,P=o;F(w,{instancePath:t+"/dependencies/"+O.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:O,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var m=P===o;if(A=A||m,!A){let q=o;if(o===o)if(Array.isArray(w)){var y=!0;let de=w.length;for(let V=0;V<de;V++){let Z=o;if(typeof w[V]!="string"){let H={instancePath:t+"/dependencies/"+O.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+V,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),o++}var y=Z===o;if(!y)break}if(y){let V=w.length,Z;if(V>1){let xe={};for(;V--;){let H=w[V];if(typeof H=="string"){if(typeof xe[H]=="number"){Z=xe[H];let Fe={instancePath:t+"/dependencies/"+O.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:V,j:Z},message:"must NOT have duplicate items (items ## "+Z+" and "+V+" are identical)"};i===null?i=[Fe]:i.push(Fe),o++;break}xe[H]=V}}}}}else{let de={instancePath:t+"/dependencies/"+O.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[de]:i.push(de),o++}var m=q===o;A=A||m}if(A)o=k,i!==null&&(k?i.length=k:i=null);else{let q={instancePath:t+"/dependencies/"+O.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[q]:i.push(q),o++,F.errors=i,!1}var S=I===o;if(!S)break}else return F.errors=[{instancePath:t+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=p===o}else var a=!0;if(a){if(e.propertyNames!==void 0){let g=o;F(e.propertyNames,{instancePath:t+"/propertyNames",parentData:e,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.enum!==void 0){let g=e.enum,p=o;if(o===p)if(Array.isArray(g)){if(g.length<1)return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let O=g.length,w;if(O>1){e:for(;O--;)for(w=O;w--;)if(Lw(g[O],g[w])){return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:O,j:w},message:"must NOT have duplicate items (items ## "+w+" and "+O+" are identical)"}],!1;break e}}}}else return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=p===o}else var a=!0;if(a){if(e.type!==void 0){let g=e.type,p=o,T=o,O=!1,w=o;if(!(g==="array"||g==="boolean"||g==="integer"||g==="null"||g==="number"||g==="object"||g==="string")){let k={instancePath:t+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:qw.enum},message:"must be equal to one of the allowed values"};i===null?i=[k]:i.push(k),o++}var _=w===o;if(O=O||_,!O){let k=o;if(o===k)if(Array.isArray(g))if(g.length<1){let P={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[P]:i.push(P),o++}else{var b=!0;let P=g.length;for(let q=0;q<P;q++){let L=g[q],X=o;if(!(L==="array"||L==="boolean"||L==="integer"||L==="null"||L==="number"||L==="object"||L==="string")){let V={instancePath:t+"/type/"+q,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:qw.enum},message:"must be equal to one of the allowed values"};i===null?i=[V]:i.push(V),o++}var b=X===o;if(!b)break}if(b){let q=g.length,L;if(q>1){e:for(;q--;)for(L=q;L--;)if(Lw(g[q],g[L])){let X={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:q,j:L},message:"must NOT have duplicate items (items ## "+L+" and "+q+" are identical)"};i===null?i=[X]:i.push(X),o++;break e}}}}else{let P={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[P]:i.push(P),o++}var _=k===o;O=O||_}if(O)o=T,i!==null&&(T?i.length=T:i=null);else{let k={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[k]:i.push(k),o++,F.errors=i,!1}var a=p===o}else var a=!0;if(a){if(e.format!==void 0){let g=o;if(typeof e.format!="string")return F.errors=[{instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentMediaType!==void 0){let g=o;if(typeof e.contentMediaType!="string")return F.errors=[{instancePath:t+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentEncoding!==void 0){let g=o;if(typeof e.contentEncoding!="string")return F.errors=[{instancePath:t+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.if!==void 0){let g=o;F(e.if,{instancePath:t+"/if",parentData:e,parentDataProperty:"if",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.then!==void 0){let g=o;F(e.then,{instancePath:t+"/then",parentData:e,parentDataProperty:"then",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.else!==void 0){let g=o;F(e.else,{instancePath:t+"/else",parentData:e,parentDataProperty:"else",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.allOf!==void 0){let g=o;Pt(e.allOf,{instancePath:t+"/allOf",parentData:e,parentDataProperty:"allOf",rootData:s})||(i=i===null?Pt.errors:i.concat(Pt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.anyOf!==void 0){let g=o;Pt(e.anyOf,{instancePath:t+"/anyOf",parentData:e,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Pt.errors:i.concat(Pt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.oneOf!==void 0){let g=o;Pt(e.oneOf,{instancePath:t+"/oneOf",parentData:e,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Pt.errors:i.concat(Pt.errors),o=i.length);var a=g===o}else var a=!0;if(a)if(e.not!==void 0){let g=o;F(e.not,{instancePath:t+"/not",parentData:e,parentDataProperty:"not",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return F.errors=i,o===0}});var Vw=v((M8,Mw)=>{"use strict";var Fw=Ns(),zh=class{constructor(){this.schemas={}}addSchema(t,r){t.$id!==void 0&&t.$id.charAt(0)!=="#"&&(r=t.$id),this.getSchema(r)===void 0&&(this.insertSchemaBySchemaId(t,r),this.insertSchemaSubschemas(t,r))}getSchema(t,r="#"){let n=this.schemas[t];if(n!==void 0)return n.anchors[r]!==void 0?n.anchors[r]:Jz(n.schema,r)}getSchemaDependencies(t,r={}){let n=this.schemas[t];for(let s of n.dependencies)r[s]===void 0&&(r[s]=this.getSchema(s),this.getSchemaDependencies(s,r));return r}insertSchemaBySchemaId(t,r){if(this.schemas[r]!==void 0&&!Fw(t,this.schemas[r].schema))throw new Error(`There is already another schema with id ${r}`);this.schemas[r]={schema:t,anchors:{},dependencies:[]}}insertSchemaByAnchor(t,r,n){let{anchors:s}=this.schemas[r];if(s[n]!==void 0&&!Fw(t,s[n]))throw new Error(`There is already another schema with id ${r}#${n}`);s[n]=t}insertSchemaSubschemas(t,r){let n=t.$id;n!==void 0&&typeof n=="string"&&(n.charAt(0)==="#"?this.insertSchemaByAnchor(t,r,n):(this.insertSchemaBySchemaId(t,n),r=n));let s=t.$ref;if(s!==void 0&&typeof s=="string"&&s.charAt(0)!=="#"){let i=s.split("#")[0];this.schemas[r].dependencies.push(i)}for(let i in t)typeof t[i]=="object"&&t[i]!==null&&this.insertSchemaSubschemas(t[i],r)}};function Jz(e,t){let r=t.split("/"),n=e;for(let s of r)if(!(s===""||s==="#")){if(typeof n!="object"||n===null)return;n=n[s]}return n}Mw.exports=zh});var Hw=v((V8,zw)=>{"use strict";var bo=class{constructor(t,r,n="#"){this.schema=t,this.schemaId=r,this.jsonPointer=n,this.mergedSchemaId=null}getPropertyLocation(t){let r=new bo(this.schema[t],this.schemaId,this.jsonPointer+"/"+t);return this.mergedSchemaId!==null&&r.addMergedSchema(this.schema[t],this.mergedSchemaId,this.jsonPointer+"/"+t),r}getSchemaId(){return this.mergedSchemaId||this.schemaId}getOriginSchemaId(){return this.schemaId}getSchemaRef(){return this.getSchemaId()+this.jsonPointer}addMergedSchema(t,r,n="#"){this.schema=t,this.mergedSchemaId=r,this.jsonPointer=n}};zw.exports=bo});var eR=v((z8,Qs)=>{"use strict";var Hh=kw()(),Yz=Ti()({proto:!0}),{randomUUID:Bw}=require("crypto"),Uw=xw(),Wz=ef(),Xz=Gd(),Qz=Vw(),Gw=Hw(),Uu=2e4,Kw="default",Zz=["floor","ceil","round","trunc"],Jw=["default","json-stringify"],wo="!addComma && (addComma = true) || (json += ',')";function Uh(e,t){if(!Uw(e)){t?t=`"${t}" `:t="";let r=Uw.errors[0],n=new Error(`${t}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=Uh.errors,n}}function Ro(e,t,r){let n=r.indexOf("#");n===-1&&(n=r.length);let s=r.slice(0,n)||t.getOriginSchemaId(),i=r.slice(n)||"#",o=e.refResolver.getSchema(s,i);if(o===void 0)throw new Error(`Cannot find reference "${r}"`);let a=new Gw(o,s,i);return o.$ref!==void 0?Ro(e,a,o.$ref):a}function Bh(e,t){Uh(e),t=t||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:t,refResolver:new Qz,rootSchemaId:e.$id||Bw(),validatorSchemasIds:new Set};if(r.refResolver.addSchema(e,r.rootSchemaId),t.schema)for(let u of Object.keys(t.schema))Uh(t.schema[u],u),r.refResolver.addSchema(t.schema[u],u);if(t.rounding&&!Zz.includes(t.rounding))throw new Error(`Unsupported integer rounding method ${t.rounding}`);if(t.largeArrayMechanism)if(Jw.includes(t.largeArrayMechanism))Kw=t.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${t.largeArrayMechanism}`);if(t.largeArraySize)if(typeof t.largeArraySize=="string"&&Number.isFinite(Number.parseInt(t.largeArraySize,10)))Uu=Number.parseInt(t.largeArraySize,10);else if(typeof t.largeArraySize=="number"&&Number.isInteger(t.largeArraySize))Uu=t.largeArraySize;else if(typeof t.largeArraySize=="bigint")Uu=Number(t.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof t.largeArraySize} with value ${t.largeArraySize}`);let n=new Gw(e,r.rootSchemaId),s=zr(r,n,"input"),i;s==="json += anonymous0(input)"?i=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:i=`
    function main (input) {
      let json = ''
      ${s}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let o=new Wz(t),a=new Xz(t.ajv);for(let u of r.validatorSchemasIds){let c=r.refResolver.getSchema(u);a.addSchema(c,u);let f=r.refResolver.getSchemaDependencies(u);for(let[h,d]of Object.entries(f))a.addSchema(d,h)}if(t.debugMode&&(t.mode="debug"),t.mode==="debug")return{validator:a,serializer:o,code:`validator
serializer
${i}`,ajv:a.ajv};let l=new Function("validator","serializer",i);return t.mode==="standalone"?Jd()(l,r,o,a):l(a,o)}var eH=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],tH=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],rH=["maxLength","minLength","pattern"],nH=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function Yw(e){for(var t of eH)if(t in e)return"object";for(var t of tH)if(t in e)return"array";for(var t of rH)if(t in e)return"string";for(var t of nH)if(t in e)return"number";return e.type}function sH(e,t){let r=t.schema,n=Object.keys(r.properties||{}),s=`
    const propertiesKeys = ${JSON.stringify(n)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,i=t.getPropertyLocation("patternProperties"),o=i.schema;if(o!==void 0)for(let u in o){let c=i.getPropertyLocation(u);s+=`
        if (/${u.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${wo}
          json += serializer.asString(key) + ':'
          ${zr(e,c,"value")}
          continue
        }
      `}let l=t.getPropertyLocation("additionalProperties").schema;if(l!==void 0)if(l===!0)s+=`
        ${wo}
        json += serializer.asString(key) + ':' + JSON.stringify(value)
      `;else{let u=t.getPropertyLocation("additionalProperties");s+=`
        ${wo}
        json += serializer.asString(key) + ':'
        ${zr(e,u,"value")}
      `}return s+=`
    }
  `,s}function iH(e,t){let r=t.schema,n=r.required||[],s="",i=t.getPropertyLocation("properties");Object.keys(r.properties||{}).forEach(o=>{let a=i.getPropertyLocation(o);a.schema.$ref&&(a=Ro(e,t,a.schema.$ref));let l=JSON.stringify(o);s+=`
      if (obj[${l}] !== undefined) {
        ${wo}
        json += ${JSON.stringify(l+":")}
      `,s+=zr(e,a,`obj[${l}]`);let u=a.schema.default;u!==void 0?s+=`
      } else {
        ${wo}
        json += ${JSON.stringify(l+":"+JSON.stringify(u))}
      `:n.includes(o)&&(s+=`
      } else {
        throw new Error('${l} is required!')
      `),s+=`
      }
    `});for(let o of n)r.properties&&r.properties[o]!==void 0||(s+=`if (obj['${o}'] === undefined) throw new Error('"${o}" is required!')
`);return(r.patternProperties||r.additionalProperties)&&(s+=sH(e,t)),s}function Ww(e,t,r,n){let s=t.getPropertyLocation("allOf");for(let i=0;i<r.allOf.length;i++){let o=r.allOf[i];if(o.$ref){let l=s.getPropertyLocation(i);o=Ro(e,l,o.$ref).schema}let a=o.type;if(a===void 0&&(a=Yw(o)),a!==void 0){if(n.type!==void 0&&n.type!==a)throw new Error("allOf schemas have different type values");n.type=a}if(o.format!==void 0){if(n.format!==void 0&&n.format!==o.format)throw new Error("allOf schemas have different format values");n.format=o.format}if(o.nullable!==void 0){if(n.nullable!==void 0&&n.nullable!==o.nullable)throw new Error("allOf schemas have different nullable values");n.nullable=o.nullable}o.properties!==void 0&&(n.properties===void 0&&(n.properties={}),Object.assign(n.properties,o.properties)),o.additionalProperties!==void 0&&(n.additionalProperties===void 0&&(n.additionalProperties={}),Object.assign(n.additionalProperties,o.additionalProperties)),o.patternProperties!==void 0&&(n.patternProperties===void 0&&(n.patternProperties={}),Object.assign(n.patternProperties,o.patternProperties)),o.required!==void 0&&(n.required===void 0&&(n.required=[]),n.required.push(...o.required)),o.oneOf!==void 0&&(n.oneOf===void 0&&(n.oneOf=[]),n.oneOf.push(...o.oneOf)),o.anyOf!==void 0&&(n.anyOf===void 0&&(n.anyOf=[]),n.anyOf.push(...o.anyOf)),o.allOf!==void 0&&Ww(e,t,o,n)}delete n.allOf,n.$id=`merged_${Bw()}`,e.refResolver.addSchema(n),t.addMergedSchema(n,n.$id)}function oH(e,t,r){e.validatorSchemasIds.add(t.getSchemaId());let n=Hh({},t.schema),s=n.then,i=n.else||{additionalProperties:!0};delete n.if,delete n.then,delete n.else;let a=t.getPropertyLocation("if").getSchemaRef(),l=t.getPropertyLocation("then");l.schema=Hh(n,s);let u=t.getPropertyLocation("else");return u.schema=Hh(n,i),`
    if (validator.validate("${a}", ${r})) {
      ${zr(e,l,r)}
    } else {
      ${zr(e,u,r)}
    }
  `}function aH(e){return`(${e} && typeof ${e}.toJSON === 'function')
    ? ${e}.toJSON()
    : ${e}
  `}function uH(e,t){let r=t.schema;if(e.functionsNamesBySchema.has(r))return e.functionsNamesBySchema.get(r);let n=Qw(e);e.functionsNamesBySchema.set(r,n);let s=t.getSchemaRef();s.startsWith(e.rootSchemaId)&&(s=s.replace(e.rootSchemaId,""));let i=`
    function ${n} (input) {
      // ${s}
  `;return i+=`
      const obj = ${aH("input")}
      let json = '{'
      let addComma = false
  `,i+=iH(e,t),i+=`
      return json + '}'
    }
  `,e.functions.push(i),n}function lH(e,t){let r=t.schema,n=t.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=Ro(e,n,n.schema.$ref));let s=n.schema;if(e.functionsNamesBySchema.has(r))return e.functionsNamesBySchema.get(r);let i=Qw(e);e.functionsNamesBySchema.set(r,i);let o=t.getSchemaRef();o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,""));let a=`
    function ${i} (obj) {
      // ${o}
  `;if(a+=`
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),Kw==="json-stringify"&&(a+=`if (arrayLength && arrayLength >= ${Uu}) return JSON.stringify(obj)
`),a+=`
    let jsonOutput = ''
  `,Array.isArray(s)){for(let l=0;l<s.length;l++){let u=s[l],c=zr(e,n.getPropertyLocation(l),`obj[${l}]`);a+=`
        if (${l} < arrayLength) {
          if (${Xw(u.type,`[${l}]`)}) {
            let json = ''
            ${c}
            jsonOutput += json
            if (${l} < arrayLength - 1) {
              jsonOutput += ','
            }
          } else {
            throw new Error(\`Item at ${l} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          jsonOutput += JSON.stringify(obj[i])
          if (i < arrayLength - 1) {
            jsonOutput += ','
          }
        }`)}else{let l=zr(e,n,"obj[i]");a+=`
      for (let i = 0; i < arrayLength; i++) {
        let json = ''
        ${l}
        jsonOutput += json
        if (i < arrayLength - 1) {
          jsonOutput += ','
        }
      }`}return a+="\n    return `[${jsonOutput}]`\n  }",e.functions.push(a),i}function Xw(e,t){let r;switch(e){case"null":r=`obj${t} === null`;break;case"string":r=`typeof obj${t} === 'string'`;break;case"integer":r=`Number.isInteger(obj${t})`;break;case"number":r=`Number.isFinite(obj${t})`;break;case"boolean":r=`typeof obj${t} === 'boolean'`;break;case"object":r=`obj${t} && typeof obj${t} === 'object' && obj${t}.constructor === Object`;break;case"array":r=`Array.isArray(obj${t})`;break;default:Array.isArray(e)&&(r=`(${e.map(s=>Xw(s,t)).join(" || ")})`)}return r}function Qw(e){return"anonymous"+e.functionsCounter++}function cH(e,t,r){let s=t.schema.type.sort(a=>a==="null"?-1:1),i="";s.forEach((a,l)=>{t.schema={...t.schema,type:a};let u=Zw(e,t,r),c=l===0?"if":"else if";switch(a){case"null":i+=`
          ${c} (${r} === null)
            ${u}
          `;break;case"string":{i+=`
          ${c}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString &&
              !(${r} instanceof Date)
            )
          )
            ${u}
        `;break}case"array":{i+=`
          ${c}(Array.isArray(${r}))
            ${u}
        `;break}case"integer":{i+=`
          ${c}(Number.isInteger(${r}) || ${r} === null)
            ${u}
        `;break}default:{i+=`
          ${c}(typeof ${r} === "${a}" || ${r} === null)
            ${u}
        `;break}}});let o=t.getSchemaRef();return o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,"")),i+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,i}function Zw(e,t,r){let n=t.schema;switch(n.type){case"null":return"json += 'null'";case"string":return n.format==="date-time"?`json += serializer.asDateTime(${r})`:n.format==="date"?`json += serializer.asDate(${r})`:n.format==="time"?`json += serializer.asTime(${r})`:`json += serializer.asString(${r})`;case"integer":return`json += serializer.asInteger(${r})`;case"number":return`json += serializer.asNumber(${r})`;case"boolean":return`json += serializer.asBoolean(${r})`;case"object":return`json += ${uH(e,t)}(${r})`;case"array":return`json += ${lH(e,t)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function fH(e,t){let r=e.schema,n=r.type,s=Array.isArray(n)&&n.includes("null"),i="";return s&&(i+=`
      if (${t} === null) {
        json += 'null'
      } else {
    `),i+=`json += '${JSON.stringify(r.const)}'`,s&&(i+=`
      }
    `),i}function zr(e,t,r){let n=t.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(t=Ro(e,t,n.$ref),n=t.schema),n.type===void 0){let a=Yw(n);a&&(n.type=a)}if(n.if&&n.then)return oH(e,t,r);n.allOf&&(Ww(e,t,n,Yz(n)),n=t.schema);let s=n.type,i="";if(s===void 0&&(n.anyOf||n.oneOf)){e.validatorSchemasIds.add(t.getSchemaId());let a=n.anyOf?"anyOf":"oneOf",l=t.getPropertyLocation(a);for(let c=0;c<t.schema[a].length;c++){let f=l.getPropertyLocation(c),h=f.getSchemaRef(),d=zr(e,f,r);i+=`
        ${c===0?"if":"else if"}(validator.validate("${h}", ${r}))
          ${d}
      `}let u=t.getSchemaRef();return u.startsWith(e.rootSchemaId)&&(u=u.replace(e.rootSchemaId,"")),i+=`
      else throw new TypeError(\`The value of '${u}' does not match schema definition.\`)
    `,i}let o=n.nullable===!0;return o&&(i+=`
      if (${r} === null) {
        json += 'null'
      } else {
    `),n.const!==void 0?i+=fH(t,r):Array.isArray(s)?i+=cH(e,t,r):i+=Zw(e,t,r),o&&(i+=`
      }
    `),i}Qs.exports=Bh;Qs.exports.default=Bh;Qs.exports.build=Bh;Qs.exports.validLargeArrayMechanisms=Jw;Qs.exports.restore=function({code:e,validator:t,serializer:r}){return Function.apply(null,["validator","serializer",e]).apply(null,[t,r])}});var rR=v((H8,Gh)=>{"use strict";var dH=Kh();function tR(e={readMode:!0}){if(e.readMode===!0&&typeof e.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(e.readMode!==!0&&typeof e.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(e.readMode===!0)return function(){return function(n){return e.restoreFunction(n)}};let t=dH();return function(n,s={}){s.mode="standalone";let i=t(n,s);return function(o){let a=i(o);return e.storeFunction(o,a),new Function(a)}}}Gh.exports=tR;Gh.exports.default=tR});var Kh=v((U8,To)=>{"use strict";var hH=eR();function Jh(){return function(t,r){let n=Object.assign({},r,{schema:t});return pH.bind(null,n)}}function pH(e,{schema:t}){return e.schema&&t.$id&&e.schema[t.$id]&&(e.schema={...e.schema},delete e.schema[t.$id]),hH(t,e)}To.exports=Jh;To.exports.default=Jh;To.exports.SerializerSelector=Jh;To.exports.StandaloneSerializer=rR()});var Hr=v($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.checkMetadata=void 0;var mH=se(),yH={keyword:"metadata",schemaType:"object",code(e){nR(e);let{gen:t,schema:r,it:n}=e;if((0,mH.alwaysValidSchema)(n,r))return;let s=t.name("valid");e.subschema({keyword:"metadata",jtdMetadata:!0},s),e.ok(s)}};function nR({it:e,keyword:t},r){if(e.jtdMetadata!==r)throw new Error(`JTD: "${t}" cannot be used in this schema location`)}$o.checkMetadata=nR;$o.default=yH});var Bu=v(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.hasRef=void 0;var sR=Un(),Po=Q(),gH=dn(),iR=Qt(),oR=Gf(),_H=Hr(),vH={keyword:"ref",schemaType:"string",code(e){(0,_H.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{schemaEnv:{root:o}}=i,a=t.name("valid");s.nullable?(t.var(a,(0,Po._)`${r} === null`),t.if((0,Po.not)(a),l)):(t.var(a,!1),l()),e.ok(a);function l(){var f;let h=(f=o.schema.definitions)===null||f===void 0?void 0:f[n];if(!h)throw new gH.default(i.opts.uriResolver,"",n,`No definition ${n}`);Yh(h)||!i.opts.inlineRefs?u(h):c(h)}function u(f){let h=sR.compileSchema.call(i.self,new sR.SchemaEnv({schema:f,root:o,schemaPath:`/definitions/${n}`})),d=(0,oR.getValidate)(e,h),m=t.const("_errs",iR.default.errors);(0,oR.callRef)(e,d,h,h.$async),t.assign(a,(0,Po._)`${m} === ${iR.default.errors}`)}function c(f){let h=t.scopeValue("schema",i.opts.code.source===!0?{ref:f,code:(0,Po.stringify)(f)}:{ref:f});e.subschema({schema:f,dataTypes:[],schemaPath:Po.nil,topSchemaRef:h,errSchemaPath:`/definitions/${n}`},a)}}};function Yh(e){for(let t in e){let r;if(t==="ref"||typeof(r=e[t])=="object"&&Yh(r))return!0}return!1}Oo.hasRef=Yh;Oo.default=vH});var Xh=v(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});var EH=/t|\s/i,SH=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,bH=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,wH=[0,31,28,31,30,31,30,31,31,30,31,30,31];function uR(e,t){let r=e.split(EH);return r.length===2&&aR(r[0])&&RH(r[1])||t&&r.length===1&&aR(r[0])}Wh.default=uR;function aR(e){let t=SH.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&(s<=wH[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function RH(e){let t=bH.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3],i=+(t[4]||0),o=+(t[5]||0);return r<=23&&n<=59&&s<=59||r-i===23&&n-o===59&&s===60}uR.code='require("ajv/dist/runtime/timestamp").default'});var Zs=v(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.typeErrorParams=_n.typeErrorMessage=_n.typeError=void 0;var TH=Q();function $H(e){return{message:t=>lR(t,e),params:t=>cR(t,e)}}_n.typeError=$H;function lR({parentSchema:e},t){return e?.nullable?`must be ${t} or null`:`must be ${t}`}_n.typeErrorMessage=lR;function cR({parentSchema:e},t){return(0,TH._)`{type: ${t}, nullable: ${!!e?.nullable}}`}_n.typeErrorParams=cR});var Qh=v(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.intRange=void 0;var Ut=Q(),PH=Xh(),OH=se(),IH=Hr(),fR=Zs();ei.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var AH={message:e=>(0,fR.typeErrorMessage)(e,e.schema),params:e=>(0,fR.typeErrorParams)(e,e.schema)};function CH(e){let{gen:t,data:r,it:n}=e,{timestamp:s,allowDate:i}=n.opts;if(s==="date")return(0,Ut._)`${r} instanceof Date `;let o=(0,OH.useFunc)(t,PH.default),a=i?(0,Ut._)`, true`:Ut.nil,l=(0,Ut._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?l:(0,Ut.or)((0,Ut._)`${r} instanceof Date`,l)}var NH={keyword:"type",schemaType:"string",error:AH,code(e){(0,IH.checkMetadata)(e);let{data:t,schema:r,parentSchema:n,it:s}=e,i;switch(r){case"boolean":case"string":i=(0,Ut._)`typeof ${t} == ${r}`;break;case"timestamp":{i=CH(e);break}case"float32":case"float64":i=(0,Ut._)`typeof ${t} == "number"`;break;default:{let o=r;if(i=(0,Ut._)`typeof ${t} == "number" && isFinite(${t}) && !(${t} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(i=(0,Ut._)`${i} && ${t} >= 0`);else{let[a,l]=ei.intRange[o];i=(0,Ut._)`${i} && ${t} >= ${a} && ${t} <= ${l}`}}}e.pass(n.nullable?(0,Ut.or)((0,Ut._)`${t} === null`,i):i)}};ei.default=NH});var ri=v(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.checkNullableObject=ti.checkNullable=void 0;var Gu=Q();function dR({gen:e,data:t,parentSchema:r},n=Gu.nil){let s=e.name("valid");return r.nullable?(e.let(s,(0,Gu._)`${t} === null`),n=(0,Gu.not)(s)):e.let(s,!1),[s,n]}ti.checkNullable=dR;function kH(e,t){let[r,n]=dR(e,t);return[r,(0,Gu._)`${n} && typeof ${e.data} == "object" && !Array.isArray(${e.data})`]}ti.checkNullableObject=kH});var hR=v(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});var vn=Q(),qH=Hr(),jH=ri(),DH={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,vn._)`{allowedValues: ${e}}`},LH={keyword:"enum",schemaType:"array",error:DH,code(e){(0,qH.checkMetadata)(e);let{gen:t,data:r,schema:n,schemaValue:s,parentSchema:i,it:o}=e;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,l=(0,vn._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let c;[a,c]=(0,jH.checkNullable)(e,l),t.if(c,u)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,vn.and)(l,(0,vn.or)(...n.map(c=>(0,vn._)`${r} === ${c}`))),i.nullable&&(a=(0,vn.or)((0,vn._)`${r} === null`,a))}e.pass(a);function u(){t.forOf("v",s,c=>t.if((0,vn._)`${a} = ${r} === ${c}`,()=>t.break()))}}};Zh.default=LH});var mR=v(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});var xH=se(),FH=ht(),pR=Q(),MH=Hr(),VH=ri(),zH=Zs(),HH={keyword:"elements",schemaType:"object",error:(0,zH.typeError)("array"),code(e){(0,MH.checkMetadata)(e);let{gen:t,data:r,schema:n,it:s}=e;if((0,xH.alwaysValidSchema)(s,n))return;let[i]=(0,VH.checkNullable)(e);t.if((0,pR.not)(i),()=>t.if((0,pR._)`Array.isArray(${r})`,()=>t.assign(i,(0,FH.validateArray)(e)),()=>e.error())),e.ok(i)}};ep.default=HH});var rp=v(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.validateProperties=En.error=void 0;var tp=ht(),yR=se(),Ur=Q(),UH=Hr(),BH=ri(),gR=Zs(),ni;(function(e){e.Additional="additional",e.Missing="missing"})(ni||(ni={}));En.error={message:e=>{let{params:t}=e;return t.propError?t.propError===ni.Additional?"must NOT have additional properties":`must have property '${t.missingProperty}'`:(0,gR.typeErrorMessage)(e,"object")},params:e=>{let{params:t}=e;return t.propError?t.propError===ni.Additional?(0,Ur._)`{error: ${t.propError}, additionalProperty: ${t.additionalProperty}}`:(0,Ur._)`{error: ${t.propError}, missingProperty: ${t.missingProperty}}`:(0,gR.typeErrorParams)(e,"object")}};var GH={keyword:"properties",schemaType:"object",error:En.error,code:_R};function _R(e){(0,UH.checkMetadata)(e);let{gen:t,data:r,parentSchema:n,it:s}=e,{additionalProperties:i,nullable:o}=n;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(d())throw new Error("JTD: properties and optionalProperties have common members");let[a,l]=m("properties"),[u,c]=m("optionalProperties");if(l.length===0&&c.length===0&&i)return;let[f,h]=s.jtdDiscriminator===void 0?(0,BH.checkNullableObject)(e,r):[t.let("valid",!1),!0];t.if(h,()=>t.assign(f,!0).block(()=>{y(l,"properties",!0),y(c,"optionalProperties"),i||_()})),e.pass(f);function d(){let g=n.properties,p=n.optionalProperties;if(!(g&&p))return!1;for(let T in g)if(Object.prototype.hasOwnProperty.call(p,T))return!0;return!1}function m(g){let p=n[g],T=p?(0,tp.allSchemaProperties)(p):[];if(s.jtdDiscriminator&&T.some(w=>w===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${g}`);let O=T.filter(w=>!(0,yR.alwaysValidSchema)(s,p[w]));return[T,O]}function y(g,p,T){let O=t.var("valid");for(let I of g)t.if((0,tp.propertyInData)(t,r,I,s.opts.ownProperties),()=>S(I,p,O),()=>w(I)),e.ok(O);function w(I){T?(t.assign(O,!1),e.error(!1,{propError:ni.Missing,missingProperty:I},{schemaPath:I})):t.assign(O,!0)}}function S(g,p,T){e.subschema({keyword:p,schemaProp:g,dataProp:g},T)}function _(){t.forIn("key",r,g=>{let p=b(g,a,"properties",s.jtdDiscriminator),T=b(g,u,"optionalProperties"),O=p===!0?T:T===!0?p:(0,Ur.and)(p,T);t.if(O,()=>{s.opts.removeAdditional?t.code((0,Ur._)`delete ${r}[${g}]`):(e.error(!1,{propError:ni.Additional,additionalProperty:g},{instancePath:g,parentSchema:!0}),s.opts.allErrors||t.break())})})}function b(g,p,T,O){let w;if(p.length>8){let I=(0,yR.schemaRefOrVal)(s,n[T],T);w=(0,Ur.not)((0,tp.isOwnProperty)(t,I,g)),O!==void 0&&(w=(0,Ur.and)(w,(0,Ur._)`${g} !== ${O}`))}else if(p.length||O!==void 0){let I=O===void 0?p:[O].concat(p);w=(0,Ur.and)(...I.map(k=>(0,Ur._)`${g} !== ${k}`))}else w=!0;return w}}En.validateProperties=_R;En.default=GH});var ER=v(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});var vR=rp(),KH={keyword:"optionalProperties",schemaType:"object",error:vR.error,code(e){e.parentSchema.properties||(0,vR.validateProperties)(e)}};np.default=KH});var bR=v(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});var ts=Q(),JH=Hr(),YH=ri(),SR=Zs(),Ku=Nd(),WH={message:e=>{let{schema:t,params:r}=e;return r.discrError?r.discrError===Ku.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in mapping`:(0,SR.typeErrorMessage)(e,"object")},params:e=>{let{schema:t,params:r}=e;return r.discrError?(0,ts._)`{error: ${r.discrError}, tag: ${t}, tagValue: ${r.tag}}`:(0,SR.typeErrorParams)(e,"object")}},XH={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:WH,code(e){(0,JH.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:s}=e,[i,o]=(0,YH.checkNullableObject)(e,r);t.if(o),a(),t.elseIf((0,ts.not)(i)),e.error(),t.endIf(),e.ok(i);function a(){let c=t.const("tag",(0,ts._)`${r}${(0,ts.getProperty)(n)}`);t.if((0,ts._)`${c} === undefined`),e.error(!1,{discrError:Ku.DiscrError.Tag,tag:c}),t.elseIf((0,ts._)`typeof ${c} == "string"`),l(c),t.else(),e.error(!1,{discrError:Ku.DiscrError.Tag,tag:c},{instancePath:n}),t.endIf()}function l(c){t.if(!1);for(let f in s.mapping)t.elseIf((0,ts._)`${c} === ${f}`),t.assign(i,u(f));t.else(),e.error(!1,{discrError:Ku.DiscrError.Mapping,tag:c},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),t.endIf()}function u(c){let f=t.name("valid");return e.subschema({keyword:"mapping",schemaProp:c,jtdDiscriminator:n},f),f}}};sp.default=XH});var RR=v(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});var wR=se(),Ju=Q(),QH=Hr(),ZH=ri(),e4=Zs(),t4={keyword:"values",schemaType:"object",error:(0,e4.typeError)("object"),code(e){(0,QH.checkMetadata)(e);let{gen:t,data:r,schema:n,it:s}=e,[i,o]=(0,ZH.checkNullableObject)(e,r);(0,wR.alwaysValidSchema)(s,n)?t.if((0,Ju.not)((0,Ju.or)(o,i)),()=>e.error()):(t.if(o),t.assign(i,a()),t.elseIf((0,Ju.not)(i)),e.error(),t.endIf()),e.ok(i);function a(){let l=t.name("valid");if(s.allErrors){let c=t.let("valid",!0);return u(()=>t.assign(c,!1)),c}return t.var(l,!0),u(()=>t.break()),l;function u(c){t.forIn("key",r,f=>{e.subschema({keyword:"values",dataProp:f,dataPropType:wR.Type.Str},l),t.if((0,Ju.not)(l),c)})}}}};ip.default=t4});var TR=v(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});var r4=ht(),n4={keyword:"union",schemaType:"array",trackErrors:!0,code:r4.validateUnion,error:{message:"must match a schema in union"}};op.default=n4});var $R=v(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});var s4=Bu(),i4=Qh(),o4=hR(),a4=mR(),u4=rp(),l4=ER(),c4=bR(),f4=RR(),d4=TR(),h4=Hr(),p4=["definitions",s4.default,i4.default,o4.default,a4.default,u4.default,l4.default,c4.default,f4.default,d4.default,h4.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];ap.default=p4});var AR=v(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});var Br=e=>{let t={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return e&&(t.definitions={values:{ref:"schema"}}),t},m4=e=>({optionalProperties:Br(e)}),y4=e=>({properties:{ref:{type:"string"}},optionalProperties:Br(e)}),g4=e=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:Br(e)}),_4=e=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:Br(e)}),v4=e=>({properties:{elements:{ref:"schema"}},optionalProperties:Br(e)}),OR=e=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...Br(e)}}),IR=e=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...Br(e)}}),E4=e=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[OR(!1),IR(!1)]}}}},optionalProperties:Br(e)}),S4=e=>({properties:{values:{ref:"schema"}},optionalProperties:Br(e)}),PR=e=>({metadata:{union:[m4,y4,g4,_4,v4,OR,IR,E4,S4].map(t=>t(e))}}),b4={definitions:{schema:PR(!1)},...PR(!0)};up.default=b4});var lp=v(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.jtdForms=void 0;Yu.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var NR=v(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});var cp=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,w4={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function CR(e){return cp.lastIndex=0,'"'+(cp.test(e)?e.replace(cp,t=>{let r=w4[t];return typeof r=="string"?r:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):e)+'"'}fp.default=CR;CR.code='require("ajv/dist/runtime/quote").default'});var xR=v(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});var R4=lp(),qR=Un(),ce=Q(),T4=dn(),qe=Qt(),$4=ht(),P4=Bu(),O4=se(),I4=NR(),A4={elements:N4,values:k4,discriminator:q4,properties:kR,optionalProperties:kR,enum:Io,type:j4,ref:L4};function jR(e,t){let r=qR.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ce.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("serialize"),l={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:qe.default.data},u;try{this._compilations.add(e),e.serializeName=a,o.func(a,qe.default.data,!1,()=>{o.let(qe.default.json,(0,ce.str)``),Ao(l),o.return(qe.default.json)}),o.optimize(this.opts.code.optimize);let c=o.toString();u=`${o.scopeRefs(qe.default.scope)}return ${c}`;let h=new Function(`${qe.default.scope}`,u)(this.scope.get());this.scope.value(a,{ref:h}),e.serialize=h}catch(c){throw u&&this.logger.error("Error compiling serializer, function code:",u),delete e.serialize,delete e.serializeName,c}finally{this._compilations.delete(e)}return e}hp.default=jR;function Ao(e){let t;for(let r of R4.jtdForms)if(r in e.schema){t=r;break}C4(e,t?A4[t]:F4)}function C4(e,t){let{gen:r,schema:n,data:s}=e;if(!n.nullable)return t(e);r.if((0,ce._)`${s} === undefined || ${s} === null`,()=>r.add(qe.default.json,(0,ce._)`"null"`),()=>t(e))}function N4(e){let{gen:t,schema:r,data:n}=e;t.add(qe.default.json,(0,ce.str)`[`);let s=t.let("first",!0);t.forOf("el",n,i=>{dp(e,s),Ao({...e,schema:r.elements,data:i})}),t.add(qe.default.json,(0,ce.str)`]`)}function k4(e){let{gen:t,schema:r,data:n}=e;t.add(qe.default.json,(0,ce.str)`{`);let s=t.let("first",!0);t.forIn("key",n,i=>DR(e,i,r.values,s)),t.add(qe.default.json,(0,ce.str)`}`)}function DR(e,t,r,n){let{gen:s,data:i}=e;dp(e,n),Io({...e,data:t}),s.add(qe.default.json,(0,ce.str)`:`);let o=s.const("value",(0,ce._)`${i}${(0,ce.getProperty)(t)}`);Ao({...e,schema:r,data:o})}function q4(e){let{gen:t,schema:r,data:n}=e,{discriminator:s}=r;t.add(qe.default.json,(0,ce.str)`{${JSON.stringify(s)}:`);let i=t.const("tag",(0,ce._)`${n}${(0,ce.getProperty)(s)}`);Io({...e,data:i}),t.if(!1);for(let o in r.mapping){t.elseIf((0,ce._)`${i} === ${o}`);let a=r.mapping[o];LR({...e,schema:a},s)}t.endIf(),t.add(qe.default.json,(0,ce.str)`}`)}function kR(e){let{gen:t}=e;t.add(qe.default.json,(0,ce.str)`{`),LR(e),t.add(qe.default.json,(0,ce.str)`}`)}function LR(e,t){let{gen:r,schema:n,data:s}=e,{properties:i,optionalProperties:o}=n,a=h(i),l=h(o),u=d(a.concat(l)),c=!t,f;for(let _ of a)c?c=!1:r.add(qe.default.json,(0,ce.str)`,`),y(_,i[_],m(_));c&&(f=r.let("first",!0));for(let _ of l){let b=m(_);r.if((0,ce.and)((0,ce._)`${b} !== undefined`,(0,$4.isOwnProperty)(r,s,_)),()=>{dp(e,f),y(_,o[_],b)})}n.additionalProperties&&r.forIn("key",s,_=>r.if(S(_,u),()=>DR(e,_,{},f)));function h(_){return _?Object.keys(_):[]}function d(_){if(t&&_.push(t),new Set(_).size!==_.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return _}function m(_){return r.const("value",(0,ce._)`${s}${(0,ce.getProperty)(_)}`)}function y(_,b,g){r.add(qe.default.json,(0,ce.str)`${JSON.stringify(_)}:`),Ao({...e,schema:b,data:g})}function S(_,b){return b.length?(0,ce.and)(...b.map(g=>(0,ce._)`${_} !== ${g}`)):!0}}function j4(e){let{gen:t,schema:r,data:n}=e;switch(r.type){case"boolean":t.add(qe.default.json,(0,ce._)`${n} ? "true" : "false"`);break;case"string":Io(e);break;case"timestamp":t.if((0,ce._)`${n} instanceof Date`,()=>t.add(qe.default.json,(0,ce._)`'"' + ${n}.toISOString() + '"'`),()=>Io(e));break;default:D4(e)}}function Io({gen:e,data:t}){e.add(qe.default.json,(0,ce._)`${(0,O4.useFunc)(e,I4.default)}(${t})`)}function D4({gen:e,data:t}){e.add(qe.default.json,(0,ce._)`"" + ${t}`)}function L4(e){let{gen:t,self:r,data:n,definitions:s,schema:i,schemaEnv:o}=e,{ref:a}=i,l=s[a];if(!l)throw new T4.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,P4.hasRef)(l))return Ao({...e,schema:l});let{root:u}=o,c=jR.call(r,new qR.SchemaEnv({schema:l,root:u}),s);t.add(qe.default.json,(0,ce._)`${x4(t,c)}(${n})`)}function x4(e,t){return t.serialize?e.scopeValue("serialize",{ref:t.serialize}):(0,ce._)`${e.scopeValue("wrapper",{ref:t})}.serialize`}function F4({gen:e,data:t}){e.add(qe.default.json,(0,ce._)`JSON.stringify(${t})`)}function dp({gen:e},t){t?e.if(t,()=>e.assign(t,!1),()=>e.add(qe.default.json,(0,ce.str)`,`)):e.add(qe.default.json,(0,ce.str)`,`)}});var MR=v(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.parseJsonString=bn.parseJsonNumber=bn.parseJson=void 0;var M4=/position\s(\d+)$/;function Gr(e,t){let r;Gr.message=void 0;let n;t&&(e=e.slice(t));try{return Gr.position=t+e.length,JSON.parse(e)}catch(s){if(n=M4.exec(s.message),!n){Gr.message="unexpected end";return}r=+n[1];let i=e[r];e=e.slice(0,r),Gr.position=t+r;try{return JSON.parse(e)}catch{Gr.message=`unexpected token ${i}`;return}}}bn.parseJson=Gr;Gr.message=void 0;Gr.position=0;Gr.code='require("ajv/dist/runtime/parseJson").parseJson';function Kr(e,t,r){let n="",s;if(Kr.message=void 0,e[t]==="-"&&(n+="-",t++),e[t]==="0")n+="0",t++;else if(!i(r)){o();return}if(r)return Kr.position=t,+n;if(e[t]==="."&&(n+=".",t++,!i())){o();return}if(s=e[t],(s==="e"||s==="E")&&(n+="e",t++,s=e[t],(s==="+"||s==="-")&&(n+=s,t++),!i())){o();return}return Kr.position=t,+n;function i(a){let l=!1;for(;s=e[t],s>="0"&&s<="9"&&(a===void 0||a-- >0);)l=!0,n+=s,t++;return l}function o(){Kr.position=t,Kr.message=t<e.length?`unexpected token ${e[t]}`:"unexpected end"}}bn.parseJsonNumber=Kr;Kr.message=void 0;Kr.position=0;Kr.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var FR={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},V4="a".charCodeAt(0),z4="0".charCodeAt(0);function Sn(e,t){let r="",n;for(Sn.message=void 0;n=e[t++],n!=='"';)if(n==="\\")if(n=e[t],n in FR)r+=FR[n],t++;else if(n==="u"){t++;let i=4,o=0;for(;i--;){if(o<<=4,n=e[t],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-V4+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-z4;else{s(`unexpected token ${n}`);return}t++}r+=String.fromCharCode(o)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return Sn.position=t,r;function s(i){Sn.position=t,Sn.message=i}}bn.parseJsonString=Sn;Sn.message=void 0;Sn.position=0;Sn.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var XR=v(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});var H4=lp(),UR=Un(),W=Q(),U4=dn(),le=Qt(),B4=ht(),G4=Bu(),K4=Qh(),yp=MR(),BR=se(),J4=Xh(),Y4={elements:Z4,values:eU,discriminator:rU,properties:VR,optionalProperties:VR,enum:sU,type:nU,ref:iU};function GR(e,t){let r=UR.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new W.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("parse"),l={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:le.default.data,parseName:a,char:o.name("c")},u;try{this._compilations.add(e),e.parseName=a,W4(l),o.optimize(this.opts.code.optimize);let c=o.toString();u=`${o.scopeRefs(le.default.scope)}return ${c}`;let h=new Function(`${le.default.scope}`,u)(this.scope.get());this.scope.value(a,{ref:h}),e.parse=h}catch(c){throw u&&this.logger.error("Error compiling parser, function code:",u),delete e.parse,delete e.parseName,c}finally{this._compilations.delete(e)}return e}Sp.default=GR;var mp=(0,W._)`undefined`;function W4(e){let{gen:t,parseName:r,char:n}=e;t.func(r,(0,W._)`${le.default.json}, ${le.default.jsonPos}, ${le.default.jsonPart}`,!1,()=>{t.let(le.default.data),t.let(n),t.assign((0,W._)`${r}.message`,mp),t.assign((0,W._)`${r}.position`,mp),t.assign(le.default.jsonPos,(0,W._)`${le.default.jsonPos} || 0`),t.const(le.default.jsonLen,(0,W._)`${le.default.json}.length`),Wu(e),Ep(e),t.if(le.default.jsonPart,()=>{t.assign((0,W._)`${r}.position`,le.default.jsonPos),t.return(le.default.data)}),t.if((0,W._)`${le.default.jsonPos} === ${le.default.jsonLen}`,()=>t.return(le.default.data)),si(e)})}function Wu(e){let t;for(let r of H4.jtdForms)if(r in e.schema){t=r;break}t?Q4(e,Y4[t]):_p(e)}var X4=HR(!0,HR(!1,si));function Q4(e,t){let{gen:r,schema:n,data:s}=e;if(!n.nullable)return t(e);Co(e,"null",t,()=>r.assign(s,null))}function Z4(e){let{gen:t,schema:r,data:n}=e;$r(e,"[");let s=t.let("i",0);t.assign(n,(0,W._)`[]`),gp(e,"]",()=>{let i=t.let("el");Wu({...e,schema:r.elements,data:i}),t.assign((0,W._)`${n}[${s}++]`,i)})}function eU(e){let{gen:t,schema:r,data:n}=e;$r(e,"{"),t.assign(n,(0,W._)`{}`),gp(e,"}",()=>tU(e,r.values))}function gp(e,t,r){KR(e,t,r),$r(e,t)}function KR(e,t,r){let{gen:n}=e;n.for((0,W._)`;${le.default.jsonPos}<${le.default.jsonLen} && ${Xu(1)}!==${t};`,()=>{r(),Co(e,",",()=>n.break(),s)});function s(){Co(e,t,()=>{},si)}}function tU(e,t){let{gen:r}=e,n=r.let("key");rs({...e,data:n}),$r(e,":"),YR(e,n,t)}function rU(e){let{gen:t,data:r,schema:n}=e,{discriminator:s,mapping:i}=n;$r(e,"{"),t.assign(r,(0,W._)`{}`);let o=t.const("pos",le.default.jsonPos),a=t.let("value"),l=t.let("tag");KR(e,"}",()=>{let u=t.let("key");rs({...e,data:u}),$r(e,":"),t.if((0,W._)`${u} === ${s}`,()=>{rs({...e,data:l}),t.assign((0,W._)`${r}[${u}]`,l),t.break()},()=>_p({...e,data:a}))}),t.assign(le.default.jsonPos,o),t.if((0,W._)`${l} === undefined`),Jr(e,(0,W.str)`discriminator tag not found`);for(let u in i)t.elseIf((0,W._)`${l} === ${u}`),JR({...e,schema:i[u]},s);t.else(),Jr(e,(0,W.str)`discriminator value not in schema`),t.endIf()}function VR(e){let{gen:t,data:r}=e;$r(e,"{"),t.assign(r,(0,W._)`{}`),JR(e)}function JR(e,t){let{gen:r,schema:n,data:s}=e,{properties:i,optionalProperties:o,additionalProperties:a}=n;if(gp(e,"}",()=>{let l=r.let("key");if(rs({...e,data:l}),$r(e,":"),r.if(!1),zR(e,l,i),zR(e,l,o),t){r.elseIf((0,W._)`${l} === ${t}`);let u=r.let("tag");rs({...e,data:u})}r.else(),a?_p({...e,data:(0,W._)`${s}[${l}]`}):Jr(e,(0,W.str)`property ${l} not allowed`),r.endIf()}),i){let l=(0,B4.hasPropFunc)(r),u=(0,W.and)(...Object.keys(i).map(c=>(0,W._)`${l}.call(${s}, ${c})`));r.if((0,W.not)(u),()=>Jr(e,(0,W.str)`missing required properties`))}}function zR(e,t,r={}){let{gen:n}=e;for(let s in r)n.elseIf((0,W._)`${t} === ${s}`),YR(e,t,r[s])}function YR(e,t,r){Wu({...e,schema:r,data:(0,W._)`${e.data}[${t}]`})}function nU(e){let{gen:t,schema:r,data:n,self:s}=e;switch(r.type){case"boolean":X4(e);break;case"string":rs(e);break;case"timestamp":{rs(e);let i=(0,BR.useFunc)(t,J4.default),{allowDate:o,parseDate:a}=s.opts,l=o?(0,W._)`!${i}(${n}, true)`:(0,W._)`!${i}(${n})`,u=a?(0,W.or)(l,(0,W._)`(${n} = new Date(${n}), false)`,(0,W._)`isNaN(${n}.valueOf())`):l;t.if(u,()=>Jr(e,(0,W.str)`invalid timestamp`));break}case"float32":case"float64":pp(e);break;default:{let i=r.type;if(!s.opts.int32range&&(i==="int32"||i==="uint32"))pp(e,16),i==="uint32"&&t.if((0,W._)`${n} < 0`,()=>Jr(e,(0,W.str)`integer out of range`));else{let[o,a,l]=K4.intRange[i];pp(e,l),t.if((0,W._)`${n} < ${o} || ${n} > ${a}`,()=>Jr(e,(0,W.str)`integer out of range`))}}}}function rs(e){$r(e,'"'),vp(e,yp.parseJsonString)}function sU(e){let{gen:t,data:r,schema:n}=e,s=n.enum;$r(e,'"'),t.if(!1);for(let i of s){let o=JSON.stringify(i).slice(1);t.elseIf((0,W._)`${Xu(o.length)} === ${o}`),t.assign(r,(0,W.str)`${i}`),t.add(le.default.jsonPos,o.length)}t.else(),si(e),t.endIf()}function pp(e,t){let{gen:r}=e;Ep(e),r.if((0,W._)`"-0123456789".indexOf(${Xu(1)}) < 0`,()=>si(e),()=>vp(e,yp.parseJsonNumber,t))}function HR(e,t){return r=>{let{gen:n,data:s}=r;Co(r,`${e}`,()=>t(r),()=>n.assign(s,e))}}function iU(e){let{gen:t,self:r,definitions:n,schema:s,schemaEnv:i}=e,{ref:o}=s,a=n[o];if(!a)throw new U4.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,G4.hasRef)(a))return Wu({...e,schema:a});let{root:l}=i,u=GR.call(r,new UR.SchemaEnv({schema:a,root:l}),n);WR(e,oU(t,u),!0)}function oU(e,t){return t.parse?e.scopeValue("parse",{ref:t.parse}):(0,W._)`${e.scopeValue("wrapper",{ref:t})}.parse`}function _p(e){vp(e,yp.parseJson)}function vp(e,t,r){WR(e,(0,BR.useFunc)(e.gen,t),r)}function WR(e,t,r){let{gen:n,data:s}=e;n.assign(s,(0,W._)`${t}(${le.default.json}, ${le.default.jsonPos}${r?(0,W._)`, ${r}`:W.nil})`),n.assign(le.default.jsonPos,(0,W._)`${t}.position`),n.if((0,W._)`${s} === undefined`,()=>Jr(e,(0,W._)`${t}.message`))}function $r(e,t){Co(e,t,si)}function Co(e,t,r,n){let{gen:s}=e,i=t.length;Ep(e),s.if((0,W._)`${Xu(i)} === ${t}`,()=>{s.add(le.default.jsonPos,i),n?.(e)},()=>r(e))}function Ep({gen:e,char:t}){e.code((0,W._)`while((${t}=${le.default.json}[${le.default.jsonPos}],${t}===" "||${t}==="\\n"||${t}==="\\r"||${t}==="\\t"))${le.default.jsonPos}++;`)}function Xu(e){return e===1?(0,W._)`${le.default.json}[${le.default.jsonPos}]`:(0,W._)`${le.default.json}.slice(${le.default.jsonPos}, ${le.default.jsonPos}+${e})`}function si(e){Jr(e,(0,W._)`"unexpected token " + ${le.default.json}[${le.default.jsonPos}]`)}function Jr({gen:e,parseName:t},r){e.assign((0,W._)`${t}.message`,r),e.assign((0,W._)`${t}.position`,le.default.jsonPos),e.return(mp)}});var wp=v((Ue,QR)=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.MissingRefError=Ue.ValidationError=Ue.CodeGen=Ue.Name=Ue.nil=Ue.stringify=Ue.str=Ue._=Ue.KeywordCxt=void 0;var aU=Uf(),uU=$R(),lU=AR(),cU=xR(),fU=XR(),bp="JTD-meta-schema",Qu=class extends aU.default{constructor(t={}){super({...t,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(uU.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(lU.default,bp,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(bp)?bp:void 0)}compileSerializer(t){let r=this._addSchema(t);return r.serialize||this._compileSerializer(r)}compileParser(t){let r=this._addSchema(t);return r.parse||this._compileParser(r)}_compileSerializer(t){if(cU.default.call(this,t,t.schema.definitions||{}),!t.serialize)throw new Error("ajv implementation error");return t.serialize}_compileParser(t){if(fU.default.call(this,t,t.schema.definitions||{}),!t.parse)throw new Error("ajv implementation error");return t.parse}};QR.exports=Ue=Qu;Object.defineProperty(Ue,"__esModule",{value:!0});Ue.default=Qu;var dU=qs();Object.defineProperty(Ue,"KeywordCxt",{enumerable:!0,get:function(){return dU.KeywordCxt}});var ii=Q();Object.defineProperty(Ue,"_",{enumerable:!0,get:function(){return ii._}});Object.defineProperty(Ue,"str",{enumerable:!0,get:function(){return ii.str}});Object.defineProperty(Ue,"stringify",{enumerable:!0,get:function(){return ii.stringify}});Object.defineProperty(Ue,"nil",{enumerable:!0,get:function(){return ii.nil}});Object.defineProperty(Ue,"Name",{enumerable:!0,get:function(){return ii.Name}});Object.defineProperty(Ue,"CodeGen",{enumerable:!0,get:function(){return ii.CodeGen}});var hU=Mi();Object.defineProperty(Ue,"ValidationError",{enumerable:!0,get:function(){return hU.default}});var pU=dn();Object.defineProperty(Ue,"MissingRefError",{enumerable:!0,get:function(){return pU.default}})});var Rp=v((fK,ZR)=>{"use strict";var mU=xd();ZR.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:mU,addUsedSchema:!1,allErrors:!1})});var rT=v((dK,tT)=>{"use strict";var yU=uu().default,gU=wp(),eT=Rp(),Tp=class{constructor(t,r){r.mode==="JTD"?this.ajv=new gU(Object.assign({},eT,r.customOptions)):this.ajv=new yU(Object.assign({},eT,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let i of r.plugins)Array.isArray(i)?(n=n&&i[0].name!=="formatsPlugin",i[0](this.ajv,i[1])):(n=n&&i.name!=="formatsPlugin",i(this.ajv));n&&Bd()(this.ajv);let s=Object.values(t);for(let i of s)this.ajv.addSchema(i)}buildValidatorFunction({schema:t}){if(t.$id){let r=this.ajv.getSchema(t.$id);if(r)return r}return this.ajv.compile(t)}};tT.exports=Tp});var sT=v((hK,nT)=>{"use strict";var _U=wp(),vU=Rp(),$p=class{constructor(t,r){this.ajv=new _U(Object.assign({},vU,r))}buildSerializerFunction({schema:t}){return this.ajv.compileSerializer(t)}};nT.exports=$p});var aT=v((ko,oT)=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var No=ja(),yr=$s();function iT(e,t){if(!e.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=e.scope.opts;return typeof t=="function"?s(t.source):t!==void 0?i(t,n):i(e.schemas,a=>a.meta?void 0:e.compile(a.schema));function n(a){let l=e.getSchema(a);if(!l)throw new Error(`moduleCode: no schema with id ${a}`);return l}function s(a){let l={},u=a?.validateName,c=o(l,a);return e.opts.code.esm?`"use strict";${r}export const validate = ${u};${r}export default ${u};${r}${c}`:`"use strict";${r}module.exports = ${u};${r}module.exports.default = ${u};${r}${c}`}function i(a,l){var u;let c={},f=(0,yr._)`"use strict";`;for(let h in a){let d=l(a[h]);if(d){let m=o(c,d.source),y=e.opts.code.esm?(0,yr._)`export const ${(0,yr.getEsmExportName)(h)}`:(0,yr._)`exports${(0,yr.getProperty)(h)}`;f=(0,yr._)`${f}${r}${y} = ${(u=d.source)===null||u===void 0?void 0:u.validateName};${r}${m}`}}return`${f}`}function o(a,l){if(!l)throw new Error('moduleCode: function does not have "source" property');if(h(l.validateName)===No.UsedValueState.Completed)return yr.nil;d(l.validateName,No.UsedValueState.Started);let u=e.scope.scopeCode(l.scopeValues,a,f),c=new yr._Code(`${u}${r}${l.validateCode}`);return l.evaluated?(0,yr._)`${c}${l.validateName}.evaluated = ${l.evaluated};${r}`:c;function f(m){var y;let S=(y=m.value)===null||y===void 0?void 0:y.ref;if(m.prefix==="validate"&&typeof S=="function")return o(a,S.source);if((m.prefix==="root"||m.prefix==="wrapper")&&typeof S=="object"){let{validate:_,validateName:b}=S;if(!b)throw new Error("ajv internal error");let g=e.opts.code.es5?No.varKinds.var:No.varKinds.const,p=(0,yr._)`${g} ${m} = {validate: ${b}};`;if(h(b)===No.UsedValueState.Started)return p;let T=o(a,_?.source);return(0,yr._)`${p}${r}${T}`}}function h(m){var y;return(y=a[m.prefix])===null||y===void 0?void 0:y.get(m)}function d(m,y){let{prefix:S}=m;(a[S]=a[S]||new Map).set(m,y)}}}oT.exports=ko=iT;Object.defineProperty(ko,"__esModule",{value:!0});ko.default=iT});var cT=v((pK,lT)=>{"use strict";var uT=Pp(),EU=aT().default;function SU(e={readMode:!0}){if(e.readMode===!0&&!e.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(e.readMode!==!0&&!e.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(e.readMode===!0)return function(){return function(n){return e.restoreFunction(n)}};let t=uT();return function(n,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let i=t(n,s);return function(o){let a=i(o),l=EU(i[uT.AjvReference].ajv,a);return e.storeFunction(o,l),a}}}lT.exports=SU});var Pp=v((mK,oi)=>{"use strict";var dT=Symbol.for("fastify.ajv-compiler.reference"),bU=rT(),wU=sT();function Op(e){let t=new Map,r=new Map;return e&&e.jtdSerializer===!0?function(s,i){let o=fT({},i);if(r.has(o))return r.get(o);let a=new wU(s,i),l=a.buildSerializerFunction.bind(a);return r.set(o,l),l}:function(s,i){let o=fT(s,i.customOptions);if(t.has(o))return t.get(o);let a=new bU(s,i),l=a.buildValidatorFunction.bind(a);return t.set(o,l),i.customOptions.code!==void 0&&(l[dT]=a),l}}function fT(e,t){let r=JSON.stringify(e),n=JSON.stringify(t);return`${r}${n}`}oi.exports=Op;oi.exports.default=Op;oi.exports.AjvCompiler=Op;oi.exports.AjvReference=dT;oi.exports.StandaloneValidator=cT()});var Ip=v((yK,hT)=>{"use strict";var{buildSchemas:RU}=$i(),TU=Kh(),$U=Pp();function PU(e,t){if(e)return new ai(e,t);let r=Object.assign({buildValidator:null,buildSerializer:null},t?.compilersFactory);r.buildValidator||(r.buildValidator=$U()),r.buildSerializer||(r.buildSerializer=TU());let n={bucket:t&&t.bucket||RU,compilersFactory:r,isCustomValidatorCompiler:typeof t?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof t?.compilersFactory?.buildValidator=="function"};return new ai(void 0,n)}var ai=class{constructor(t,r){this.opts=r||t&&t.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1,t?(this.schemaBucket=this.opts.bucket(t.getSchemas()),this.validatorCompiler=t.getValidatorCompiler(),this.serializerCompiler=t.getSerializerCompiler(),this.parent=t):this.schemaBucket=this.opts.bucket()}add(t){return this.addedSchemas=!0,this.schemaBucket.add(t)}getSchema(t){return this.schemaBucket.getSchema(t)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(t){this.validatorCompiler=t,this.isCustomValidatorCompiler=!0}setSerializerCompiler(t){this.serializerCompiler=t,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(t){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),t.ajv))}setupSerializer(t){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),t.serializerOpts))}};ai.buildSchemaController=PU;hT.exports=ai});var jp=v((gK,qp)=>{"use strict";var Ap=bh(),Np=require("assert"),kp=Symbol.for("registered-plugin"),{kTestInternals:OU}=at(),{exist:IU,existReply:AU,existRequest:CU}=Ch(),{FST_ERR_PLUGIN_VERSION_MISMATCH:NU,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:kU}=gt();function qo(e){return e[Symbol.for("plugin-meta")]}function qU(e){let t=pT(e);if(t)return t;let r=require.cache,n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];if(r[i].exports===e)return i}return e.name?e.name:null}function jU(e){return e.toString().split(`
`).slice(0,2).map(t=>t.trim()).join(" -- ")}function pT(e){return e[Symbol.for("fastify.display-name")]}function mT(e){return!!e[Symbol.for("skip-override")]}function yT(e){let t=qo(e);if(!t)return;let r=t.dependencies;r&&(Np(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{Np(this[kp].indexOf(n)>-1,`The dependency '${n}' of plugin '${t.name}' is not registered`)}))}function gT(e){let t=qo(e);if(!t)return;let{decorators:r,name:n}=t;r&&(r.fastify&&Cp(this,"Fastify",r.fastify,n),r.reply&&Cp(this,"Reply",r.reply,n),r.request&&Cp(this,"Request",r.request,n))}var DU={Fastify:IU,Request:CU,Reply:AU};function Cp(e,t,r,n){Np(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let i=typeof n=="string"?` required by '${n}'`:"";if(!DU[t].call(e,s))throw new kU(s,i,t)})}function LU(e){let t=qo(e);if(!t)return;let r=t.fastify,n=/-rc.+$/.test(this.version);if(!(n===!0&&Ap.gt(this.version,Ap.coerce(r))===!0)&&r&&Ap.satisfies(this.version,r,{includePrerelease:n})===!1)throw new NU(t.name,r,this.version)}function xU(e){let t=qo(e);if(!t)return;let r=t.name;r&&this[kp].push(r)}function FU(e){return xU.call(this,e),LU.call(this,e),gT.call(this,e),yT.call(this,e),mT(e)}qp.exports={getPluginName:qU,getFuncPreview:jU,registeredPlugins:kp,getDisplayName:pT,registerPlugin:FU};qp.exports[OU]={shouldSkipOverride:mT,getMeta:qo,checkDecorators:gT,checkDependencies:yT}});var vT=v((_K,_T)=>{"use strict";_T.exports=function(e,t){let n=0;function s(o){return n=n+1&2147483647,`req-${n.toString(36)}`}let i=t||s;return e?function(o){return o.headers[e]||i(o)}:i}});var wT=v((vK,bT)=>{"use strict";var ET=12,MU=0,Dp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function VU(e){var t=e.indexOf("%");if(t===-1)return e;for(var r=e.length,n="",s=0,i=0,o=t,a=ET;t>-1&&t<r;){var l=ST(e[t+1],4),u=ST(e[t+2],0),c=l|u,f=Dp[c];if(a=Dp[256+a+f],i=i<<6|c&Dp[364+f],a===ET)n+=e.slice(s,o),n+=i<=65535?String.fromCharCode(i):String.fromCharCode(55232+(i>>10),56320+(i&1023)),i=0,s=t+3,t=o=e.indexOf("%",s);else{if(a===MU)return null;if(t+=3,t<r&&e.charCodeAt(t)===37)continue;return null}}return n+e.slice(s)}var zU={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function ST(e,t){var r=zU[e];return r===void 0?255:r<<t}bT.exports=VU});var OT=v((EK,PT)=>{"use strict";var RT=wT(),TT=/\+/g,$T=function(){};$T.prototype=Object.create(null);function HU(e){let t=new $T;if(typeof e!="string")return t;let r=e.length,n="",s="",i=-1,o=-1,a=!1,l=!1,u=!1,c=!1,f=!1,h=0;for(let d=0;d<r+1;d++)if(h=d!==r?e.charCodeAt(d):38,h===38){if(f=o>i,f||(o=d),n=e.slice(i+1,o),f||n.length>0){u&&(n=n.replace(TT," ")),a&&(n=RT(n)||n),f&&(s=e.slice(o+1,d),c&&(s=s.replace(TT," ")),l&&(s=RT(s)||s));let m=t[n];m===void 0?t[n]=s:m.pop?m.push(s):t[n]=[m,s]}s="",i=d,o=d,a=!1,l=!1,u=!1,c=!1}else h===61?o<=i?o=d:l=!0:h===43?o>i?c=!0:u=!0:h===37&&(o>i?l=!0:a=!0);return t}PT.exports=HU});var AT=v((SK,IT)=>{var Pr=Array.from({length:256},(e,t)=>"%"+((t<16?"0":"")+t.toString(16)).toUpperCase()),UU=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function BU(e){let t=e.length;if(t===0)return"";let r="",n=0,s=0;e:for(;s<t;s++){let i=e.charCodeAt(s);for(;i<128;){if(UU[i]!==1&&(n<s&&(r+=e.slice(n,s)),n=s+1,r+=Pr[i]),++s===t)break e;i=e.charCodeAt(s)}if(n<s&&(r+=e.slice(n,s)),i<2048){n=s+1,r+=Pr[192|i>>6]+Pr[128|i&63];continue}if(i<55296||i>=57344){n=s+1,r+=Pr[224|i>>12]+Pr[128|i>>6&63]+Pr[128|i&63];continue}if(++s,s>=t)throw new Error("URI malformed");let o=e.charCodeAt(s)&1023;n=s+1,i=65536+((i&1023)<<10|o),r+=Pr[240|i>>18]+Pr[128|i>>12&63]+Pr[128|i>>6&63]+Pr[128|i&63]}return n===0?e:n<t?r+e.slice(n):r}IT.exports={encodeString:BU}});var kT=v((bK,NT)=>{"use strict";var{encodeString:Lp}=AT();function CT(e){let t=typeof e;return t==="string"?Lp(e):t==="bigint"?e.toString():t==="boolean"?e?"true":"false":t==="number"&&Number.isFinite(e)?e<1e21?""+e:Lp(""+e):""}function GU(e){let t="";if(e===null||typeof e!="object")return t;let r="&",n=Object.keys(e),s=n.length,i=0;for(let o=0;o<s;o++){let a=n[o],l=e[a],u=Lp(a)+"=";if(o&&(t+=r),Array.isArray(l)){i=l.length;for(let c=0;c<i;c++)c&&(t+=r),t+=u,t+=CT(l[c])}else t+=u,t+=CT(l)}return t}NT.exports=GU});var LT=v((wK,jo)=>{"use strict";var qT=OT(),jT=kT(),DT={parse:qT,stringify:jT};jo.exports=DT;jo.exports.default=DT;jo.exports.parse=qT;jo.exports.stringify=jT});var Do=v((RK,xT)=>{xT.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}});var Fp=v(wn=>{var Te=Do(),xp=()=>[{type:Te.RANGE,from:48,to:57}],FT=()=>[{type:Te.CHAR,value:95},{type:Te.RANGE,from:97,to:122},{type:Te.RANGE,from:65,to:90}].concat(xp()),MT=()=>[{type:Te.CHAR,value:9},{type:Te.CHAR,value:10},{type:Te.CHAR,value:11},{type:Te.CHAR,value:12},{type:Te.CHAR,value:13},{type:Te.CHAR,value:32},{type:Te.CHAR,value:160},{type:Te.CHAR,value:5760},{type:Te.RANGE,from:8192,to:8202},{type:Te.CHAR,value:8232},{type:Te.CHAR,value:8233},{type:Te.CHAR,value:8239},{type:Te.CHAR,value:8287},{type:Te.CHAR,value:12288},{type:Te.CHAR,value:65279}],KU=()=>[{type:Te.CHAR,value:10},{type:Te.CHAR,value:13},{type:Te.CHAR,value:8232},{type:Te.CHAR,value:8233}];wn.words=()=>({type:Te.SET,set:FT(),not:!1});wn.notWords=()=>({type:Te.SET,set:FT(),not:!0});wn.ints=()=>({type:Te.SET,set:xp(),not:!1});wn.notInts=()=>({type:Te.SET,set:xp(),not:!0});wn.whitespace=()=>({type:Te.SET,set:MT(),not:!1});wn.notWhitespace=()=>({type:Te.SET,set:MT(),not:!0});wn.anyChar=()=>({type:Te.SET,set:KU(),not:!0})});var zT=v(Lo=>{var VT=Do(),ui=Fp(),JU="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",YU={0:0,t:9,n:10,v:11,f:12,r:13};Lo.strToChars=function(e){var t=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return e=e.replace(t,function(r,n,s,i,o,a,l,u){if(s)return r;var c=n?8:i?parseInt(i,16):o?parseInt(o,16):a?parseInt(a,8):l?JU.indexOf(l):YU[u],f=String.fromCharCode(c);return/[[\]{}^$.|?*+()]/.test(f)&&(f="\\"+f),f}),e};Lo.tokenizeClass=(e,t)=>{for(var r=[],n=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?([^])/g,s,i;(s=n.exec(e))!=null;)if(s[1])r.push(ui.words());else if(s[2])r.push(ui.ints());else if(s[3])r.push(ui.whitespace());else if(s[4])r.push(ui.notWords());else if(s[5])r.push(ui.notInts());else if(s[6])r.push(ui.notWhitespace());else if(s[7])r.push({type:VT.RANGE,from:(s[8]||s[9]).charCodeAt(0),to:s[10].charCodeAt(0)});else if(i=s[12])r.push({type:VT.CHAR,value:i.charCodeAt(0)});else return[r,n.lastIndex];Lo.error(t,"Unterminated character class")};Lo.error=(e,t)=>{throw new SyntaxError("Invalid regular expression: /"+e+"/: "+t)}});var HT=v(xo=>{var Zu=Do();xo.wordBoundary=()=>({type:Zu.POSITION,value:"b"});xo.nonWordBoundary=()=>({type:Zu.POSITION,value:"B"});xo.begin=()=>({type:Zu.POSITION,value:"^"});xo.end=()=>({type:Zu.POSITION,value:"$"})});var UT=v((OK,Mp)=>{var li=zT(),sr=Do(),ns=Fp(),el=HT();Mp.exports=e=>{var t=0,r,n,s={type:sr.ROOT,stack:[]},i=s,o=s.stack,a=[],l=_=>{li.error(e,`Nothing to repeat at column ${_-1}`)},u=li.strToChars(e);for(r=u.length;t<r;)switch(n=u[t++],n){case"\\":switch(n=u[t++],n){case"b":o.push(el.wordBoundary());break;case"B":o.push(el.nonWordBoundary());break;case"w":o.push(ns.words());break;case"W":o.push(ns.notWords());break;case"d":o.push(ns.ints());break;case"D":o.push(ns.notInts());break;case"s":o.push(ns.whitespace());break;case"S":o.push(ns.notWhitespace());break;default:/\d/.test(n)?o.push({type:sr.REFERENCE,value:parseInt(n,10)}):o.push({type:sr.CHAR,value:n.charCodeAt(0)})}break;case"^":o.push(el.begin());break;case"$":o.push(el.end());break;case"[":var c;u[t]==="^"?(c=!0,t++):c=!1;var f=li.tokenizeClass(u.slice(t),e);t+=f[1],o.push({type:sr.SET,set:f[0],not:c});break;case".":o.push(ns.anyChar());break;case"(":var h={type:sr.GROUP,stack:[],remember:!0};n=u[t],n==="?"&&(n=u[t+1],t+=2,n==="="?h.followedBy=!0:n==="!"?h.notFollowedBy=!0:n!==":"&&li.error(e,`Invalid group, character '${n}' after '?' at column ${t-1}`),h.remember=!1),o.push(h),a.push(i),i=h,o=h.stack;break;case")":a.length===0&&li.error(e,`Unmatched ) at column ${t-1}`),i=a.pop(),o=i.options?i.options[i.options.length-1]:i.stack;break;case"|":i.options||(i.options=[i.stack],delete i.stack);var d=[];i.options.push(d),o=d;break;case"{":var m=/^(\d+)(,(\d+)?)?\}/.exec(u.slice(t)),y,S;m!==null?(o.length===0&&l(t),y=parseInt(m[1],10),S=m[2]?m[3]?parseInt(m[3],10):1/0:y,t+=m[0].length,o.push({type:sr.REPETITION,min:y,max:S,value:o.pop()})):o.push({type:sr.CHAR,value:123});break;case"?":o.length===0&&l(t),o.push({type:sr.REPETITION,min:0,max:1,value:o.pop()});break;case"+":o.length===0&&l(t),o.push({type:sr.REPETITION,min:1,max:1/0,value:o.pop()});break;case"*":o.length===0&&l(t),o.push({type:sr.REPETITION,min:0,max:1/0,value:o.pop()});break;default:o.push({type:sr.CHAR,value:n.charCodeAt(0)})}return a.length!==0&&li.error(e,"Unterminated group"),s};Mp.exports.types=sr});var KT=v((IK,GT)=>{"use strict";var BT=UT(),WU=BT.types;GT.exports=function(e,t){t||(t={});var r=t.limit===void 0?25:t.limit;XU(e)?e=e.source:typeof e!="string"&&(e=String(e));try{e=BT(e)}catch{return!1}var n=0;return function s(i,o){var a,l,u;if(i.type===WU.REPETITION&&(o++,n++,o>1||n>r))return!1;if(i.options){for(a=0,u=i.options.length;a<u;a++)if(l=s({stack:i.options[a]},o),!l)return!1}var c=i.stack||i.value&&i.value.stack;if(!c)return!0;for(a=0;a<c.length;a++)if(l=s(c[a],o),!l)return!1;return!0}(e,0)};function XU(e){return{}.toString.call(e)==="[object RegExp]"}});var tl=v((AK,JT)=>{"use strict";JT.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let e={};return{get:t=>e[t]||null,set:(t,r)=>{e[t]=r}}},deriveConstraint:e=>e.method,mustMatchWhenDerived:!0}});var t$=v((CK,e$)=>{"use strict";var YT=Ns(),WT=tl(),XT=Symbol("treeData");function QT(e,t=""){let r="",n=Object.keys(e);for(let s=0;s<n.length;s++){let i=n[s],o=e[i],a=s===n.length-1,l=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",u=a?"    ":"\u2502   ",f=(o[XT]||"").split(`
`).join(`
`+t+u);r+=t+l+i+f+`
`,r+=QT(o,t+u)}return r}function QU(e){let t=e.name||"";return t=t.replace("bound","").trim(),t=(t||"anonymous")+"()",t}function ZT(e){return Array.isArray(e)?e.map(t=>ZT(t)):typeof e=="symbol"?e.toString():typeof e=="function"?QU(e):e}function ZU(e,t){if(!t.includeMeta)return{};let r=t.buildPrettyMeta(e),n={},s=t.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let i of s){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=i.toString(),a=r[i];if(a!=null){let l=JSON.stringify(ZT(a));n[o]=l}}return n}function e3(e){let t="";for(let[r,n]of Object.entries(e))t+=`
\u2022 (${r}) ${n}`;return t}function t3(e){let t={...e.opts.constraints},r=t[WT.name];return delete t[WT.name],{...e,method:r,opts:{constraints:t}}}function r3(e){let t=` (${e.method})`,r=e.opts.constraints||{};return Object.keys(r).length!==0&&(t+=" "+JSON.stringify(r)),t+=e3(e.metaData),t}function n3(e){return e.reduce((t,r)=>{for(let n of t)if(YT(r.opts.constraints,n.opts.constraints)&&YT(r.metaData,n.metaData))return n.method+=", "+r.method,t;return t.push(r),t},[])}function s3(e,t,r){let n=e.routes;return r.method===void 0&&(n=n.map(t3)),n=n.map(s=>(s.metaData=ZU(s,r),s)),r.method===void 0&&(n=n3(n)),n.map(r3).join(`
${t}`)}function rl(e,t,r,n){if((e.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",t=t[r]={},e.isLeafNode&&(t[XT]=s3(e,r,n)),r=""),e.staticChildren)for(let s of Object.values(e.staticChildren))rl(s,t,r+s.prefix,n);if(e.parametricChildren)for(let s of Object.values(e.parametricChildren)){let i=Array.from(s.nodePaths).join("|");rl(s,t,r+i,n)}e.wildcardChild&&rl(e.wildcardChild,t,"*",n)}function i3(e,t){let r={};return rl(e,r,e.prefix,t),QT(r)}e$.exports={prettyPrintTree:i3}});var n$=v((NK,r$)=>{"use strict";var o3=tl(),Vp=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(t){return t===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(t)}addHandler(t,r){let n=r.params,s=r.opts.constraints||{},i={params:n,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=i);for(let l of o)this.constraints.includes(l)||(l==="version"?this.constraints.unshift(l):this.constraints.push(l));let a=o.includes(o3.name);if(!a&&this.handlers.length>=32)throw new Error("find-my-way supports a maximum of 32 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort((l,u)=>Object.keys(l.constraints).length-Object.keys(u.constraints).length),a||this._compileGetHandlerMatchingConstraints(t,s)}_compileCreateParamsObject(t){let r=[];for(let n=0;n<t.length;n++)r.push(`'${t[n]}': paramsArray[${n}]`);return new Function("paramsArray",`return {${r.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(t,r){for(let n=0;n<this.handlers.length;n++){let i=this.handlers[n].constraints[r];if(i!==void 0){let o=t.get(i)||0;o|=1<<n,t.set(i,o)}}}_constrainedIndexBitmask(t){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[t]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(t){this.constrainedHandlerStores={};for(let n of this.constraints){let s=t.newStoreForConstraint(n);this.constrainedHandlerStores[n]=s,this._buildConstraintStore(s,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let i=t.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${i}
      }
      if (candidates === 0) return null;
      `)}for(let n in t.strategies)t.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};r$.exports=Vp});var i$=v((kK,s$)=>{"use strict";var a3=n$(),al={STATIC:0,PARAMETRIC:1,WILDCARD:2},nl=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(t,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new a3),this.isLeafNode=!0,this.routes.push(t),this.handlerStorage.addHandler(r,t)}},sl=class extends nl{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(t,r){let n=this.staticChildren[t.charAt(r)];return n===void 0||!n.matchPrefix(t,r)?null:n}createStaticChild(t){if(t.length===0)return this;let r=this.staticChildren[t.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(t.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(t.slice(s))}let n=t.charAt(0);return this.staticChildren[n]=new ci(t),this.staticChildren[n]}},ci=class extends sl{constructor(t){super(),this.prefix=t,this.wildcardChild=null,this.parametricChildren=[],this.kind=al.STATIC,this._compilePrefixMatch()}createParametricChild(t,r,n){let s=t&&t.source,i=this.parametricChildren.find(o=>(o.regex&&o.regex.source)===s);return i?(i.nodePaths.add(n),i):(i=new il(t,r,n),this.parametricChildren.push(i),this.parametricChildren.sort((o,a)=>o.isRegex?a.isRegex?o.staticSuffix===null?1:a.staticSuffix===null?-1:a.staticSuffix.endsWith(o.staticSuffix)?1:o.staticSuffix.endsWith(a.staticSuffix)?-1:0:-1:1),i)}createWildcardChild(){return this.wildcardChild?this.wildcardChild:(this.wildcardChild=new ol,this.wildcardChild)}split(t,r){let n=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let i=new ci(n);return i.staticChildren[s.charAt(0)]=this,t.staticChildren[n.charAt(0)]=i,i}getNextNode(t,r,n,s){let i=this.findStaticMatchingChild(t,r),o=0;if(i===null){if(this.parametricChildren.length===0)return this.wildcardChild;i=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return i}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let t=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);t.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${t.join(" && ")}`)}},il=class extends sl{constructor(t,r,n){super(),this.isRegex=!!t,this.regex=t||null,this.staticSuffix=r||null,this.kind=al.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(t,r){return this.findStaticMatchingChild(t,r)}},ol=class extends nl{constructor(){super(),this.kind=al.WILDCARD}getNextNode(){return null}};s$.exports={StaticNode:ci,ParametricNode:il,WildcardNode:ol,NODE_TYPES:al}});var a$=v((qK,o$)=>{"use strict";var u3=require("assert");function Fo(){if(!(this instanceof Fo))return new Fo;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}Fo.prototype.set=function(e,t){if(typeof e!="string")throw new TypeError("Version should be a string");let[r,n,s]=e.split(".");return r=Number(r)||0,n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=t,this.store["*"]=t,this.store["x.x"]=t,this.store["x.x.x"]=t),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=t,this.store[`${r}.x.x`]=t),s>=(this.store[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store[`${r}.${n}.x`]=t),this.store[`${r}.${n}.${s}`]=t,this};Fo.prototype.get=function(e){return this.store[e]};o$.exports={name:"version",mustMatchWhenDerived:!0,storage:Fo,validate(e){u3(typeof e=="string","Version should be a string")}}});var l$=v((jK,u$)=>{"use strict";var l3=require("assert");function c3(){let e={},t=[];return{get:r=>{let n=e[r];if(n)return n;for(let s of t)if(s.host.test(r))return s.value},set:(r,n)=>{r instanceof RegExp?t.push({host:r,value:n}):e[r]=n}}}u$.exports={name:"host",mustMatchWhenDerived:!1,storage:c3,validate(e){l3(typeof e=="string"||Object.prototype.toString.call(e)==="[object RegExp]","Host should be a string or a RegExp")}}});var f$=v((DK,c$)=>{"use strict";var f3=a$(),d3=l$(),zp=require("assert"),Hp=class{constructor(t){if(this.strategies={version:f3,host:d3},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,t)for(let r of Object.values(t))this.addConstraintStrategy(r)}isStrategyUsed(t){return this.strategiesInUse.has(t)||this.asyncStrategiesInUse.has(t)}hasConstraintStrategy(t){let r=this.strategies[t];return r!==void 0?r.isCustom||this.isStrategyUsed(t):!1}addConstraintStrategy(t){if(zp(typeof t.name=="string"&&t.name!=="","strategy.name is required."),zp(t.storage&&typeof t.storage=="function","strategy.storage function is required."),zp(t.deriveConstraint&&typeof t.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[t.name]&&this.strategies[t.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${t.name}.`);if(this.isStrategyUsed(t.name))throw new Error(`There already exists a route with ${t.name} constraint.`);t.isCustom=!0,t.isAsync=t.deriveConstraint.length===3,this.strategies[t.name]=t,t.mustMatchWhenDerived&&this.noteUsage({[t.name]:t})}deriveConstraints(t,r,n){let s=this.deriveSyncConstraints(t,r);if(n===void 0)return s;this.deriveAsyncConstraints(s,t,r,n)}deriveSyncConstraints(t,r){}noteUsage(t){if(t){let r=this.strategiesInUse.size;for(let n in t)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(t){if(!this.strategies[t])throw new Error(`No strategy registered for constraint key ${t}`);return this.strategies[t].storage()}validateConstraints(t){for(let r in t){let n=t[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(n)}}deriveAsyncConstraints(t,r,n,s){let i=this.asyncStrategiesInUse.size;if(i===0){s(null,t);return}t=t||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(l,u)=>{if(l!==null){s(l);return}t[o]=u,--i===0&&s(null,t)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let t=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];if(n.isCustom)t.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`);else if(r==="version")t.push("   version: req.headers['accept-version'],");else if(r==="host")t.push("   host: req.headers.host || req.headers[':authority'],");else throw new Error("unknown non-custom strategy for compiling constraint derivation function")}t.push("}"),this.deriveSyncConstraints=new Function("req","ctx",t.join(`
`)).bind(this)}};c$.exports=Hp});var h$=v((LK,d$)=>{"use strict";var h3=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];d$.exports=h3});var y$=v((xK,m$)=>{"use strict";function p$(e,t){return e===50?t===53?"%":t===51?"#":t===52?"$":t===54?"&":t===66||t===98?"+":t===67||t===99?",":t===70||t===102?"/":null:e===51?t===65||t===97?":":t===66||t===98?";":t===68||t===100?"=":t===70||t===102?"?":null:e===52&&t===48?"@":null}function p3(e){let t=!1,r=!1,n="";for(let i=1;i<e.length;i++){let o=e.charCodeAt(i);if(o===37){let a=e.charCodeAt(i+1),l=e.charCodeAt(i+2);p$(a,l)===null?t=!0:(r=!0,a===50&&l===53&&(t=!0,e=e.slice(0,i+1)+"25"+e.slice(i+1),i+=2),i+=2)}else if(o===63||o===59||o===35){n=e.slice(i+1),e=e.slice(0,i);break}}return{path:t?decodeURI(e):e,querystring:n,shouldDecodeParam:r}}function m3(e){let t=e.indexOf("%");if(t===-1)return e;let r="",n=t;for(let s=t;s<e.length;s++)if(e.charCodeAt(s)===37){let i=e.charCodeAt(s+1),o=e.charCodeAt(s+2),a=p$(i,o);r+=e.slice(n,s)+a,n=s+3}return e.slice(0,t)+r+e.slice(n)}m$.exports={safeDecodeURI:p3,safeDecodeURIComponent:m3}});var Wp=v((FK,S$)=>{"use strict";var et=require("assert"),y3=LT(),Kp=KT(),v$=Ns(),{prettyPrintTree:g3}=t$(),{StaticNode:g$,NODE_TYPES:Up}=i$(),_3=f$(),fi=h$(),Bp=tl(),{safeDecodeURI:v3,safeDecodeURIComponent:_$}=y$(),E$=/^https?:\/\/.*?\//,ss=/(\/:[^/()]*?)\?(\/?)/;if(!Kp(E$))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!Kp(ss))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function Ye(e){if(!(this instanceof Ye))return new Ye(e);e=e||{},this._opts=e,e.defaultRoute?(et(typeof e.defaultRoute=="function","The default route must be a function"),this.defaultRoute=e.defaultRoute):this.defaultRoute=null,e.onBadUrl?(et(typeof e.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=e.onBadUrl):this.onBadUrl=null,e.buildPrettyMeta?(et(typeof e.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=e.buildPrettyMeta):this.buildPrettyMeta=w3,e.querystringParser?(et(typeof e.querystringParser=="function","querystringParser must be a function"),this.querystringParser=e.querystringParser):this.querystringParser=t=>t===""?{}:y3.parse(t),this.caseSensitive=e.caseSensitive===void 0?!0:e.caseSensitive,this.ignoreTrailingSlash=e.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=e.ignoreDuplicateSlashes||!1,this.maxParamLength=e.maxParamLength||100,this.allowUnsafeRegex=e.allowUnsafeRegex||!1,this.constrainer=new _3(e.constraints),this.routes=[],this.trees={}}Ye.prototype.on=function(t,r,n,s,i){typeof n=="function"&&(s!==void 0&&(i=s),s=n,n={}),et(typeof r=="string","Path should be a string"),et(r.length>0,"The path could not be empty"),et(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),et(typeof s=="function","Handler should be a function");let o=r.match(ss);if(o){et(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let u=r.replace(ss,"$1$2"),c=r.replace(ss,"$2");this.on(t,u,n,s,i),this.on(t,c,n,s,i);return}let a=r;this.ignoreDuplicateSlashes&&(r=Jp(r)),this.ignoreTrailingSlash&&(r=Yp(r));let l=Array.isArray(t)?t:[t];for(let u of l)et(typeof u=="string","Method should be a string"),et(fi.includes(u),`Method '${u}' is not an http method.`),this._on(u,r,n,s,i,a)};Ye.prototype._on=function(t,r,n,s,i){let o={};n.constraints!==void 0&&(et(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[t]===void 0&&(this.trees[t]=new g$("/"));let a=r;if(a==="*"&&this.trees[t].prefix.length!==0){let h=this.trees[t];this.trees[t]=new g$(""),this.trees[t].staticChildren["/"]=h}let l=this.trees[t],u=l.prefix.length,c=[];for(let h=0;h<=a.length;h++){if(a.charCodeAt(h)===58&&a.charCodeAt(h+1)===58){h++;continue}let d=a.charCodeAt(h)===58&&a.charCodeAt(h+1)!==58,m=a.charCodeAt(h)===42;if(d||m||h===a.length&&h!==u){let y=a.slice(u,h);this.caseSensitive||(y=y.toLowerCase()),y=y.split("::").join(":"),y=y.split("%").join("%25"),l=l.createStaticChild(y)}if(d){let y=!1,S=[],_=h+1;for(let b=_;;b++){let g=a.charCodeAt(b),p=g===40,T=g===45||g===46,O=g===47||b===a.length;if(p||T||O){let w=a.slice(_,b);if(c.push(w),y=y||p||T,p){let A=b3(a,b),P=a.slice(b,A+1);this.allowUnsafeRegex||et(Kp(new RegExp(P)),`The regex '${P}' is not safe!`),S.push(S3(P)),b=A+1}else S.push("(.*?)");let I=b;for(;b<a.length;b++){let A=a.charCodeAt(b);if(A===47)break;if(A===58)if(a.charCodeAt(b+1)===58)b++;else break}let k=a.slice(I,b);if(k&&(k=k.split("::").join(":"),k=k.split("%").join("%25"),S.push(E3(k))),_=b+1,O||a.charCodeAt(b)===47||b===a.length){let A=y?"()"+k:k,P=a.slice(h,b);a=a.slice(0,h+1)+A+a.slice(b),h+=A.length;let q=y?new RegExp("^"+S.join("")+"$"):null;l=l.createParametricChild(q,k||null,P),u=h+1;break}}}}else if(m&&(c.push("*"),l=l.createWildcardChild(),u=h+1,h!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let h of this.routes){let d=h.opts.constraints||{};if(h.method===t&&h.pattern===a&&v$(d,o))throw new Error(`Method '${t}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let f={method:t,path:r,pattern:a,params:c,opts:n,handler:s,store:i};this.routes.push(f),l.addRoute(f,this.constrainer)};Ye.prototype.hasConstraintStrategy=function(e){return this.constrainer.hasConstraintStrategy(e)};Ye.prototype.addConstraintStrategy=function(e){this.constrainer.addConstraintStrategy(e),this._rebuild(this.routes)};Ye.prototype.reset=function(){this.trees={},this.routes=[]};Ye.prototype.off=function(t,r,n){et(typeof r=="string","Path should be a string"),et(r.length>0,"The path could not be empty"),et(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),et(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let s=r.match(ss);if(s){et(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(ss,"$1$2"),a=r.replace(ss,"$2");this.off(t,o,n),this.off(t,a,n);return}this.ignoreDuplicateSlashes&&(r=Jp(r)),this.ignoreTrailingSlash&&(r=Yp(r));let i=Array.isArray(t)?t:[t];for(let o of i)this._off(o,r,n)};Ye.prototype._off=function(t,r,n){et(typeof t=="string","Method should be a string"),et(fi.includes(t),`Method '${t}' is not an http method.`);function s(l){return t!==l.method||r!==l.path}function i(l){return s(l)||!v$(n,l.opts.constraints||{})}let o=n?i:s,a=this.routes.filter(o);this._rebuild(a)};Ye.prototype.lookup=function(t,r,n,s){if(typeof n=="function"&&(s=n,n=void 0),s===void 0){let i=this.constrainer.deriveConstraints(t,n),o=this.find(t.method,t.url,i);return this.callHandler(o,t,r,n)}this.constrainer.deriveConstraints(t,n,(i,o)=>{if(i!==null){s(i);return}try{let a=this.find(t.method,t.url,o),l=this.callHandler(a,t,r,n);s(null,l)}catch(a){s(a)}})};Ye.prototype.callHandler=function(t,r,n,s){return t===null?this._defaultRoute(r,n,s):s===void 0?t.handler(r,n,t.params,t.store,t.searchParams):t.handler.call(s,r,n,t.params,t.store,t.searchParams)};Ye.prototype.find=function(t,r,n){let s=this.trees[t];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(E$,"/")),this.ignoreDuplicateSlashes&&(r=Jp(r));let i,o,a;try{i=v3(r),r=i.path,o=i.querystring,a=i.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=Yp(r));let l=r;this.caseSensitive===!1&&(r=r.toLowerCase());let u=this.maxParamLength,c=s.prefix.length,f=[],h=r.length,d=[];for(;;){if(c===h&&s.isLeafNode){let y=s.handlerStorage.getMatchingHandler(n);if(y!==null)return{handler:y.handler,store:y.store,params:y._createParamsObject(f),searchParams:this.querystringParser(o)}}let m=s.getNextNode(r,c,d,f.length);if(m===null){if(d.length===0)return null;let y=d.pop();c=y.brotherPathIndex,f.splice(y.paramsCount),m=y.brotherNode}if(s=m,s.kind===Up.STATIC){c+=s.prefix.length;continue}if(s.kind===Up.WILDCARD){let y=l.slice(c);a&&(y=_$(y)),f.push(y),c=h;continue}if(s.kind===Up.PARAMETRIC){let y=l.indexOf("/",c);y===-1&&(y=h);let S=l.slice(c,y);if(a&&(S=_$(S)),s.isRegex){let _=s.regex.exec(S);if(_===null)continue;for(let b=1;b<_.length;b++){let g=_[b];if(g.length>u)return null;f.push(g)}}else{if(S.length>u)return null;f.push(S)}c=y}}};Ye.prototype._rebuild=function(e){this.reset();for(let t of e){let{method:r,path:n,opts:s,handler:i,store:o}=t;this._on(r,n,s,i,o)}};Ye.prototype._defaultRoute=function(e,t,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(e,t):this.defaultRoute.call(r,e,t);t.statusCode=404,t.end()};Ye.prototype._onBadUrl=function(e){if(this.onBadUrl===null)return null;let t=this.onBadUrl;return{handler:(r,n,s)=>t(e,r,n),params:{},store:null}};Ye.prototype.prettyPrint=function(e={}){let t=e.method;e.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(t===void 0){let{version:n,host:s,...i}=this.constrainer.strategies;i[Bp.name]=Bp;let o=new Ye({...this._opts,constraints:i}),a=this.routes.map(l=>{let u={...l.opts.constraints,[Bp.name]:l.method};return{...l,method:"MERGED",opts:{constraints:u}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[t];return r==null?"(empty tree)":g3(r,e)};for(Gp in fi){if(!fi.hasOwnProperty(Gp))continue;let e=fi[Gp],t=e.toLowerCase();if(Ye.prototype[t])throw new Error("Method already exists: "+t);Ye.prototype[t]=function(r,n,s){return this.on(e,r,n,s)}}var Gp;Ye.prototype.all=function(e,t,r){this.on(fi,e,t,r)};S$.exports=Ye;function E3(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Jp(e){return e.replace(/\/\/+/g,"/")}function Yp(e){return e.length>1&&e.charCodeAt(e.length-1)===47?e.slice(0,-1):e}function S3(e){return e.charCodeAt(1)===94&&(e=e.slice(0,1)+e.slice(2)),e.charCodeAt(e.length-2)===36&&(e=e.slice(0,e.length-2)+e.slice(e.length-1)),e}function b3(e,t){for(var r=1;t<e.length;){if(t++,e[t]==="\\"){t++;continue}if(e[t]===")"?r--:e[t]==="("&&r++,!r)return t}throw new TypeError('Invalid regexp expression in "'+e+'"')}function w3(e){return e?e.store?Object.assign({},e.store):{}:{}}});var Xp=v((MK,b$)=>{"use strict";var{kFourOhFourContext:R3,kReplySerializerDefault:T3,kSchemaErrorFormatter:$3,kErrorHandler:P3,kReply:O3,kRequest:I3,kBodyLimit:A3,kLogLevel:C3,kContentTypeParser:N3,kRouteByFastify:k3,kRequestCacheValidateFns:q3,kReplyCacheSerializeFns:j3,kPublicRouteContext:D3}=at();function L3({schema:e,handler:t,config:r,errorHandler:n,bodyLimit:s,logLevel:i,logSerializers:o,attachValidation:a,validatorCompiler:l,serializerCompiler:u,replySerializer:c,schemaErrorFormatter:f,exposeHeadRoute:h,prefixTrailingSlash:d,server:m,isFastify:y}){this.schema=e,this.handler=t,this.Reply=m[O3],this.Request=m[I3],this.contentTypeParser=m[N3],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=n||m[P3],this._middie=null,this._parserOptions={limit:s||m[A3]},this.exposeHeadRoute=h,this.prefixTrailingSlash=d,this.logLevel=i||m[C3],this.logSerializers=o,this[R3]=null,this.attachValidation=a,this[T3]=c,this.schemaErrorFormatter=f||m[$3]||F3,this[k3]=y,this[q3]=null,this[j3]=null,this.validatorCompiler=l||null,this.serializerCompiler=u||null,this[D3]=x3(this),this.server=m}function x3(e){return Object.create(null,{schema:{enumerable:!0,get(){return e.schema}},config:{enumerable:!0,get(){return e.config}}})}function F3(e,t){let r="",n=", ";for(var s=0;s!==e.length;++s){let i=e[s];r+=t+(i.instancePath||"")+" "+i.message+n}return new Error(r.slice(0,-n.length))}b$.exports=L3});var R$=v((VK,w$)=>{"use strict";function Qp(e,t,r,n){if(r===void 0)return t.header("content-length","0"),n(null,null);if(typeof r.resume=="function")return r.on("error",i=>{t.log.error({err:i},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);let s=""+Buffer.byteLength(r);t.header("content-length",s),n(null,null)}function M3(e){return e==null?Qp:Array.isArray(e)?[...e,Qp]:[e,Qp]}w$.exports={parseHeadOnSendHandlers:M3}});var M$=v((zK,F$)=>{"use strict";var V3=Wp(),z3=Xp(),T$=sc(),{hookRunner:L$,hookIterator:rm,onRequestAbortHookRunner:H3,lifecycleHooks:$$}=kn(),{supportedMethods:U3}=$h(),{normalizeSchema:B3}=$i(),{parseHeadOnSendHandlers:G3}=R$(),ul=en(),{compileSchemasForValidation:K3,compileSchemasForSerialization:J3}=Zl(),{FST_ERR_SCH_VALIDATION_BUILD:Y3,FST_ERR_SCH_SERIALIZATION_BUILD:W3,FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:X3,FST_ERR_DUPLICATED_ROUTE:Q3,FST_ERR_INVALID_URL:Z3,FST_ERR_SEND_UNDEFINED_ERR:e9,FST_ERR_HOOK_INVALID_HANDLER:P$,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:t9,FST_ERR_ROUTE_DUPLICATED_HANDLER:r9,FST_ERR_ROUTE_HANDLER_NOT_FN:O$,FST_ERR_ROUTE_MISSING_HANDLER:n9,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:s9,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:i9,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:o9}=gt(),{kRoutePrefix:a9,kLogLevel:u9,kLogSerializers:I$,kHooks:A$,kSchemaController:l9,kOptions:C$,kReplySerializerDefault:Zp,kReplyIsError:c9,kRequestPayloadStream:ll,kDisableRequestLogging:f9,kSchemaErrorFormatter:d9,kErrorHandler:N$,kHasBeenDecorated:k$,kRequestAcceptVersion:em,kRouteByFastify:tm,kRouteContext:q$}=at(),{buildErrorHandler:h9}=so();function p9(e){let t=V3(e.config),r,n,s,i,o,a,l,u,c,f,h,d,m,y,S,_=!1;return{setup(k,A){r=A.avvio,n=A.fourOhFour,i=A.logger,o=A.hasLogger,a=A.setupResponseListeners,l=A.throwIfAlreadyStarted,y=A.validateHTTPVersion,m=k.exposeHeadRoutes,s=k.requestIdLogLabel,u=k.genReqId,c=k.disableRequestLogging,f=k.ignoreTrailingSlash,h=k.ignoreDuplicateSlashes,d=Object.prototype.hasOwnProperty.call(k,"return503OnClosing")?k.return503OnClosing:!0,S=A.keepAliveConnections},routing:t.lookup.bind(t),route:w,hasRoute:O,prepareRoute:T,getDefaultRoute:function(){return ul.emit("FSTDEP014"),t.defaultRoute},setDefaultRoute:function(k){if(ul.emit("FSTDEP014"),typeof k!="function")throw new X3;t.defaultRoute=k},routeHandler:I,closeRoutes:()=>{_=!0},printRoutes:t.prettyPrint.bind(t),addConstraintStrategy:b,hasConstraintStrategy:g,isAsyncConstraint:p};function b(k){return l("Cannot add constraint strategy!"),t.addConstraintStrategy(k)}function g(k){return t.hasConstraintStrategy(k)}function p(){return t.constrainer.asyncStrategiesInUse.size>0}function T({method:k,url:A,options:P,handler:q,isFastify:L}){if(typeof A!="string")throw new Z3(typeof A);if(!q&&typeof P=="function")q=P,P={};else if(q&&typeof q=="function"){if(Object.prototype.toString.call(P)!=="[object Object]")throw new t9(k,A);if(P.handler)throw typeof P.handler=="function"?new r9(k,A):new O$(k,A)}return P=Object.assign({},P,{method:k,url:A,path:A,handler:q||P&&P.handler}),w.call(this,{options:P,isFastify:L})}function O({options:k}){return t.find(k.method,k.url||"",k.constraints)!==null}function w({options:k,isFastify:A}){let P={...k},{exposeHeadRoute:q}=P,X=q!=null?q:m,de=X&&k.method==="GET"?{...k}:null;l("Cannot add route!");let V=P.url||P.path||"";if(Array.isArray(P.method))for(var Z=0;Z<P.method.length;++Z)j$(P.method[Z],V,P.schema);else j$(P.method,V,P.schema);if(!P.handler)throw new n9(P.method,V);if(P.errorHandler!==void 0&&typeof P.errorHandler!="function")throw new O$(P.method,V);x$(P.bodyLimit);let xe=this[a9];if(V==="/"&&xe.length>0&&P.method!=="HEAD")switch(P.prefixTrailingSlash){case"slash":H.call(this,{path:V,isFastify:A});break;case"no-slash":H.call(this,{path:"",isFastify:A});break;case"both":default:H.call(this,{path:"",isFastify:A}),f!==!0&&(h!==!0||!xe.endsWith("/"))&&H.call(this,{path:V,prefixing:!0,isFastify:A})}else V[0]==="/"&&xe.endsWith("/")?H.call(this,{path:V.slice(1),isFastify:A}):H.call(this,{path:V,isFastify:A});return this;function H({path:Fe,prefixing:St=!1,isFastify:_e=!1}){let jt=xe+Fe;if(P.url=jt,P.path=jt,P.routePath=Fe,P.prefix=xe,P.logLevel=P.logLevel||this[u9],(this[I$]||P.logSerializers)&&(P.logSerializers=Object.assign(Object.create(this[I$]),P.logSerializers)),P.attachValidation==null&&(P.attachValidation=!1),St===!1)for(let j of this[A$].onRoute)j.call(this,P);for(let j of $$)if(P&&j in P){if(Array.isArray(P[j])){for(let x of P[j])if(typeof x!="function")throw new P$(j,Object.prototype.toString.call(x))}else if(P[j]!==void 0&&typeof P[j]!="function")throw new P$(j,Object.prototype.toString.call(P[j]))}let ct=P.constraints||{},me={...P.config,url:jt,method:P.method},te=new z3({schema:P.schema,handler:P.handler.bind(this),config:me,errorHandler:P.errorHandler,bodyLimit:P.bodyLimit,logLevel:P.logLevel,logSerializers:P.logSerializers,attachValidation:P.attachValidation,schemaErrorFormatter:P.schemaErrorFormatter,replySerializer:this[Zp],validatorCompiler:P.validatorCompiler,serializerCompiler:P.serializerCompiler,exposeHeadRoute:X,prefixTrailingSlash:P.prefixTrailingSlash||"both",server:this,isFastify:_e});P.version&&(ul.emit("FSTDEP008"),ct.version=P.version);let We=t.find("HEAD",P.url,ct),ve=We!=null;ve&&!te[tm]&&We.store[tm]&&t.off("HEAD",P.url,{constraints:ct});try{t.on(P.method,P.url,{constraints:ct},I,te)}catch(j){if(!te[tm])throw j.message.includes(`Method '${P.method}' already declared for route '${P.url}'`)?new Q3(P.method,P.url):j}if(this.after((j,x)=>{te.errorHandler=P.errorHandler?h9(this[N$],P.errorHandler):this[N$],te._parserOptions.limit=P.bodyLimit||null,te.logLevel=P.logLevel,te.logSerializers=P.logSerializers,te.attachValidation=P.attachValidation,te[Zp]=this[Zp],te.schemaErrorFormatter=P.schemaErrorFormatter||this[d9]||te.schemaErrorFormatter,r.once("preReady",()=>{for(let M of $$){let z=this[A$][M].concat(P[M]||[]).map(Ee=>Ee.bind(this));te[M]=z.length?z:null}for(;!te.Request[k$]&&te.Request.parent;)te.Request=te.Request.parent;for(;!te.Reply[k$]&&te.Reply.parent;)te.Reply=te.Reply.parent;if(n.setContext(this,te),P.schema){te.schema=B3(te.schema,this.initialConfig);let M=this[l9];!P.validatorCompiler&&(P.schema.body||P.schema.headers||P.schema.querystring||P.schema.params)&&M.setupValidator(this[C$]);try{let z=typeof P?.validatorCompiler=="function"||M.isCustomValidatorCompiler;K3(te,P.validatorCompiler||M.validatorCompiler,z)}catch(z){throw new Y3(P.method,jt,z.message)}P.schema.response&&!P.serializerCompiler&&M.setupSerializer(this[C$]);try{J3(te,P.serializerCompiler||M.serializerCompiler)}catch(z){throw new W3(P.method,jt,z.message)}}}),x(j)}),X&&k.method==="GET"&&!ve){let j=G3(de.onSend);T.call(this,{method:"HEAD",url:Fe,options:{...de,onSend:j},isFastify:!0})}else ve&&q&&ul.emit("FSTDEP007")}}function I(k,A,P,q,L){let X=u(k),de={[s]:X},V={level:q.logLevel};q.logSerializers&&(V.serializers=q.logSerializers);let Z=i.child(de,V);if(Z[f9]=c,!y(k.httpVersion)){Z.info({res:{statusCode:505}},"request aborted - invalid HTTP version");let St='{"error":"HTTP Version Not Supported","message":"HTTP Version Not Supported","statusCode":505}',_e={"Content-Type":"application/json","Content-Length":St.length};A.writeHead(505,_e),A.end(St);return}if(_===!0&&(k.httpVersionMajor!==2&&A.setHeader("Connection","close"),d)){let St={"Content-Type":"application/json","Content-Length":"80"};A.writeHead(503,St),A.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),Z.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(k.headers.connection||"")==="keep-alive"&&S.has(k.socket)===!1&&(S.add(k.socket),k.socket.on("close",_9.bind({keepAliveConnections:S,socket:k.socket}))),k.headers[em]!==void 0&&(k.headers["accept-version"]=k.headers[em],k.headers[em]=void 0);let H=new q.Request(X,P,k,L,Z,q),Fe=new q.Reply(A,H,Z);c===!1&&Z.info({req:H},"incoming request"),(o===!0||q.onResponse!==null)&&a(Fe),q.onRequest!==null?L$(q.onRequest,rm,H,Fe,D$):D$(null,H,Fe),q.onRequestAbort!==null&&k.on("close",()=>{k.aborted&&H3(q.onRequestAbort,rm,H,m9.bind(null,Fe))}),q.onTimeout!==null&&(H.raw.socket._meta||H.raw.socket.on("timeout",y9),H.raw.socket._meta={context:q,request:H,reply:Fe})}}function m9(e,t){t&&e.log.error({err:t},"onRequestAborted hook failed")}function y9(){let{context:e,request:t,reply:r}=this._meta;L$(e.onTimeout,rm,t,r,v9)}function j$(e,t,r){if(U3.indexOf(e)===-1)throw new s9(e);if((e==="GET"||e==="HEAD")&&r&&r.body)throw new i9(e,t)}function x$(e){if(e!==void 0&&(!Number.isInteger(e)||e<=0))throw new o9(e)}function D$(e,t,r){if(r.sent!==!0){if(e!=null){r[c9]=!0,r.send(e);return}t[ll]=t.raw,t[q$].preParsing!==null?g9(t[q$].preParsing,t,r,T$):T$(null,t,r)}}function g9(e,t,r,n){let s=0;function i(l,u){if(r.sent)return;if(typeof u<"u"&&(t[ll]=u),l||s===e.length){n(l,t,r);return}let c=e[s++],f;try{f=c(t,r,t[ll],i)}catch(h){i(h);return}f&&typeof f.then=="function"&&f.then(o,a)}function o(l){i(null,l)}function a(l){l||(l=new e9),i(l)}i(null,t[ll])}function _9(){this.keepAliveConnections.delete(this.socket)}function v9(){}F$.exports={buildRouting:p9,validateBodyLimitOption:x$}});var G$=v((HK,B$)=>{"use strict";var E9=Wp(),V$=vu(),z$=ju(),S9=Xp(),{kRoutePrefix:b9,kCanSetNotFoundHandler:Mo,kFourOhFourLevelInstance:cl,kFourOhFourContext:Yr,kHooks:w9,kErrorHandler:H$}=at(),{lifecycleHooks:R9}=kn(),{buildErrorHandler:U$}=so(),T9={config:{},onSend:[],onError:[],errorHandler:U$()},{FST_ERR_NOT_FOUND:$9}=gt();function P9(e){let{logger:t,genReqId:r}=e,n=E9({onBadUrl:a(),defaultRoute:f}),s=null;return{router:n,setNotFoundHandler:u,setContext:l,arrange404:i};function i(h){h[cl]=h,h[Mo]=!0,n.onBadUrl=n.onBadUrl.bind(h)}function o(h,d){let{url:m,method:y}=h.raw,S=`Route ${y}:${m} not found`;h.log.info(S),d.code(404).send({message:S,error:"Not Found",statusCode:404})}function a(){return function(d,m,y){let S=r(m),_=t.child({reqId:S}),b=this[cl][Yr],g=new z$(S,null,m,null,_,b),p=new V$(y,g,_);s(g,p)}}function l(h,d){let m=Object.assign({},h[Yr]);m.onSend=d.onSend,d[Yr]=m}function u(h,d,m,y){this[Mo]===void 0&&(this[Mo]=!0),this[Yr]===void 0&&(this[Yr]=null);let S=this,_=this[b9]||"/";if(this[Mo]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${_}'`);typeof h=="object"&&(h.preHandler&&(Array.isArray(h.preHandler)?h.preHandler=h.preHandler.map(b=>b.bind(S)):h.preHandler=h.preHandler.bind(S)),h.preValidation&&(Array.isArray(h.preValidation)?h.preValidation=h.preValidation.map(b=>b.bind(S)):h.preValidation=h.preValidation.bind(S))),typeof h=="function"&&(d=h,h=void 0),h=h||{},d?(this[cl][Mo]=!1,d=d.bind(this),s=d):(d=o,s=o),this.after((b,g)=>{c.call(this,_,h,d,m,y),g(b)})}function c(h,d,m,y,S){let _=new S9({schema:d.schema,handler:m,config:d.config||{},server:this});if(y.once("preReady",()=>{let b=this[Yr];for(let g of R9){let p=this[w9][g].concat(d[g]||[]).map(T=>T.bind(this));b[g]=p.length?p:null}b.errorHandler=d.errorHandler?U$(this[H$],d.errorHandler):this[H$]}),this[Yr]!==null&&h==="/"){Object.assign(this[Yr],_);return}this[cl][Yr]=_,n.all(h+(h.endsWith("/")?"*":"/*"),S,_),n.all(h,S,_)}function f(h,d){let m=r(h),y=t.child({reqId:m});y.info({req:h},"incoming request");let S=new z$(m,null,h,null,y,T9),_=new V$(d,S,y);S.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),S.log.warn(n.prettyPrint()),_.code(404).send(new $9)}}B$.exports=P9});var J$=v((UK,fl)=>{"use strict";fl.exports=we;fl.exports.default=we;var K$={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},jsonShorthand:{type:"boolean",default:!0},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{enum:[!1]},{type:"string"}],default:"request-id"},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},versioning:{type:"object",additionalProperties:!0,required:["storage","deriveVersion"],properties:{storage:{},deriveVersion:{}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},O9=Object.prototype.hasOwnProperty,I9=new RegExp("idle","u");function we(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){e.connectionTimeout===void 0&&(e.connectionTimeout=0),e.keepAliveTimeout===void 0&&(e.keepAliveTimeout=72e3),e.maxRequestsPerSocket===void 0&&(e.maxRequestsPerSocket=0),e.requestTimeout===void 0&&(e.requestTimeout=0),e.bodyLimit===void 0&&(e.bodyLimit=1048576),e.caseSensitive===void 0&&(e.caseSensitive=!0),e.allowUnsafeRegex===void 0&&(e.allowUnsafeRegex=!1),e.ignoreTrailingSlash===void 0&&(e.ignoreTrailingSlash=!1),e.ignoreDuplicateSlashes===void 0&&(e.ignoreDuplicateSlashes=!1),e.disableRequestLogging===void 0&&(e.disableRequestLogging=!1),e.jsonShorthand===void 0&&(e.jsonShorthand=!0),e.maxParamLength===void 0&&(e.maxParamLength=100),e.onProtoPoisoning===void 0&&(e.onProtoPoisoning="error"),e.onConstructorPoisoning===void 0&&(e.onConstructorPoisoning="error"),e.pluginTimeout===void 0&&(e.pluginTimeout=1e4),e.requestIdHeader===void 0&&(e.requestIdHeader="request-id"),e.requestIdLogLabel===void 0&&(e.requestIdLogLabel="reqId"),e.http2SessionTimeout===void 0&&(e.http2SessionTimeout=72e3),e.exposeHeadRoutes===void 0&&(e.exposeHeadRoutes=!0);let m=o;for(let y in e)O9.call(K$.properties,y)||delete e[y];if(m===o){let y=e.connectionTimeout,S=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))){let _=typeof y,b;if(b===void 0)if(_==="boolean"||y===null||_==="string"&&y&&y==+y&&!(y%1))b=+y;else return we.errors=[{instancePath:t+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;b!==void 0&&(y=b,e!==void 0&&(e.connectionTimeout=b))}var a=S===o;if(a){let _=e.keepAliveTimeout,b=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_))){let p=typeof _,T;if(T===void 0)if(p==="boolean"||_===null||p==="string"&&_&&_==+_&&!(_%1))T=+_;else return we.errors=[{instancePath:t+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;T!==void 0&&(_=T,e!==void 0&&(e.keepAliveTimeout=T))}var a=b===o;if(a){if(e.forceCloseConnections!==void 0){let p=e.forceCloseConnections,T=o,O=o,w=!1,I=null,k=o;if(typeof p!="string"){let q=typeof p,L;if(L===void 0)if(q=="number"||q=="boolean")L=""+p;else if(p===null)L="";else{let X={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[X]:i.push(X),o++}L!==void 0&&(p=L,e!==void 0&&(e.forceCloseConnections=L))}if(o===k&&typeof p=="string"&&!I9.test(p)){let q={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};i===null?i=[q]:i.push(q),o++}var l=k===o;l&&(w=!0,I=0);let A=o;if(typeof p!="boolean"){let q;if(q===void 0)if(p==="false"||p===0||p===null)q=!1;else if(p==="true"||p===1)q=!0;else{let L={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[L]:i.push(L),o++}q!==void 0&&(p=q,e!==void 0&&(e.forceCloseConnections=q))}var l=A===o;if(l&&w?(w=!1,I=[I,1]):l&&(w=!0,I=1),w)o=O,i!==null&&(O?i.length=O:i=null);else{let q={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:I},message:"must match exactly one schema in oneOf"};return i===null?i=[q]:i.push(q),o++,we.errors=i,!1}var a=T===o}else var a=!0;if(a){let p=e.maxRequestsPerSocket,T=o;if(!(typeof p=="number"&&!(p%1)&&!isNaN(p)&&isFinite(p))&&p!==null){let w=typeof p,I;if(I===void 0)if(w==="boolean"||p===null||w==="string"&&p&&p==+p&&!(p%1))I=+p;else if(p===""||p===0||p===!1)I=null;else return we.errors=[{instancePath:t+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;I!==void 0&&(p=I,e!==void 0&&(e.maxRequestsPerSocket=I))}var a=T===o;if(a){let w=e.requestTimeout,I=o;if(!(typeof w=="number"&&!(w%1)&&!isNaN(w)&&isFinite(w))){let A=typeof w,P;if(P===void 0)if(A==="boolean"||w===null||A==="string"&&w&&w==+w&&!(w%1))P=+w;else return we.errors=[{instancePath:t+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;P!==void 0&&(w=P,e!==void 0&&(e.requestTimeout=P))}var a=I===o;if(a){let A=e.bodyLimit,P=o;if(!(typeof A=="number"&&!(A%1)&&!isNaN(A)&&isFinite(A))){let L=typeof A,X;if(X===void 0)if(L==="boolean"||A===null||L==="string"&&A&&A==+A&&!(A%1))X=+A;else return we.errors=[{instancePath:t+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;X!==void 0&&(A=X,e!==void 0&&(e.bodyLimit=X))}var a=P===o;if(a){let L=e.caseSensitive,X=o;if(typeof L!="boolean"){let V;if(V===void 0)if(L==="false"||L===0||L===null)V=!1;else if(L==="true"||L===1)V=!0;else return we.errors=[{instancePath:t+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;V!==void 0&&(L=V,e!==void 0&&(e.caseSensitive=V))}var a=X===o;if(a){let V=e.allowUnsafeRegex,Z=o;if(typeof V!="boolean"){let H;if(H===void 0)if(V==="false"||V===0||V===null)H=!1;else if(V==="true"||V===1)H=!0;else return we.errors=[{instancePath:t+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;H!==void 0&&(V=H,e!==void 0&&(e.allowUnsafeRegex=H))}var a=Z===o;if(a){if(e.http2!==void 0){let H=e.http2,Fe=o;if(typeof H!="boolean"){let _e;if(_e===void 0)if(H==="false"||H===0||H===null)_e=!1;else if(H==="true"||H===1)_e=!0;else return we.errors=[{instancePath:t+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;_e!==void 0&&(H=_e,e!==void 0&&(e.http2=_e))}var a=Fe===o}else var a=!0;if(a){if(e.https!==void 0){let H=e.https,Fe=o,St=o,_e=!0,jt=o,ct=o,me=o,te=o,We=!1,ve=null,j=o;if(typeof H!="boolean"){let z;if(z===void 0)if(H==="false"||H===0||H===null)z=!1;else if(H==="true"||H===1)z=!0;else{let Ee={};i===null?i=[Ee]:i.push(Ee),o++}z!==void 0&&(H=z,e!==void 0&&(e.https=z))}var u=j===o;u&&(We=!0,ve=0);let x=o;if(H!==null){let z;if(z===void 0)if(H===""||H===0||H===!1)z=null;else{let Ee={};i===null?i=[Ee]:i.push(Ee),o++}z!==void 0&&(H=z,e!==void 0&&(e.https=z))}var u=x===o;if(u&&We)We=!1,ve=[ve,1];else{u&&(We=!0,ve=1);let z=o;if(o===z)if(H&&typeof H=="object"&&!Array.isArray(H)){let J;if(H.allowHTTP1===void 0&&(J="allowHTTP1")){let Oe={};i===null?i=[Oe]:i.push(Oe),o++}else{let Oe=o;for(let Be in H)Be!=="allowHTTP1"&&delete H[Be];if(Oe===o&&H.allowHTTP1!==void 0){let Be=H.allowHTTP1;if(typeof Be!="boolean"){let Ie;if(Ie===void 0)if(Be==="false"||Be===0||Be===null)Ie=!1;else if(Be==="true"||Be===1)Ie=!0;else{let nt={};i===null?i=[nt]:i.push(nt),o++}Ie!==void 0&&(Be=Ie,H!==void 0&&(H.allowHTTP1=Ie))}}}}else{let J={};i===null?i=[J]:i.push(J),o++}var u=z===o;u&&We?(We=!1,ve=[ve,2]):u&&(We=!0,ve=2)}if(We)o=te,i!==null&&(te?i.length=te:i=null);else{let z={};i===null?i=[z]:i.push(z),o++}var c=me===o;if(c){let z={};i===null?i=[z]:i.push(z),o++}else o=ct,i!==null&&(ct?i.length=ct:i=null);var f=jt===o;if(o=St,i!==null&&(St?i.length=St:i=null),f){let z=o;e.https=!0;var f=z===o;_e=f}if(!_e){let z={instancePath:t+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return i===null?i=[z]:i.push(z),o++,we.errors=i,!1}var a=Fe===o}else var a=!0;if(a){let H=e.ignoreTrailingSlash,Fe=o;if(typeof H!="boolean"){let _e;if(_e===void 0)if(H==="false"||H===0||H===null)_e=!1;else if(H==="true"||H===1)_e=!0;else return we.errors=[{instancePath:t+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;_e!==void 0&&(H=_e,e!==void 0&&(e.ignoreTrailingSlash=_e))}var a=Fe===o;if(a){let _e=e.ignoreDuplicateSlashes,jt=o;if(typeof _e!="boolean"){let me;if(me===void 0)if(_e==="false"||_e===0||_e===null)me=!1;else if(_e==="true"||_e===1)me=!0;else return we.errors=[{instancePath:t+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;me!==void 0&&(_e=me,e!==void 0&&(e.ignoreDuplicateSlashes=me))}var a=jt===o;if(a){let me=e.disableRequestLogging,te=o;if(typeof me!="boolean"){let ve;if(ve===void 0)if(me==="false"||me===0||me===null)ve=!1;else if(me==="true"||me===1)ve=!0;else return we.errors=[{instancePath:t+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ve!==void 0&&(me=ve,e!==void 0&&(e.disableRequestLogging=ve))}var a=te===o;if(a){let ve=e.jsonShorthand,j=o;if(typeof ve!="boolean"){let M;if(M===void 0)if(ve==="false"||ve===0||ve===null)M=!1;else if(ve==="true"||ve===1)M=!0;else return we.errors=[{instancePath:t+"/jsonShorthand",schemaPath:"#/properties/jsonShorthand/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;M!==void 0&&(ve=M,e!==void 0&&(e.jsonShorthand=M))}var a=j===o;if(a){let M=e.maxParamLength,z=o;if(!(typeof M=="number"&&!(M%1)&&!isNaN(M)&&isFinite(M))){let J=typeof M,Oe;if(Oe===void 0)if(J==="boolean"||M===null||J==="string"&&M&&M==+M&&!(M%1))Oe=+M;else return we.errors=[{instancePath:t+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Oe!==void 0&&(M=Oe,e!==void 0&&(e.maxParamLength=Oe))}var a=z===o;if(a){let J=e.onProtoPoisoning,Oe=o;if(typeof J!="string"){let Ie=typeof J,nt;if(nt===void 0)if(Ie=="number"||Ie=="boolean")nt=""+J;else if(J===null)nt="";else return we.errors=[{instancePath:t+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;nt!==void 0&&(J=nt,e!==void 0&&(e.onProtoPoisoning=nt))}var a=Oe===o;if(a){let Ie=e.onConstructorPoisoning,nt=o;if(typeof Ie!="string"){let Ge=typeof Ie,rt;if(rt===void 0)if(Ge=="number"||Ge=="boolean")rt=""+Ie;else if(Ie===null)rt="";else return we.errors=[{instancePath:t+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;rt!==void 0&&(Ie=rt,e!==void 0&&(e.onConstructorPoisoning=rt))}var a=nt===o;if(a){let Ge=e.pluginTimeout,rt=o;if(!(typeof Ge=="number"&&!(Ge%1)&&!isNaN(Ge)&&isFinite(Ge))){let ir=typeof Ge,Ir;if(Ir===void 0)if(ir==="boolean"||Ge===null||ir==="string"&&Ge&&Ge==+Ge&&!(Ge%1))Ir=+Ge;else return we.errors=[{instancePath:t+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Ir!==void 0&&(Ge=Ir,e!==void 0&&(e.pluginTimeout=Ir))}var a=rt===o;if(a){let ir=e.requestIdHeader,Ir=o,yi=o,Wr=!1,or=o;if(ir!==!1){let yt={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/enum",keyword:"enum",params:{allowedValues:K$.properties.requestIdHeader.anyOf[0].enum},message:"must be equal to one of the allowed values"};i===null?i=[yt]:i.push(yt),o++}var h=or===o;if(Wr=Wr||h,!Wr){let yt=o;if(typeof ir!="string"){let Xr=typeof ir,je;if(je===void 0)if(Xr=="number"||Xr=="boolean")je=""+ir;else if(ir===null)je="";else{let Dt={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Dt]:i.push(Dt),o++}je!==void 0&&(ir=je,e!==void 0&&(e.requestIdHeader=je))}var h=yt===o;Wr=Wr||h}if(Wr)o=yi,i!==null&&(yi?i.length=yi:i=null);else{let yt={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[yt]:i.push(yt),o++,we.errors=i,!1}var a=Ir===o;if(a){let yt=e.requestIdLogLabel,Wo=o;if(typeof yt!="string"){let je=typeof yt,Dt;if(Dt===void 0)if(je=="number"||je=="boolean")Dt=""+yt;else if(yt===null)Dt="";else return we.errors=[{instancePath:t+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Dt!==void 0&&(yt=Dt,e!==void 0&&(e.requestIdLogLabel=Dt))}var a=Wo===o;if(a){let je=e.http2SessionTimeout,Dt=o;if(!(typeof je=="number"&&!(je%1)&&!isNaN(je)&&isFinite(je))){let Lt=typeof je,st;if(st===void 0)if(Lt==="boolean"||je===null||Lt==="string"&&je&&je==+je&&!(je%1))st=+je;else return we.errors=[{instancePath:t+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;st!==void 0&&(je=st,e!==void 0&&(e.http2SessionTimeout=st))}var a=Dt===o;if(a){let Lt=e.exposeHeadRoutes,st=o;if(typeof Lt!="boolean"){let Xe;if(Xe===void 0)if(Lt==="false"||Lt===0||Lt===null)Xe=!1;else if(Lt==="true"||Lt===1)Xe=!0;else return we.errors=[{instancePath:t+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Xe!==void 0&&(Lt=Xe,e!==void 0&&(e.exposeHeadRoutes=Xe))}var a=st===o;if(a){if(e.versioning!==void 0){let Xe=e.versioning,Pn=o;if(o===Pn)if(Xe&&typeof Xe=="object"&&!Array.isArray(Xe)){let ar;if(Xe.storage===void 0&&(ar="storage")||Xe.deriveVersion===void 0&&(ar="deriveVersion"))return we.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/required",keyword:"required",params:{missingProperty:ar},message:"must have required property '"+ar+"'"}],!1}else return we.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=Pn===o}else var a=!0;if(a)if(e.constraints!==void 0){let Xe=e.constraints,Pn=o;if(o===Pn)if(Xe&&typeof Xe=="object"&&!Array.isArray(Xe))for(let ar in Xe){let xt=Xe[ar],Ar=o;if(o===Ar)if(xt&&typeof xt=="object"&&!Array.isArray(xt)){let Qr;if(xt.name===void 0&&(Qr="name")||xt.storage===void 0&&(Qr="storage")||xt.validate===void 0&&(Qr="validate")||xt.deriveConstraint===void 0&&(Qr="deriveConstraint"))return we.errors=[{instancePath:t+"/constraints/"+ar.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:Qr},message:"must have required property '"+Qr+"'"}],!1;if(xt.name!==void 0){let Zr=xt.name;if(typeof Zr!="string"){let Xo=typeof Zr,gr;if(gr===void 0)if(Xo=="number"||Xo=="boolean")gr=""+Zr;else if(Zr===null)gr="";else return we.errors=[{instancePath:t+"/constraints/"+ar.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;gr!==void 0&&(Zr=gr,xt!==void 0&&(xt.name=gr))}}}else return we.errors=[{instancePath:t+"/constraints/"+ar.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=Ar===o;if(!d)break}else return we.errors=[{instancePath:t+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=Pn===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}else return we.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return we.errors=i,o===0}fl.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,jsonShorthand:!0,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:"request-id",requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0}});var Y$=v((BK,hl)=>{"use strict";var dl=J$(),A9=Ti()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:C9}=gt();function N9(e){let t=A9(e);if(!dl(t)){let r=new C9(JSON.stringify(dl.errors.map(n=>n.message)));throw r.errors=dl.errors,r}return nm(t)}function nm(e){let t=Object.getOwnPropertyNames(e);for(let r of t){let n=e[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(e[r]=n&&typeof n=="object"?nm(n):n)}return Object.freeze(e)}hl.exports=N9;hl.exports.defaultInitOptions=dl.defaultInitOptions;hl.exports.utils={deepFreezeObject:nm}});var sP=v((GK,nP)=>{"use strict";var{kAvvioBoot:k9,kChildren:W$,kRoutePrefix:X$,kLogLevel:Q$,kLogSerializers:sm,kHooks:im,kSchemaController:di,kContentTypeParser:Z$,kReply:eP,kRequest:tP,kFourOhFour:q9,kPluginNameChain:rP}=at(),j9=vu(),D9=ju(),L9=Ip(),x9=xh(),{buildHooks:F9}=kn(),hi=jp();nP.exports=function(t,r,n){if(hi.registerPlugin.call(t,r))return t[rP].push(hi.getDisplayName(r)),t;let i=Object.create(t);t[W$].push(i),i.ready=t[k9].bind(i),i[W$]=[],i[eP]=j9.buildReply(i[eP]),i[tP]=D9.buildRequest(i[tP]),i[Z$]=x9.helpers.buildContentTypeParser(i[Z$]),i[im]=F9(i[im]),i[X$]=M9(i[X$],n.prefix),i[Q$]=n.logLevel||i[Q$],i[di]=L9.buildSchemaController(t[di]),i.getSchema=i[di].getSchema.bind(i[di]),i.getSchemas=i[di].getSchemas.bind(i[di]),i[hi.registeredPlugins]=Object.create(i[hi.registeredPlugins]),i[rP]=[hi.getPluginName(r)||hi.getFuncPreview(r)],(i[sm]||n.logSerializers)&&(i[sm]=Object.assign(Object.create(i[sm]),n.logSerializers)),n.prefix&&i[q9].arrange404(i);for(let o of i[im].onRegister)o.call(this,i,n);return i};function M9(e,t){return t?(e.endsWith("/")&&t[0]==="/"?t=t.slice(1):t[0]!=="/"&&(t="/"+t),e+t):e}});var oP=v((KK,iP)=>{"use strict";iP.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var aP=v(om=>{"use strict";om.parse=z9;om.serialize=H9;var V9=Object.prototype.toString,pl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function z9(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},s=n.decode||U9,i=0;i<e.length;){var o=e.indexOf("=",i);if(o===-1)break;var a=e.indexOf(";",i);if(a===-1)a=e.length;else if(a<o){i=e.lastIndexOf(";",o-1)+1;continue}var l=e.slice(i,o).trim();if(r[l]===void 0){var u=e.slice(o+1,a).trim();u.charCodeAt(0)===34&&(u=u.slice(1,-1)),r[l]=K9(u,s)}i=a+1}return r}function H9(e,t,r){var n=r||{},s=n.encode||B9;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!pl.test(e))throw new TypeError("argument name is invalid");var i=s(t);if(i&&!pl.test(i))throw new TypeError("argument val is invalid");var o=e+"="+i;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!pl.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!pl.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var l=n.expires;if(!G9(l)||isNaN(l.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+l.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority){var u=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(u){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var c=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(c){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function U9(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function B9(e){return encodeURIComponent(e)}function G9(e){return V9.call(e)==="[object Date]"||e instanceof Date}function K9(e,t){try{return t(e)}catch{return e}}});var cP=v((YK,lP)=>{"use strict";var{URL:uP}=require("url"),am="http://localhost";lP.exports=function(t,r){(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]")&&t.startsWith("//")&&(t=am+t);let n=typeof t=="object"?Object.assign(new uP(am),t):new uP(t,am);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){n.searchParams.delete(s);for(let i of r.getAll(s))n.searchParams.append(s,i)}}else{let s=Object.assign({},t.query,r);for(let i in s){let o=s[i];if(Array.isArray(o)){n.searchParams.delete(i);for(let a of o)n.searchParams.append(i,a)}else n.searchParams.set(i,o)}}return n}});var pP=v((WK,ml)=>{"use strict";var{Readable:fP,addAbortSignal:J9}=require("stream"),lm=require("util"),Y9=aP(),W9=require("assert"),dP=Ul()(),X9=cP(),{EventEmitter:Q9}=require("events");dP.create("FastifyDeprecationLightMyRequest","FST_LIGHTMYREQUEST_DEP01",'You are accessing "request.connection", use "request.socket" instead.');function Z9(e){return e.port?e.host:e.hostname+(e.protocol==="https:"?":443":":80")}var um=class extends Q9{constructor(t){super(),this.remoteAddress=t}};function hP(e){return new t(this);function t(r){Or.call(r,{...e,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(Or.prototype))this.constructor.prototype[n]=Or.prototype[n];return lm.inherits(this.constructor,e.Request),this}}function Or(e){fP.call(this,{autoDestroy:!1});let t=X9(e.url||e.path,e.query);this.url=t.pathname+t.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=e.method?e.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=e.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let l=r[o];W9(l!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+l}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||e.authority||Z9(t),e.cookies){let{cookies:o}=e,a=Object.keys(o).map(l=>Y9.serialize(l,o[l]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new um(e.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return dP.emit("FST_LIGHTMYREQUEST_DEP01"),this.socket},configurable:!0});let n=e.payload||e.body||null,s=n&&typeof n.resume=="function";n&&typeof n!="string"&&!s&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!s&&!Object.prototype.hasOwnProperty.call(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:e.simulate||{}};let i=e.signal;return i&&J9(i,this),this}lm.inherits(Or,fP);lm.inherits(hP,Or);Or.prototype.prepare=function(e){let t=this._lightMyRequest.payload;if(!t||typeof t.resume!="function")return e();let r=[];t.on("data",n=>r.push(Buffer.from(n))),t.on("end",()=>{let n=Buffer.concat(r);return this.headers["content-length"]=this.headers["content-length"]||""+n.length,this._lightMyRequest.payload=n,e()}),t.resume()};Or.prototype._read=function(e){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})};Or.prototype.destroy=function(e){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,e&&(this._error=!0,process.nextTick(()=>this.emit("error",e))),process.nextTick(()=>this.emit("close")))};ml.exports=Or;ml.exports.Request=Or;ml.exports.CustomRequest=hP});var yP=v((XK,Vo)=>{"use strict";var pi={decodeValues:!0,map:!1,silent:!1};function cm(e){return typeof e=="string"&&!!e.trim()}function fm(e,t){var r=e.split(";").filter(cm),n=r.shift(),s=e5(n),i=s.name,o=s.value;t=t?Object.assign({},pi,t):pi;try{o=t.decodeValues?decodeURIComponent(o):o}catch(l){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",l)}var a={name:i,value:o};return r.forEach(function(l){var u=l.split("="),c=u.shift().trimLeft().toLowerCase(),f=u.join("=");c==="expires"?a.expires=new Date(f):c==="max-age"?a.maxAge=parseInt(f,10):c==="secure"?a.secure=!0:c==="httponly"?a.httpOnly=!0:c==="samesite"?a.sameSite=f:a[c]=f}),a}function e5(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function mP(e,t){if(t=t?Object.assign({},pi,t):pi,!e)return t.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t=t?Object.assign({},pi,t):pi,t.map){var n={};return e.filter(cm).reduce(function(s,i){var o=fm(i,t);return s[o.name]=o,s},n)}else return e.filter(cm).map(function(s){return fm(s,t)})}function t5(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,s,i,o,a;function l(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function u(){return s=e.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<e.length;){for(n=r,a=!1;l();)if(s=e.charAt(r),s===","){for(i=r,r+=1,l(),o=r;r<e.length&&u();)r+=1;r<e.length&&e.charAt(r)==="="?(a=!0,r=o,t.push(e.substring(n,i)),n=r):r=i+1}else r+=1;(!a||r>=e.length)&&t.push(e.substring(n,e.length))}return t}Vo.exports=mP;Vo.exports.parse=mP;Vo.exports.parseString=fm;Vo.exports.splitCookiesString=t5});var vP=v((QK,_P)=>{"use strict";var zo=require("http"),{Writable:r5}=require("stream"),n5=require("util"),s5=yP();function Rn(e,t,r){zo.ServerResponse.call(this,e),this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]},this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(o5()),this._promiseCallback=typeof r=="function";let n=!1,s=o=>{if(n=!0,this._promiseCallback)return process.nextTick(()=>t(o));process.nextTick(()=>t(null,o))},i=o=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>r(o));process.nextTick(()=>t(o,null))}};this.once("finish",()=>{let o=i5(this);o.raw.req=e,s(o)}),this.connection.once("error",i),this.once("error",i),this.once("close",i)}n5.inherits(Rn,zo.ServerResponse);Rn.prototype.setTimeout=function(e,t){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},e),this.on("timeout",t),this};Rn.prototype.writeHead=function(){let e=zo.ServerResponse.prototype.writeHead.apply(this,arguments);return gP(this),e};Rn.prototype.write=function(e,t,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),zo.ServerResponse.prototype.write.call(this,e,t,r),this._lightMyRequest.payloadChunks.push(Buffer.from(e,t)),!0};Rn.prototype.end=function(e,t,r){e&&this.write(e,t),zo.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};Rn.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&process.nextTick(()=>this.emit("error",e)),process.nextTick(()=>this.emit("close")))};Rn.prototype.addTrailers=function(e){for(let t in e)this._lightMyRequest.trailers[t.toLowerCase().trim()]=e[t].toString().trim()};function i5(e){e._lightMyRequest.headers===null&&gP(e);let t={raw:{res:e},headers:e._lightMyRequest.headers,statusCode:e.statusCode,statusMessage:e.statusMessage,trailers:{},get cookies(){return s5.parse(this)}},r=Buffer.concat(e._lightMyRequest.payloadChunks);return t.rawPayload=r,t.payload=r.toString(),t.body=t.payload,t.trailers=e._lightMyRequest.trailers,t.json=function(){return JSON.parse(t.payload)},t}function o5(){return new r5({write(e,t,r){setImmediate(r)}})}function gP(e){e._lightMyRequest.headers=Object.assign({},e.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(t=>{let r=new RegExp("\\r\\n"+t+": ([^\\r]*)\\r\\n"),n=e._header.match(r);n&&(e._lightMyRequest.headers[t.toLowerCase()]=n[1])})}_P.exports=Rn});var EP=v((ZK,dm)=>{"use strict";dm.exports=tt;dm.exports.default=tt;var a5={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function tt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0,a=o,l=!1,u=null,c=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let p;if(e.url===void 0&&(p="url")){let T={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"};i===null?i=[T]:i.push(T),o++}}var h=c===o;h&&(l=!0,u=0);let f=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let p;if(e.path===void 0&&(p="path")){let T={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"};i===null?i=[T]:i.push(T),o++}}var h=f===o;if(h&&l?(l=!1,u=[u,1]):h&&(l=!0,u=1),l)o=a,i!==null&&(a?i.length=a:i=null);else{let p={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return i===null?i=[p]:i.push(p),o++,tt.errors=i,!1}if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.url!==void 0){let p=e.url,T=o,O=o,w=!1,I=null,k=o;if(typeof p!="string"){let P=typeof p,q;if(q===void 0)if(P=="number"||P=="boolean")q=""+p;else if(p===null)q="";else{let L={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[L]:i.push(L),o++}q!==void 0&&(p=q,e!==void 0&&(e.url=q))}var m=k===o;m&&(w=!0,I=0);let A=o;if(o===A)if(p&&typeof p=="object"&&!Array.isArray(p)){let P;if(p.pathname===void 0&&(P="pathname")){let q={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:P},message:"must have required property '"+P+"'"};i===null?i=[q]:i.push(q),o++}else{if(p.protocol!==void 0){let q=p.protocol,L=o;if(typeof q!="string"){let X=typeof q,de;if(de===void 0)if(X=="number"||X=="boolean")de=""+q;else if(q===null)de="";else{let V={instancePath:t+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[V]:i.push(V),o++}de!==void 0&&(q=de,p!==void 0&&(p.protocol=de))}var d=L===o}else var d=!0;if(d){if(p.hostname!==void 0){let q=p.hostname,L=o;if(typeof q!="string"){let de=typeof q,V;if(V===void 0)if(de=="number"||de=="boolean")V=""+q;else if(q===null)V="";else{let Z={instancePath:t+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Z]:i.push(Z),o++}V!==void 0&&(q=V,p!==void 0&&(p.hostname=V))}var d=L===o}else var d=!0;if(d)if(p.pathname!==void 0){let q=p.pathname,L=o;if(typeof q!="string"){let de=typeof q,V;if(V===void 0)if(de=="number"||de=="boolean")V=""+q;else if(q===null)V="";else{let Z={instancePath:t+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Z]:i.push(Z),o++}V!==void 0&&(q=V,p!==void 0&&(p.pathname=V))}var d=L===o}else var d=!0}}}else{let P={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[P]:i.push(P),o++}var m=A===o;if(m&&w?(w=!1,I=[I,1]):m&&(w=!0,I=1),w)o=O,i!==null&&(O?i.length=O:i=null);else{let P={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:I},message:"must match exactly one schema in oneOf"};return i===null?i=[P]:i.push(P),o++,tt.errors=i,!1}var y=T===o}else var y=!0;if(y){if(e.path!==void 0){let p=e.path,T=o,O=o,w=!1,I=null,k=o;if(typeof p!="string"){let q=typeof p,L;if(L===void 0)if(q=="number"||q=="boolean")L=""+p;else if(p===null)L="";else{let X={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[X]:i.push(X),o++}L!==void 0&&(p=L,e!==void 0&&(e.path=L))}var _=k===o;_&&(w=!0,I=0);let A=o;if(o===A)if(p&&typeof p=="object"&&!Array.isArray(p)){let q;if(p.pathname===void 0&&(q="pathname")){let L={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:q},message:"must have required property '"+q+"'"};i===null?i=[L]:i.push(L),o++}else{if(p.protocol!==void 0){let L=p.protocol,X=o;if(typeof L!="string"){let de=typeof L,V;if(V===void 0)if(de=="number"||de=="boolean")V=""+L;else if(L===null)V="";else{let Z={instancePath:t+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Z]:i.push(Z),o++}V!==void 0&&(L=V,p!==void 0&&(p.protocol=V))}var S=X===o}else var S=!0;if(S){if(p.hostname!==void 0){let L=p.hostname,X=o;if(typeof L!="string"){let V=typeof L,Z;if(Z===void 0)if(V=="number"||V=="boolean")Z=""+L;else if(L===null)Z="";else{let xe={instancePath:t+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[xe]:i.push(xe),o++}Z!==void 0&&(L=Z,p!==void 0&&(p.hostname=Z))}var S=X===o}else var S=!0;if(S)if(p.pathname!==void 0){let L=p.pathname,X=o;if(typeof L!="string"){let V=typeof L,Z;if(Z===void 0)if(V=="number"||V=="boolean")Z=""+L;else if(L===null)Z="";else{let xe={instancePath:t+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[xe]:i.push(xe),o++}Z!==void 0&&(L=Z,p!==void 0&&(p.pathname=Z))}var S=X===o}else var S=!0}}}else{let q={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[q]:i.push(q),o++}var _=A===o;if(_&&w?(w=!1,I=[I,1]):_&&(w=!0,I=1),w)o=O,i!==null&&(O?i.length=O:i=null);else{let q={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:I},message:"must match exactly one schema in oneOf"};return i===null?i=[q]:i.push(q),o++,tt.errors=i,!1}var y=T===o}else var y=!0;if(y){if(e.cookies!==void 0){let p=e.cookies,T=o;if(o===T&&!(p&&typeof p=="object"&&!Array.isArray(p)))return tt.errors=[{instancePath:t+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=T===o}else var y=!0;if(y){if(e.headers!==void 0){let p=e.headers,T=o;if(o===T&&!(p&&typeof p=="object"&&!Array.isArray(p)))return tt.errors=[{instancePath:t+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=T===o}else var y=!0;if(y){if(e.query!==void 0){let p=e.query,T=o,O=o,w=!1,I=o;if(o===I&&!(p&&typeof p=="object"&&!Array.isArray(p))){let A={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[A]:i.push(A),o++}var b=I===o;if(w=w||b,!w){let A=o;if(typeof p!="string"){let q=typeof p,L;if(L===void 0)if(q=="number"||q=="boolean")L=""+p;else if(p===null)L="";else{let X={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[X]:i.push(X),o++}L!==void 0&&(p=L,e!==void 0&&(e.query=L))}var b=A===o;w=w||b}if(w)o=O,i!==null&&(O?i.length=O:i=null);else{let A={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[A]:i.push(A),o++,tt.errors=i,!1}var y=T===o}else var y=!0;if(y){if(e.simulate!==void 0){let p=e.simulate,T=o;if(o===T)if(p&&typeof p=="object"&&!Array.isArray(p)){if(p.end!==void 0){let w=p.end,I=o;if(typeof w!="boolean"){let k;if(k===void 0)if(w==="false"||w===0||w===null)k=!1;else if(w==="true"||w===1)k=!0;else return tt.errors=[{instancePath:t+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;k!==void 0&&(w=k,p!==void 0&&(p.end=k))}var g=I===o}else var g=!0;if(g){if(p.split!==void 0){let w=p.split,I=o;if(typeof w!="boolean"){let A;if(A===void 0)if(w==="false"||w===0||w===null)A=!1;else if(w==="true"||w===1)A=!0;else return tt.errors=[{instancePath:t+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;A!==void 0&&(w=A,p!==void 0&&(p.split=A))}var g=I===o}else var g=!0;if(g){if(p.error!==void 0){let w=p.error,I=o;if(typeof w!="boolean"){let A;if(A===void 0)if(w==="false"||w===0||w===null)A=!1;else if(w==="true"||w===1)A=!0;else return tt.errors=[{instancePath:t+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;A!==void 0&&(w=A,p!==void 0&&(p.error=A))}var g=I===o}else var g=!0;if(g)if(p.close!==void 0){let w=p.close,I=o;if(typeof w!="boolean"){let A;if(A===void 0)if(w==="false"||w===0||w===null)A=!1;else if(w==="true"||w===1)A=!0;else return tt.errors=[{instancePath:t+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;A!==void 0&&(w=A,p!==void 0&&(p.close=A))}var g=I===o}else var g=!0}}}else return tt.errors=[{instancePath:t+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=T===o}else var y=!0;if(y){if(e.authority!==void 0){let p=e.authority,T=o;if(typeof p!="string"){let w=typeof p,I;if(I===void 0)if(w=="number"||w=="boolean")I=""+p;else if(p===null)I="";else return tt.errors=[{instancePath:t+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;I!==void 0&&(p=I,e!==void 0&&(e.authority=I))}var y=T===o}else var y=!0;if(y){if(e.remoteAddress!==void 0){let p=e.remoteAddress,T=o;if(typeof p!="string"){let w=typeof p,I;if(I===void 0)if(w=="number"||w=="boolean")I=""+p;else if(p===null)I="";else return tt.errors=[{instancePath:t+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;I!==void 0&&(p=I,e!==void 0&&(e.remoteAddress=I))}var y=T===o}else var y=!0;if(y){if(e.method!==void 0){let p=e.method,T=o;if(typeof p!="string"){let w=typeof p,I;if(I===void 0)if(w=="number"||w=="boolean")I=""+p;else if(p===null)I="";else return tt.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;I!==void 0&&(p=I,e!==void 0&&(e.method=I))}if(!(p==="ACL"||p==="BIND"||p==="CHECKOUT"||p==="CONNECT"||p==="COPY"||p==="DELETE"||p==="GET"||p==="HEAD"||p==="LINK"||p==="LOCK"||p==="M-SEARCH"||p==="MERGE"||p==="MKACTIVITY"||p==="MKCALENDAR"||p==="MKCOL"||p==="MOVE"||p==="NOTIFY"||p==="OPTIONS"||p==="PATCH"||p==="POST"||p==="PROPFIND"||p==="PROPPATCH"||p==="PURGE"||p==="PUT"||p==="REBIND"||p==="REPORT"||p==="SEARCH"||p==="SOURCE"||p==="SUBSCRIBE"||p==="TRACE"||p==="UNBIND"||p==="UNLINK"||p==="UNLOCK"||p==="UNSUBSCRIBE"||p==="acl"||p==="bind"||p==="checkout"||p==="connect"||p==="copy"||p==="delete"||p==="get"||p==="head"||p==="link"||p==="lock"||p==="m-search"||p==="merge"||p==="mkactivity"||p==="mkcalendar"||p==="mkcol"||p==="move"||p==="notify"||p==="options"||p==="patch"||p==="post"||p==="propfind"||p==="proppatch"||p==="purge"||p==="put"||p==="rebind"||p==="report"||p==="search"||p==="source"||p==="subscribe"||p==="trace"||p==="unbind"||p==="unlink"||p==="unlock"||p==="unsubscribe"))return tt.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:a5.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var y=T===o}else var y=!0;if(y)if(e.validate!==void 0){let p=e.validate,T=o;if(typeof p!="boolean"){let w;if(w===void 0)if(p==="false"||p===0||p===null)w=!1;else if(p==="true"||p===1)w=!0;else return tt.errors=[{instancePath:t+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;w!==void 0&&(p=w,e!==void 0&&(e.validate=w))}var y=T===o}else var y=!0}}}}}}}}}else return tt.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return tt.errors=i,o===0}});var wP=v((e7,Uo)=>{"use strict";var u5=require("assert"),hm=pP(),yl=vP(),_l="The dispatch function has already been invoked",SP=EP();function pm(e,t,r){return typeof r>"u"?new Ho(e,t):gl(e,t,r)}function bP(e,t,r,n){return r.once("error",function(s){this.destroyed&&n.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),r.prepare(()=>e.call(t,r,n))}function gl(e,t,r){if(t=typeof t=="string"?{url:t}:t,t.validate!==!1&&(u5(typeof e=="function","dispatchFunc should be a function"),!SP(t)))throw new Error(SP.errors.map(o=>o.message));let n=t.server||{},s=t.Request?hm.CustomRequest:hm;if(e.request&&e.request.app===e&&(Object.setPrototypeOf(Object.getPrototypeOf(e.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(e.response),yl.prototype)),typeof r=="function"){let i=new s(t),o=new yl(i,r);return bP(e,n,i,o)}else return new Promise((i,o)=>{let a=new s(t),l=new yl(a,i,o);bP(e,n,a,l)})}function Ho(e,t){typeof t=="string"?this.option={url:t}:this.option=Object.assign({},t),this.dispatch=e,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var l5=["delete","get","head","options","patch","post","put","trace"];l5.forEach(e=>{Ho.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(_l);return this.option.url=t,this.option.method=e.toUpperCase(),this}});var c5=["body","cookies","headers","payload","query"];c5.forEach(e=>{Ho.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(_l);return this.option[e]=t,this}});Ho.prototype.end=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(_l);if(this._hasInvoked=!0,typeof e=="function")gl(this.dispatch,this.option,e);else return this._promise=gl(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(e=>{e!=="constructor"&&(Ho.prototype[e]=function(...t){if(!this._promise){if(this._hasInvoked===!0)throw new Error(_l);this._hasInvoked=!0,this._promise=gl(this.dispatch,this.option)}return this._promise[e](...t)})});function f5(e){return e instanceof hm||e instanceof yl||e&&e.constructor&&e.constructor.name==="_CustomLMRRequest"}Uo.exports=pm;Uo.exports.default=pm;Uo.exports.inject=pm;Uo.exports.isInjection=f5});var DP=v((t7,bl)=>{"use strict";var d5="4.17.0",h5=Zm(),RP=require("http"),Bo,{kAvvioBoot:Go,kChildren:mm,kServerBindings:TP,kBodyLimit:p5,kRoutePrefix:$P,kLogLevel:m5,kLogSerializers:y5,kHooks:Ko,kSchemaController:Tn,kRequestAcceptVersion:g5,kReplySerializerDefault:PP,kContentTypeParser:_5,kReply:v5,kRequest:E5,kFourOhFour:S5,kState:$n,kOptions:b5,kPluginNameChain:Jo,kSchemaErrorFormatter:ym,kErrorHandler:vl,kKeepAliveConnections:gm,kFourOhFourContext:w5}=at(),{createServer:R5,compileValidateHTTPVersion:T5}=dy(),Yo=vu(),El=ju(),{supportedMethods:$5}=$h(),mi=Ch(),is=xh(),OP=Ip(),{Hooks:P5,hookRunnerApplication:IP,supportedHooks:_m}=kn(),{createLogger:O5}=Xc(),I5=jp(),A5=vT(),{buildRouting:C5,validateBodyLimitOption:N5}=M$(),k5=G$(),jP=Y$(),q5=sP(),j5=en(),D5=oP(),{appendStackTrace:L5,AVVIO_ERRORS_MAP:AP,...os}=gt(),{defaultInitOptions:Bt}=jP,{FST_ERR_ASYNC_CONSTRAINT:x5,FST_ERR_BAD_URL:F5,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:M5,FST_ERR_OPTIONS_NOT_OBJ:V5,FST_ERR_QSP_NOT_FN:z5,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:H5,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:U5,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:B5,FST_ERR_VERSION_CONSTRAINT_NOT_STR:G5,FST_ERR_INSTANCE_ALREADY_LISTENING:K5,FST_ERR_REOPENED_CLOSE_SERVER:J5,FST_ERR_ROUTE_REWRITE_NOT_STR:Y5,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:CP}=os,{buildErrorHandler:NP}=so(),kP={config:{},onSend:[],onError:[],[w5]:null};function W5(e){let t={};return["errorHandler","logLevel","logSerializers"].concat(_m).forEach(n=>{t[n]=e.store[n]}),Object.assign({},t)}function Sl(e){if(e=e||{},typeof e!="object")throw new V5;if(e.querystringParser&&typeof e.querystringParser!="function")throw new z5(typeof e.querystringParser);if(e.schemaController&&e.schemaController.bucket&&typeof e.schemaController.bucket!="function")throw new H5(typeof e.schemaController.bucket);N5(e.bodyLimit);let t=e.requestIdHeader===!1?!1:e.requestIdHeader||Bt.requestIdHeader,r=A5(t,e.genReqId),n=e.requestIdLogLabel||"reqId",s=e.bodyLimit||Bt.bodyLimit,i=e.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},e.ajv),a=e.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new U5(typeof o.customOptions);if(!o.plugins||!Array.isArray(o.plugins))throw new B5(typeof o.plugins);let{logger:l,hasLogger:u}=O5(e);e.connectionTimeout=e.connectionTimeout||Bt.connectionTimeout,e.keepAliveTimeout=e.keepAliveTimeout||Bt.keepAliveTimeout,e.maxRequestsPerSocket=e.maxRequestsPerSocket||Bt.maxRequestsPerSocket,e.requestTimeout=e.requestTimeout||Bt.requestTimeout,e.logger=l,e.genReqId=r,e.requestIdHeader=t,e.requestIdLogLabel=n,e.disableRequestLogging=i,e.ajv=o,e.clientErrorHandler=e.clientErrorHandler||V;let c=jP(e);e.exposeHeadRoutes=c.exposeHeadRoutes;let f=e.constraints;e.versioning&&(j5.emit("FSTDEP009"),f={...f,version:{name:"version",mustMatchWhenDerived:!0,storage:e.versioning.storage,deriveConstraint:e.versioning.deriveVersion,validate(j){if(typeof j!="string")throw new G5}}});let h=C5({config:{defaultRoute:Z,onBadUrl:xe,constraints:f,ignoreTrailingSlash:e.ignoreTrailingSlash||Bt.ignoreTrailingSlash,ignoreDuplicateSlashes:e.ignoreDuplicateSlashes||Bt.ignoreDuplicateSlashes,maxParamLength:e.maxParamLength||Bt.maxParamLength,caseSensitive:e.caseSensitive,allowUnsafeRegex:e.allowUnsafeRegex||Bt.allowUnsafeRegex,buildPrettyMeta:W5,querystringParser:e.querystringParser}}),d=k5(e),m=ve(h,e);e.http2SessionTimeout=c.http2SessionTimeout;let{server:y,listen:S}=R5(e,m),_=typeof y.closeAllConnections=="function",b=typeof y.closeIdleConnections=="function",g=e.forceCloseConnections;if(g==="idle"&&!b)throw new M5;typeof g!="boolean"&&(g=b?"idle":!1);let p=!_&&g===!0?new Set:D5(),T=Yo.setupResponseListeners,O=OP.buildSchemaController(null,e.schemaController),w={[$n]:{listening:!1,closing:!1,started:!1},[gm]:p,[b5]:e,[mm]:[],[TP]:[],[p5]:s,[$P]:"",[m5]:"",[y5]:null,[Ko]:new P5,[Tn]:O,[ym]:null,[vl]:NP(),[PP]:null,[_5]:new is(s,e.onProtoPoisoning||Bt.onProtoPoisoning,e.onConstructorPoisoning||Bt.onConstructorPoisoning),[v5]:Yo.buildReply(Yo),[E5]:El.buildRequest(El,e.trustProxy),[S5]:d,[I5.registeredPlugins]:[],[Jo]:["fastify"],[Go]:null,routing:m,getDefaultRoute:h.getDefaultRoute.bind(h),setDefaultRoute:h.setDefaultRoute.bind(h),delete:function(x,M,z){return h.prepareRoute.call(this,{method:"DELETE",url:x,options:M,handler:z})},get:function(x,M,z){return h.prepareRoute.call(this,{method:"GET",url:x,options:M,handler:z})},head:function(x,M,z){return h.prepareRoute.call(this,{method:"HEAD",url:x,options:M,handler:z})},patch:function(x,M,z){return h.prepareRoute.call(this,{method:"PATCH",url:x,options:M,handler:z})},post:function(x,M,z){return h.prepareRoute.call(this,{method:"POST",url:x,options:M,handler:z})},put:function(x,M,z){return h.prepareRoute.call(this,{method:"PUT",url:x,options:M,handler:z})},options:function(x,M,z){return h.prepareRoute.call(this,{method:"OPTIONS",url:x,options:M,handler:z})},all:function(x,M,z){return h.prepareRoute.call(this,{method:$5,url:x,options:M,handler:z})},route:function(x){return h.route.call(this,{options:x})},hasRoute:function(x){return h.hasRoute.call(this,{options:x})},log:l,withTypeProvider:L,addHook:X,addSchema:de,getSchema:O.getSchema.bind(O),getSchemas:O.getSchemas.bind(O),setValidatorCompiler:St,setSerializerCompiler:jt,setSchemaController:ct,setReplySerializer:me,setSchemaErrorFormatter:_e,addContentTypeParser:is.helpers.addContentTypeParser,hasContentTypeParser:is.helpers.hasContentTypeParser,getDefaultJsonParser:is.defaultParsers.getDefaultJsonParser,defaultTextParser:is.defaultParsers.defaultTextParser,removeContentTypeParser:is.helpers.removeContentTypeParser,removeAllContentTypeParsers:is.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(j){return this[Jo].includes(j)},listen:S,server:y,addresses:function(){let j=this[TP].map(x=>x.address());return j.push(this.server.address()),j.filter(x=>x)},decorate:mi.add,hasDecorator:mi.exist,decorateReply:mi.decorateReply,decorateRequest:mi.decorateRequest,hasRequestDecorator:mi.existRequest,hasReplyDecorator:mi.existReply,inject:P,printRoutes:We,setNotFoundHandler:Fe,setErrorHandler:te,initialConfig:c,addConstraintStrategy:h.addConstraintStrategy.bind(h),hasConstraintStrategy:h.hasConstraintStrategy.bind(h)};Object.defineProperties(w,{pluginName:{configurable:!0,get(){return this[Jo].length>1?this[Jo].join(" -> "):this[Jo][0]}},prefix:{configurable:!0,get(){return this[$P]}},validatorCompiler:{configurable:!0,get(){return this[Tn].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[Tn].getSerializerCompiler()}},version:{configurable:!0,get(){return d5}},errorHandler:{configurable:!0,get(){return this[vl].func}}}),e.schemaErrorFormatter&&(qP(e.schemaErrorFormatter),w[ym]=e.schemaErrorFormatter.bind(w));let I=Number(e.pluginTimeout),k=h5(w,{autostart:!1,timeout:isNaN(I)===!1?I:Bt.pluginTimeout,expose:{use:"register"}});k.override=q5,k.on("start",()=>w[$n].started=!0),w[Go]=w.ready,w.ready=q,w.printPlugins=k.prettyPrint.bind(k),k.once("preReady",()=>{w.onClose((j,x)=>{w[$n].closing=!0,h.closeRoutes(),IP("preClose",w[Go],w,function(){if(w[$n].listening){if(j.server.close(x),g==="idle")j.server.closeIdleConnections();else if(_&&g)j.server.closeAllConnections();else if(g===!0)for(let M of w[gm])M.destroy(),w[gm].delete(M)}else x(null)})})}),w.setNotFoundHandler(),d.arrange404(w),h.setup(e,{avvio:k,fourOhFour:d,logger:l,hasLogger:u,setupResponseListeners:T,throwIfAlreadyStarted:A,validateHTTPVersion:T5(e),keepAliveConnections:p}),y.on("clientError",e.clientErrorHandler.bind(w));try{let x=require("diagnostics_channel").channel("fastify.initialization");x.hasSubscribers&&x.publish({fastify:w})}catch{}return w;function A(j){if(w[$n].started)throw new K5(j)}function P(j,x){if(Bo===void 0&&(Bo=wP()),w[$n].started){if(w[$n].closing){let M=new J5;if(x){x(M);return}else return Promise.reject(M)}return Bo(m,j,x)}if(x)this.ready(M=>{M?x(M,null):Bo(m,j,x)});else return Bo((M,z)=>{this.ready(function(Ee){if(Ee){z.emit("error",Ee);return}m(M,z)})},j)}function q(j){let x,M;if(process.nextTick(z),!j)return new Promise(function(J,Oe){x=J,M=Oe});function z(){w[Go]((J,Oe)=>{J||w[$n].started?Ee(J):IP("onReady",w[Go],w,Ee),Oe()})}function Ee(J){if(J=J!=null&&AP[J.code]!=null?L5(J,new AP[J.code](J.message)):J,j)J?j(J):j(void 0,w);else{if(J)return M(J);x(w)}}}function L(){return this}function X(j,x){if(A('Cannot call "addHook"!'),x==null)throw new os.FST_ERR_HOOK_INVALID_HANDLER(j,x);if(j==="onSend"||j==="preSerialization"||j==="onError"||j==="preParsing"){if(x.constructor.name==="AsyncFunction"&&x.length===4)throw new os.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(j==="onReady"){if(x.constructor.name==="AsyncFunction"&&x.length!==0)throw new os.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(j==="onRequestAbort"){if(x.constructor.name==="AsyncFunction"&&x.length!==1)throw new os.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x.constructor.name==="AsyncFunction"&&x.length===3)throw new os.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return j==="onClose"?this.onClose(x):j==="onReady"?this[Ko].add(j,x):j==="onRoute"?(this[Ko].validate(j,x),this[Ko].add(j,x)):this.after((z,Ee)=>{M.call(this,j,x),Ee(z)}),this;function M(z,Ee){this[Ko].add(z,Ee),this[mm].forEach(J=>M.call(J,z,Ee))}}function de(j){return A('Cannot call "addSchema"!'),this[Tn].add(j),this[mm].forEach(x=>x.addSchema(j)),this}function V(j,x){if(j.code==="ECONNRESET"||x.destroyed)return;let M,z,Ee,J;j.code==="ERR_HTTP_REQUEST_TIMEOUT"?(z="408",Ee=RP.STATUS_CODES[z],M=`{"error":"${Ee}","message":"Client Timeout","statusCode":408}`,J="timeout"):(z="400",Ee=RP.STATUS_CODES[z],M=`{"error":"${Ee}","message":"Client Error","statusCode":400}`,J="error"),this.log.trace({err:j},`client ${J}`),x.writable&&x.write(`HTTP/1.1 ${z} ${Ee}\r
Content-Length: ${M.length}\r
Content-Type: application/json\r
\r
${M}`),x.destroy(j)}function Z(j,x){j.headers["accept-version"]!==void 0&&(j.headers[g5]=j.headers["accept-version"],j.headers["accept-version"]=void 0),d.router.lookup(j,x)}function xe(j,x,M){if(a){let Ee=r(x),J=l.child({reqId:Ee});J.info({req:x},"incoming request");let Oe=new El(Ee,null,x,null,J,kP),Be=new Yo(M,Oe,J);return a(new F5(j),Oe,Be)}let z=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${j}' is not a valid url component","statusCode":400}`;M.writeHead(400,{"Content-Type":"application/json","Content-Length":z.length}),M.end(z)}function H(j,x,M){if(j!==!1)return function(Ee){if(Ee){if(a){let Oe=r(x),Be=l.child({reqId:Oe});Be.info({req:x},"incoming request");let Ie=new El(Oe,null,x,null,Be,kP),nt=new Yo(M,Ie,Be);return a(new x5,Ie,nt)}let J='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';M.writeHead(500,{"Content-Type":"application/json","Content-Length":J.length}),M.end(J)}}}function Fe(j,x){return A('Cannot call "setNotFoundHandler"!'),d.setNotFoundHandler.call(this,j,x,k,h.routeHandler),this}function St(j){return A('Cannot call "setValidatorCompiler"!'),this[Tn].setValidatorCompiler(j),this}function _e(j){return A('Cannot call "setSchemaErrorFormatter"!'),qP(j),this[ym]=j.bind(this),this}function jt(j){return A('Cannot call "setSerializerCompiler"!'),this[Tn].setSerializerCompiler(j),this}function ct(j){A('Cannot call "setSchemaController"!');let x=this[Tn],M=OP.buildSchemaController(x,Object.assign({},x.opts,j));return this[Tn]=M,this.getSchema=M.getSchema.bind(M),this.getSchemas=M.getSchemas.bind(M),this}function me(j){return A('Cannot call "setReplySerializer"!'),this[PP]=j,this}function te(j){return A('Cannot call "setErrorHandler"!'),this[vl]=NP(this[vl],j.bind(this)),this}function We(j={}){return j.includeMeta=j.includeHooks?j.includeMeta?_m.concat(j.includeMeta):_m:j.includeMeta,h.printRoutes(j)}function ve(j,{rewriteUrl:x,logger:M}){let z;return function(J,Oe){if(z===void 0&&(z=j.isAsyncConstraint()),x){let Be=J.url,Ie=x(J);if(Be!==Ie)if(M.debug({originalUrl:Be,url:Ie},"rewrite url"),typeof Ie=="string")J.url=Ie;else{let nt=new Y5(J.url,typeof Ie);J.destroy(nt)}}j.routing(J,Oe,H(z,J,Oe))}}}Sl.errorCodes=os;function qP(e){if(typeof e!="function")throw new CP(typeof e);if(e.constructor.name==="AsyncFunction")throw new CP("AsyncFunction")}bl.exports=Sl;bl.exports.fastify=Sl;bl.exports.default=Sl});var LP=nO(DP());async function vm(e,t){e.get("/",async(r,n)=>({its:"WORKING!"}))}var[,,X5]=process.argv;console.log(process.argv);var Q5=e=>{switch(e){case"prod":return!0;default:return{transport:{target:"pino-pretty",options:{translateTime:"HH:MM:ss Z",ignore:"pid,hostname"}}}}},Em=(0,LP.default)({logger:Q5(X5)});Em.register(vm);Em.listen({port:3e3,host:"0.0.0.0"},(e,t)=>{e&&(Em.log.error(e),process.exit(1)),console.log(`Servers' ear to the stars @${t}`)});
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

forwarded/index.js:
  (*!
   * forwarded
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

tiny-lru/dist/tiny-lru.cjs:
  (**
   * tiny-lru
   *
   * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
   * @license BSD-3-Clause
   * @version 11.0.0
   *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
